{"meta":{"version":1,"warehouse":"2.2.0"},"models":{"Asset":[{"_id":"themes/material/source/css/duoshuo.css","path":"css/duoshuo.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/duoshuo.min.css","path":"css/duoshuo.min.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/gallery.min.css","path":"css/gallery.min.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/ie-blocker.css","path":"css/ie-blocker.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/uc.css","path":"css/uc.css","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.woff","path":"fonts/MaterialIcons-Regular.woff","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.woff2","path":"fonts/MaterialIcons-Regular.woff2","modified":0,"renderable":1},{"_id":"themes/material/source/img/avatar.png","path":"img/avatar.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/bg.png","path":"img/bg.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/favicon.png","path":"img/favicon.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/logo.jpg","path":"img/logo.jpg","modified":0,"renderable":1},{"_id":"themes/material/source/img/logo.png","path":"img/logo.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/sidebar_header.png","path":"img/sidebar_header.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/upyun_logo.png","path":"img/upyun_logo.png","modified":0,"renderable":1},{"_id":"themes/material/source/js/highlight.min.js","path":"js/highlight.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/ie-blocker.en.js","path":"js/ie-blocker.en.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/ie-blocker.zhCN.js","path":"js/ie-blocker.zhCN.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/nprogress.js","path":"js/nprogress.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/smoothscroll.js","path":"js/smoothscroll.js","modified":0,"renderable":1},{"_id":"themes/material/source/css/material.min.css","path":"css/material.min.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/style.css","path":"css/style.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/style.min.css","path":"css/style.min.css","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/FontAwesome.otf","path":"fonts/FontAwesome.otf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.ttf","path":"fonts/MaterialIcons-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/fontawesome-webfont.eot","path":"fonts/fontawesome-webfont.eot","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/fontawesome-webfont.woff2","path":"fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/fontawesome-webfont.woff","path":"fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/material/source/img/daily_pic.png","path":"img/daily_pic.png","modified":0,"renderable":1},{"_id":"themes/material/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/js.js","path":"js/js.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/js.min.js","path":"js/js.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/agate.css","path":"css/highlight/agate.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/arduino-light.css","path":"css/highlight/arduino-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/androidstudio.css","path":"css/highlight/androidstudio.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/arta.css","path":"css/highlight/arta.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/ascetic.css","path":"css/highlight/ascetic.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-cave-dark.css","path":"css/highlight/atelier-cave-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-cave-light.css","path":"css/highlight/atelier-cave-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-dune-dark.css","path":"css/highlight/atelier-dune-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-dune-light.css","path":"css/highlight/atelier-dune-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-estuary-dark.css","path":"css/highlight/atelier-estuary-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-forest-dark.css","path":"css/highlight/atelier-forest-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-estuary-light.css","path":"css/highlight/atelier-estuary-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-forest-light.css","path":"css/highlight/atelier-forest-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-heath-dark.css","path":"css/highlight/atelier-heath-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-heath-light.css","path":"css/highlight/atelier-heath-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-lakeside-dark.css","path":"css/highlight/atelier-lakeside-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-lakeside-light.css","path":"css/highlight/atelier-lakeside-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-plateau-dark.css","path":"css/highlight/atelier-plateau-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-plateau-light.css","path":"css/highlight/atelier-plateau-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-savanna-dark.css","path":"css/highlight/atelier-savanna-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-savanna-light.css","path":"css/highlight/atelier-savanna-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-sulphurpool-dark.css","path":"css/highlight/atelier-sulphurpool-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-seaside-dark.css","path":"css/highlight/atelier-seaside-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-seaside-light.css","path":"css/highlight/atelier-seaside-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atelier-sulphurpool-light.css","path":"css/highlight/atelier-sulphurpool-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atom-one-dark.css","path":"css/highlight/atom-one-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/atom-one-light.css","path":"css/highlight/atom-one-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/brown-paper.css","path":"css/highlight/brown-paper.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/codepen-embed.css","path":"css/highlight/codepen-embed.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/color-brewer.css","path":"css/highlight/color-brewer.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/darcula.css","path":"css/highlight/darcula.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/dark.css","path":"css/highlight/dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/darkula.css","path":"css/highlight/darkula.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/docco.css","path":"css/highlight/docco.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/dracula.css","path":"css/highlight/dracula.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/far.css","path":"css/highlight/far.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/foundation.css","path":"css/highlight/foundation.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/github-gist.css","path":"css/highlight/github-gist.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/googlecode.css","path":"css/highlight/googlecode.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/github.css","path":"css/highlight/github.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/grayscale.css","path":"css/highlight/grayscale.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/gruvbox-dark.css","path":"css/highlight/gruvbox-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/hopscotch.css","path":"css/highlight/hopscotch.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/hybrid.css","path":"css/highlight/hybrid.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/idea.css","path":"css/highlight/idea.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/ir-black.css","path":"css/highlight/ir-black.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/gruvbox-light.css","path":"css/highlight/gruvbox-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/kimbie.dark.css","path":"css/highlight/kimbie.dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/kimbie.light.css","path":"css/highlight/kimbie.light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/magula.css","path":"css/highlight/magula.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/mono-blue.css","path":"css/highlight/mono-blue.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/monokai-sublime.css","path":"css/highlight/monokai-sublime.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/monokai.css","path":"css/highlight/monokai.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/obsidian.css","path":"css/highlight/obsidian.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/ocean.css","path":"css/highlight/ocean.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/paraiso-dark.css","path":"css/highlight/paraiso-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/paraiso-light.css","path":"css/highlight/paraiso-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/pojoaque.css","path":"css/highlight/pojoaque.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/purebasic.css","path":"css/highlight/purebasic.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/qtcreator_dark.css","path":"css/highlight/qtcreator_dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/qtcreator_light.css","path":"css/highlight/qtcreator_light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/railscasts.css","path":"css/highlight/railscasts.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/rainbow.css","path":"css/highlight/rainbow.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/solarized-dark.css","path":"css/highlight/solarized-dark.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/solarized-light.css","path":"css/highlight/solarized-light.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/solarized-white.css","path":"css/highlight/solarized-white.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/tomorrow-night-blue.css","path":"css/highlight/tomorrow-night-blue.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/school-book.css","path":"css/highlight/school-book.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/tomorrow-night-bright.css","path":"css/highlight/tomorrow-night-bright.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/tomorrow-night-eighties.css","path":"css/highlight/tomorrow-night-eighties.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/tomorrow-night.css","path":"css/highlight/tomorrow-night.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/tomorrow.css","path":"css/highlight/tomorrow.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/vs.css","path":"css/highlight/vs.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/xcode.css","path":"css/highlight/xcode.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/material.css","path":"css/material.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/xt256.css","path":"css/highlight/xt256.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/zenburn.css","path":"css/highlight/zenburn.css","modified":0,"renderable":1},{"_id":"themes/material/source/css/highlight/sunburst.css","path":"css/highlight/sunburst.css","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.eot","path":"fonts/MaterialIcons-Regular.eot","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/fontawesome-webfont.ttf","path":"fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-bilibili.png","path":"img/footer/footer_ico-bilibili.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-facebook.png","path":"img/footer/footer_ico-facebook.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-github.png","path":"img/footer/footer_ico-github.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-instagram.png","path":"img/footer/footer_ico-instagram.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-gplus.png","path":"img/footer/footer_ico-gplus.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-linkedin.png","path":"img/footer/footer_ico-linkedin.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-telegram.png","path":"img/footer/footer_ico-telegram.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-tumblr.png","path":"img/footer/footer_ico-tumblr.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-twitter.png","path":"img/footer/footer_ico-twitter.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-weibo.png","path":"img/footer/footer_ico-weibo.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/footer/footer_ico-zhihu.png","path":"img/footer/footer_ico-zhihu.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/gallery/arrow.svg","path":"img/gallery/arrow.svg","modified":0,"renderable":1},{"_id":"themes/material/source/img/gallery/close.svg","path":"img/gallery/close.svg","modified":0,"renderable":1},{"_id":"themes/material/source/img/gallery/spinner.svg","path":"img/gallery/spinner.svg","modified":0,"renderable":1},{"_id":"themes/material/source/js/gallery/jquery.poptrox.min.js","path":"js/gallery/jquery.poptrox.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/gallery/main.min.js","path":"js/gallery/main.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/gallery/skel.min.js","path":"js/gallery/skel.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/js/gallery/util.min.js","path":"js/gallery/util.min.js","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-13.png","path":"img/random/material-13.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-15.png","path":"img/random/material-15.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-17.png","path":"img/random/material-17.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-16.png","path":"img/random/material-16.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-4.png","path":"img/random/material-4.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-6.png","path":"img/random/material-6.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-10.png","path":"img/random/material-10.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-12.png","path":"img/random/material-12.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-3.png","path":"img/random/material-3.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-9.png","path":"img/random/material-9.png","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/fontawesome-webfont.svg","path":"fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-11.png","path":"img/random/material-11.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-19.png","path":"img/random/material-19.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-8.png","path":"img/random/material-8.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-1.png","path":"img/random/material-1.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-2.png","path":"img/random/material-2.png","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Black.ttf","path":"fonts/Roboto-Black.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Bold.ttf","path":"fonts/Roboto-Bold.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Light.ttf","path":"fonts/Roboto-Light.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Medium.ttf","path":"fonts/Roboto-Medium.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Regular.ttf","path":"fonts/Roboto-Regular.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/fonts/Roboto-Thin.ttf","path":"fonts/Roboto-Thin.ttf","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-7.png","path":"img/random/material-7.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-18.png","path":"img/random/material-18.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-5.png","path":"img/random/material-5.png","modified":0,"renderable":1},{"_id":"themes/material/source/img/random/material-14.png","path":"img/random/material-14.png","modified":0,"renderable":1}],"Cache":[{"_id":"themes/material/.travis.yml","hash":"639b4687fa0c080b419405136a5081603a83b6c0","modified":1486177090585},{"_id":"themes/material/LICENSE","hash":"2ea9f02239dc6b5fdbfff01fcdf85bcc8c13667c","modified":1486177090588},{"_id":"themes/material/README.md","hash":"5a91c828e5d0c8c1be4c67653195e911e6f42c95","modified":1486177090588},{"_id":"themes/material/_config.yml","hash":"05e107629aaf1e17675c33dd48c15dd37490d53d","modified":1487053766534},{"_id":"themes/material/contributing.json","hash":"f6f039672fef8e0267d9586c73d1a425c6c882d8","modified":1486177090589},{"_id":"themes/material/lint.sh","hash":"b082677c539a554f3ba9435e9569b7257610c08a","modified":1486177090619},{"_id":"themes/material/package.json","hash":"ef6da09bbf3e331e9de1a3e20131cbb935e39fc9","modified":1486177090620},{"_id":"source/_posts/elastalert-wechat-plugin.md","hash":"cb1dd12308ea37a17bba7020048f981500a7e3bc","modified":1487238099566},{"_id":"source/_posts/elasticsearch-delete-indices-by-date.md","hash":"39946d54c43b4b14d497c9f25d59b87c2125e96a","modified":1491459217067},{"_id":"source/_posts/elasticsearch-elastalert.md","hash":"52dd6034e594f32ae711a02f5ea69b2044217aa0","modified":1487053945097},{"_id":"source/_posts/elk-stack-beats.md","hash":"5a4d07cc1ea441ecdf4ef2807745557e2b69e354","modified":1488452261760},{"_id":"source/_posts/hexo-github-pages-blog.md","hash":"fb72ec300e8e1e342b6b5da830641d78ec2c146e","modified":1486563374903},{"_id":"source/_posts/heartbeat.md","hash":"dcfd28a48322e3d542d41774c524ae6adb9e407b","modified":1488520704584},{"_id":"source/_posts/jdk-zip.md","hash":"29f0288a65db890c3b3b29e16c7e66ae8da5703a","modified":1494998277917},{"_id":"source/_posts/nginx-regex-test-way.md","hash":"ce44112c546858765db5bd6a6d48b76fe3f250b4","modified":1498724142201},{"_id":"source/_posts/nginx-logging-request-body-as-hexidecimal.md","hash":"6bc3a9f1811d64f3f58608c03582c3a6aff0dcd4","modified":1498014465271},{"_id":"source/_posts/owncloud.md","hash":"8ad803964c8db8c5b32020e8a0913493a30ba49d","modified":1491840161477},{"_id":"source/_posts/share-mouse-and-keyboard-with-your-windows-linux-machines-md.md","hash":"084589f785c2899c0ef09486edcf6c308a58b531","modified":1487035162744},{"_id":"source/_posts/springmvc-log4j-to-logback.md","hash":"ddecc48e838432ee6438e941470cc29b732ad468","modified":1488348125838},{"_id":"themes/material/languages/ar.yml","hash":"165e0430a3da3c5882b5f3ca5e098a09f70a909d","modified":1486177090590},{"_id":"themes/material/languages/de.yml","hash":"379e03591ebeeaab42f8588ab05e897ba7b2e68c","modified":1486177090590},{"_id":"themes/material/languages/en.yml","hash":"b940600c889b0b722ec7f12322858572360e898e","modified":1486177090592},{"_id":"themes/material/languages/es.yml","hash":"0d72be17279100cb4c96da41945d7d8351fa0255","modified":1486177090593},{"_id":"themes/material/languages/fr.yml","hash":"00332d7dd371b118f52e46f65256eb3c10ecd17d","modified":1486177090594},{"_id":"themes/material/languages/ja.yml","hash":"0733638e6dfa2bdf6238d2410ab5d4f76227e7cf","modified":1486177090594},{"_id":"themes/material/languages/ms.yml","hash":"5bf0268854ba1f8940392e80a92c8e6b0db0cbcd","modified":1486177090595},{"_id":"themes/material/languages/zh-CN.yml","hash":"af9c232284013a5ae9f84fb9ea62ac82373a108d","modified":1486177090595},{"_id":"themes/material/languages/zh-TW.yml","hash":"5a445321470a404e801f8b4faa89b0b9989a052c","modified":1486177090595},{"_id":"themes/material/layout/index.ejs","hash":"6d2452593a818992e530916d610b12cf1a82cab2","modified":1486177090617},{"_id":"themes/material/layout/layout.ejs","hash":"6e7163bb7c2db095aa5c751f5abb0dffba42356b","modified":1486177090619},{"_id":"themes/material/layout/post.ejs","hash":"1ca0ec79e39e47bd3c0db59238fc59187db37a7d","modified":1486177090619},{"_id":"themes/material/layout/_partial/Isolation-post-info.ejs","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1486177090597},{"_id":"themes/material/layout/_partial/Paradox-post-thumbnail.ejs","hash":"4c12ceb81c83fed5f7e7e89dbde2af9d548a7837","modified":1486177090600},{"_id":"themes/material/layout/_partial/Isolation-post_entry.ejs","hash":"b836eedd4881575000f57b7a6e58b7e6ac48d0eb","modified":1486177090597},{"_id":"themes/material/layout/_partial/Paradox-post-info.ejs","hash":"c1ea5ebbdbc44f363891753e7bb78bdb707e197f","modified":1486177090597},{"_id":"themes/material/layout/_partial/Paradox-post_entry-thumbnail.ejs","hash":"e904df50a90823f774e32b831455a01ee1d354e2","modified":1486177090600},{"_id":"themes/material/layout/_partial/Paradox-search.ejs","hash":"a53365c8a50db079eb6602350aa3f53d3712797d","modified":1486177090601},{"_id":"themes/material/layout/_partial/Paradox-post_entry.ejs","hash":"08439ca843fb5bec3ab48e9a6baf02d212ff2132","modified":1486177090600},{"_id":"themes/material/layout/_partial/blog_info.ejs","hash":"6eb3bed89ad5853dbc10056f8c57a5ecf4cbd437","modified":1486177090601},{"_id":"themes/material/layout/_partial/comment.ejs","hash":"82fa342d7fe4c02bdb417a75300a4860e93cd551","modified":1486177090602},{"_id":"themes/material/layout/_partial/config_css.ejs","hash":"0b032f47c7a3abbcdeee712ab61844981bb4c831","modified":1486177090603},{"_id":"themes/material/layout/_partial/footer-left.ejs","hash":"d46a577253c61eb152c59ab2f51a26d4ba7f805a","modified":1486177090606},{"_id":"themes/material/layout/_partial/footer.ejs","hash":"08b37548a1dccf671289c642ad43b24e37a78c5a","modified":1486177090606},{"_id":"themes/material/layout/_partial/footer-option.ejs","hash":"fb12a47eb350954274982dffc4a221454e4a0fe1","modified":1486177090606},{"_id":"themes/material/layout/_partial/footer_top.ejs","hash":"eabe53e9d9341101be6529d6331c617864a59b0d","modified":1486177090607},{"_id":"themes/material/layout/_partial/head.ejs","hash":"8873959841d065d493882c87c409eaced5f39374","modified":1486177090607},{"_id":"themes/material/layout/_partial/import_js.ejs","hash":"1b9c0681f9a259f1431bc5bb2f97e0b8b45e2f83","modified":1486177090607},{"_id":"themes/material/layout/_partial/daily_pic.ejs","hash":"ee75b08a39761aa5a25616ffbabb4ce9eb4850d6","modified":1486177090603},{"_id":"themes/material/layout/_partial/isolate-sns_list.ejs","hash":"74de1f8ef14b58c21eb7895e9c9b3f3080d40aa4","modified":1486177090608},{"_id":"themes/material/layout/_partial/isolate_info.ejs","hash":"81f47a927ca4ffebf7768aa63c59523a792990de","modified":1486177090608},{"_id":"themes/material/layout/_partial/nprogress.ejs","hash":"c3389daf95014d2e1e3537cd15baac014aa16d4b","modified":1486177090609},{"_id":"themes/material/layout/_partial/post-content.ejs","hash":"d93b04ae59602991368e940431cd4db266616a17","modified":1486177090609},{"_id":"themes/material/layout/_partial/post-header.ejs","hash":"6e9b69fcb444cfc369653d7062721c92b0c04a94","modified":1486177090609},{"_id":"themes/material/layout/_partial/post-info-share.ejs","hash":"05520fdd12408d6ab96dfbe9323faae9187dbd5d","modified":1486177090610},{"_id":"themes/material/layout/_partial/post-nav.ejs","hash":"6b514c951b2535a0c1d22224c06856588ba18026","modified":1486177090610},{"_id":"themes/material/layout/_partial/sidebar-footer.ejs","hash":"20acafaa1fddf22e1db0fad2fee95a3119c84122","modified":1486177090610},{"_id":"themes/material/layout/_partial/sidebar-header.ejs","hash":"b64ac5d04ddbe8a8c42b7aaf10e9fddec3a2e109","modified":1486177090611},{"_id":"themes/material/layout/_partial/sidebar-sponsor.ejs","hash":"4a0e5c9f0405a500057d70e1a7699f2151678f6e","modified":1486177090611},{"_id":"themes/material/layout/_partial/toc_button.ejs","hash":"62cdda091d7901113bf32c58cc1e110908c3c135","modified":1486177090612},{"_id":"themes/material/layout/_partial/sidebar.ejs","hash":"5fa89113054ae63689ad0edd1092a4bfac8cdcdb","modified":1486177090612},{"_id":"themes/material/layout/_partial/sidebar-navigation.ejs","hash":"2fe70d9d7eb21c00a2e86fd389128388bb8c9c25","modified":1486177090611},{"_id":"themes/material/layout/_widget/disqus.ejs","hash":"a57414d4b57e004c4753b7f793d3bc50b86b0d6d","modified":1486177090613},{"_id":"themes/material/layout/_widget/duoshuo.ejs","hash":"e0293b279e5bb3c4b980d3763ded0a97fb2db870","modified":1487050748224},{"_id":"themes/material/layout/_widget/leancloud-like.ejs","hash":"5483f0c8b753e171400d9c27a585de6de890c8ba","modified":1486177090613},{"_id":"themes/material/layout/_widget/leancloud-views.ejs","hash":"69f5f3b2a9a2c84f0c8b424a412ef354cb0481a7","modified":1486177090614},{"_id":"themes/material/layout/_widget/leancloud-views_num.ejs","hash":"a5ce35f2a456dc424e09b7e105b8d789dfe008df","modified":1486177090614},{"_id":"themes/material/layout/_widget/mathjax.ejs","hash":"2bdb6a28eab0cbee9a95c0b6ee7ed2ea3795cd14","modified":1486177090615},{"_id":"themes/material/layout/_widget/page-gallery.ejs","hash":"8d4474d5c797a6fdececeecb946e993a19fe9a40","modified":1486177090615},{"_id":"themes/material/layout/_widget/page-links.ejs","hash":"ae562eea1b432e44927a999381c9c2c43d5c1cc4","modified":1486177090616},{"_id":"themes/material/layout/_widget/page-tagcloud.ejs","hash":"d080683e457fc9b5501d9c1d25b900cdcd4d147e","modified":1486177090616},{"_id":"themes/material/layout/_widget/search-local-js.ejs","hash":"353fe66ab5d5686f798d2a906a293341640db38b","modified":1486177090617},{"_id":"themes/material/layout/_widget/search-swiftype-js.ejs","hash":"ff3a8bebfaf298cd362b9bb13639bfacf4c8e380","modified":1486177090617},{"_id":"themes/material/source/css/duoshuo.css","hash":"7372200a8d019d4c368283de089d2e0481cb1de7","modified":1486177090621},{"_id":"themes/material/source/css/duoshuo.min.css","hash":"89a30544b8b01d061da51c40f2af702a7969de5e","modified":1486177090621},{"_id":"themes/material/source/css/gallery.min.css","hash":"c5333ca835aae49239d809130a7b281af745729e","modified":1486177090622},{"_id":"themes/material/source/css/ie-blocker.css","hash":"121016e89d5f8b1f84f2e0a22da30f3c096de36e","modified":1486177090661},{"_id":"themes/material/source/css/uc.css","hash":"fdd08a03390256c5b89e38cad6e53228a49f02e1","modified":1486177090668},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.woff","hash":"c6c953c2ccb2ca9abb21db8dbf473b5a435f0082","modified":1486177090675},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.woff2","hash":"09963592e8c953cc7e14e3fb0a5b05d5042e8435","modified":1486177090675},{"_id":"themes/material/source/img/avatar.png","hash":"bf483b0d495dbbcfb308348a945818e1c1cc9696","modified":1486177090718},{"_id":"themes/material/source/img/bg.png","hash":"a32f9717e19e821a4030ade551dc2917c889fcd8","modified":1486177090719},{"_id":"themes/material/source/img/favicon.png","hash":"b1bcc84cedb2a618e8db93559ce7d58f9274085d","modified":1486177090720},{"_id":"themes/material/source/img/logo.jpg","hash":"bf6ec9ed12d93f95987ffe2fe5af74d721d9b918","modified":1486184489547},{"_id":"themes/material/source/img/logo.png","hash":"b1bcc84cedb2a618e8db93559ce7d58f9274085d","modified":1486177090730},{"_id":"themes/material/source/img/sidebar_header.png","hash":"c47f4d39f421c0a950279d050ae82f9ae6dd19ff","modified":1486177090776},{"_id":"themes/material/source/img/upyun_logo.png","hash":"aee4e90c4e2e72ef7036668c52dabcd8d028ee2f","modified":1486177090777},{"_id":"themes/material/source/js/highlight.min.js","hash":"e2959a551162dbea01307c72f7bd8d9d236b0cd0","modified":1486177090779},{"_id":"themes/material/source/js/ie-blocker.en.js","hash":"0bbd768e3be0081cf8d3fc3a9568c6a0f951ada7","modified":1486177090780},{"_id":"themes/material/source/js/ie-blocker.zhCN.js","hash":"198ffa1583343a5b5bf5e52afcfbff96fd0ef569","modified":1486177090780},{"_id":"themes/material/source/js/nprogress.js","hash":"a3058d4b6afb5d7a14e5afcbb88f778de35864f0","modified":1486177090783},{"_id":"themes/material/source/js/smoothscroll.js","hash":"53204da28f2ccfd4af92511969319c574da1f7b5","modified":1486177090784},{"_id":"themes/material/source/css/material.min.css","hash":"f3c8e6a9d94e6cad30c6628e1d732e6ee00d5fce","modified":1486177090664},{"_id":"themes/material/source/css/style.css","hash":"80f630335467f259dc992182c91e502eeb92101f","modified":1486177090665},{"_id":"themes/material/source/css/style.min.css","hash":"2460d86314e416338aa5ec6ec032be5d8e100581","modified":1486177090667},{"_id":"themes/material/source/fonts/FontAwesome.otf","hash":"42c179eef588854b5ec151bcf6a3f58aa8b79b11","modified":1486177090669},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.ttf","hash":"fc05de31234e0090f7ddc28ce1b23af4026cb1da","modified":1486177090674},{"_id":"themes/material/source/fonts/fontawesome-webfont.eot","hash":"986eed8dca049714e43eeebcb3932741a4bec76d","modified":1486177090712},{"_id":"themes/material/source/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1486177090717},{"_id":"themes/material/source/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1486177090717},{"_id":"themes/material/source/img/daily_pic.png","hash":"5e9a5f6a134889d0242e69061837f2032416d7ce","modified":1486177090720},{"_id":"themes/material/source/js/jquery.min.js","hash":"d0c03f4b0c3b72172804cbc5d19e44b3a0a9a171","modified":1486177090781},{"_id":"themes/material/source/js/js.js","hash":"c8d49615327c38fd7d00dff47fdd0d52fb94ca4c","modified":1486177090782},{"_id":"themes/material/source/js/js.min.js","hash":"1113143e83eaad19f43e84f9e8782f8afa3c9e67","modified":1486177090783},{"_id":"themes/material/source/css/highlight/agate.css","hash":"267d7a729d7106899d887940bd62f01a7f8810a8","modified":1486177090623},{"_id":"themes/material/source/css/highlight/arduino-light.css","hash":"459a63e66124cf3db5fdcbd0b211199048d718d3","modified":1486177090624},{"_id":"themes/material/source/css/highlight/androidstudio.css","hash":"bd1d92a769b5e54f65ed659be012a5da7b933f67","modified":1486177090624},{"_id":"themes/material/source/css/highlight/arta.css","hash":"0c83871a3be547414936f040d1b651796ed432e9","modified":1486177090625},{"_id":"themes/material/source/css/highlight/ascetic.css","hash":"1b3f8c010d93271fe0b8973b24a83cccb43d2ab5","modified":1486177090625},{"_id":"themes/material/source/css/highlight/atelier-cave-dark.css","hash":"0fe44a5e2e47a6d5f808f343be5e0ee38a157513","modified":1486177090626},{"_id":"themes/material/source/css/highlight/atelier-cave-light.css","hash":"8e8a3cd5611034e8cb1cf17ae598cb146feae0e5","modified":1486177090626},{"_id":"themes/material/source/css/highlight/atelier-dune-dark.css","hash":"371fbf41c919b2cf66dbd64db24fc9a9f270f0ca","modified":1486177090627},{"_id":"themes/material/source/css/highlight/atelier-dune-light.css","hash":"978c280fbb391ab34ec798ff63d27ccf0622ffc5","modified":1486177090627},{"_id":"themes/material/source/css/highlight/atelier-estuary-dark.css","hash":"6cd190c8e9645ec6cc3aa897f2076c9a2a65fbf4","modified":1486177090627},{"_id":"themes/material/source/css/highlight/atelier-forest-dark.css","hash":"8d9cece07b6ea31e01fec11987b42ffc5bfb8c3f","modified":1486177090630},{"_id":"themes/material/source/css/highlight/atelier-estuary-light.css","hash":"eaf8d2305631471a5c69039f5f666ec7cdb0991e","modified":1486177090630},{"_id":"themes/material/source/css/highlight/atelier-forest-light.css","hash":"cdfdc19fd6e33879b2212cf41d5159484d72b1ac","modified":1486177090630},{"_id":"themes/material/source/css/highlight/atelier-heath-dark.css","hash":"707c60a91e0390b4d481710e5cab28441b1a6d20","modified":1486177090630},{"_id":"themes/material/source/css/highlight/atelier-heath-light.css","hash":"9b034e416e989edba7d2c2fd57ed706dc2059c4e","modified":1486177090631},{"_id":"themes/material/source/css/highlight/atelier-lakeside-dark.css","hash":"6f9102332449833997b2e72e8658fb9de212bc48","modified":1486177090631},{"_id":"themes/material/source/css/highlight/atelier-lakeside-light.css","hash":"180699d969cb62743bc8e4cf4dc5b88ea1c6ed9b","modified":1486177090631},{"_id":"themes/material/source/css/highlight/atelier-plateau-dark.css","hash":"4d69e5501ec2a7b81810466837ec731a81590d4d","modified":1486177090632},{"_id":"themes/material/source/css/highlight/atelier-plateau-light.css","hash":"f8e768bd2b111a4dffb6100391b647f6d9b1f445","modified":1486177090633},{"_id":"themes/material/source/css/highlight/atelier-savanna-dark.css","hash":"3768ba3e44fc1038adb09ff3adfbe4c8d807c338","modified":1486177090634},{"_id":"themes/material/source/css/highlight/atelier-savanna-light.css","hash":"fd76c75ef1f1ab693ccd09e973204cc80dae18cd","modified":1486177090634},{"_id":"themes/material/source/css/highlight/atelier-sulphurpool-dark.css","hash":"f6dc59deaf5dc1a87229e207f18b0def15a235cd","modified":1486177090635},{"_id":"themes/material/source/css/highlight/atelier-seaside-dark.css","hash":"f44bb322aab7a93f0c52a39e878670b7d6c2a8b8","modified":1486177090635},{"_id":"themes/material/source/css/highlight/atelier-seaside-light.css","hash":"dd9657b37f5fd62a288972380193db4249bcdf96","modified":1486177090635},{"_id":"themes/material/source/css/highlight/atelier-sulphurpool-light.css","hash":"4783dd049a048c7858603984b61b5f7db920c44d","modified":1486177090636},{"_id":"themes/material/source/css/highlight/atom-one-dark.css","hash":"91671ed42c0ce1363843144a9666d34faddb7e27","modified":1486177090636},{"_id":"themes/material/source/css/highlight/atom-one-light.css","hash":"526e305a190476a2b28a244ca928aabdcc686c34","modified":1486177090636},{"_id":"themes/material/source/css/highlight/brown-paper.css","hash":"9a030da7dc781e1461b15186f2b01ea684ee9ad2","modified":1486177090637},{"_id":"themes/material/source/css/highlight/codepen-embed.css","hash":"a4ce8f56fa8ec5078f597db441ebeace6264a508","modified":1486177090637},{"_id":"themes/material/source/css/highlight/color-brewer.css","hash":"317e097d8b2e0fd3e7c64d97bb93caa8e9e23b9d","modified":1486177090637},{"_id":"themes/material/source/css/highlight/darcula.css","hash":"243e56c3eca2c7234b125df3c9a882d984f89b8a","modified":1486177090638},{"_id":"themes/material/source/css/highlight/dark.css","hash":"d4b6d04ed87e2ef4fcd359052c0220b70060a0f3","modified":1486177090638},{"_id":"themes/material/source/css/highlight/darkula.css","hash":"d004ba64216234a53c84fa55baefdc8b371bb4d9","modified":1486177090639},{"_id":"themes/material/source/css/highlight/docco.css","hash":"9495b22865033719a0701b8e3557a843611204db","modified":1486177090639},{"_id":"themes/material/source/css/highlight/dracula.css","hash":"896157dc66de96b3e8ac2c2d032ac1f79f42ac42","modified":1486177090640},{"_id":"themes/material/source/css/highlight/far.css","hash":"3c9b37b9d4f992042165069792ea373ce299fa31","modified":1486177090640},{"_id":"themes/material/source/css/highlight/foundation.css","hash":"b8f36a5621cc6043fbf3ba23915b6faa92b2e6ba","modified":1486177090640},{"_id":"themes/material/source/css/highlight/github-gist.css","hash":"26f7b67c3c0ad968daf23129c5706c797ce24284","modified":1486177090641},{"_id":"themes/material/source/css/highlight/googlecode.css","hash":"8ea1780e834b7f40c962744cb4ef533f9b805f9b","modified":1486177090642},{"_id":"themes/material/source/css/highlight/github.css","hash":"6f28691831ef118939d2e109a205b425a5249b90","modified":1486177090641},{"_id":"themes/material/source/css/highlight/grayscale.css","hash":"b2074d4f1ffa928a9948a9edecf8e4ec513999e6","modified":1486177090642},{"_id":"themes/material/source/css/highlight/gruvbox-dark.css","hash":"bfe2f24aef069669dc44dba54f14b0005667d700","modified":1486177090642},{"_id":"themes/material/source/css/highlight/hopscotch.css","hash":"1043cccf681b3c58b54dc044e2fcaeb409cdbda1","modified":1486177090643},{"_id":"themes/material/source/css/highlight/hybrid.css","hash":"c1cf52abb1248498794739cea51d6ecbd7539c69","modified":1486177090643},{"_id":"themes/material/source/css/highlight/idea.css","hash":"cfdc18180d926095d8322f36f041a2cf43445eef","modified":1486177090644},{"_id":"themes/material/source/css/highlight/ir-black.css","hash":"c8ee27f6873ee1e52c394b373bc8be49d059a46c","modified":1486177090644},{"_id":"themes/material/source/css/highlight/gruvbox-light.css","hash":"4e5445d5eaa82f1787e91682e544fea3be3b4bb9","modified":1486177090643},{"_id":"themes/material/source/css/highlight/kimbie.dark.css","hash":"8fb1f4307f136010545bb095fd9a4bd298bd9dee","modified":1486177090645},{"_id":"themes/material/source/css/highlight/kimbie.light.css","hash":"6c95f1dc95fe047eff53b52231a8f552ec17713d","modified":1486177090645},{"_id":"themes/material/source/css/highlight/magula.css","hash":"5a0e59aff9f270dbb166e2735edf0bd91569ad9d","modified":1486177090646},{"_id":"themes/material/source/css/highlight/mono-blue.css","hash":"3d78780568f60215686ca93e1459c0a86b1e13a2","modified":1486177090647},{"_id":"themes/material/source/css/highlight/monokai-sublime.css","hash":"0d16b61fd8723b61ebbb4ae85936b7222089cd5c","modified":1486177090647},{"_id":"themes/material/source/css/highlight/monokai.css","hash":"525238932a2e8a86d36ff559ec8c56617a81c66a","modified":1486177090648},{"_id":"themes/material/source/css/highlight/obsidian.css","hash":"c8f452d1dd3c24ed1fd31a8a542976a98768f0ee","modified":1486177090648},{"_id":"themes/material/source/css/highlight/ocean.css","hash":"05261db4eab97828f1e0e2d8dac3c17b46c5135b","modified":1486177090649},{"_id":"themes/material/source/css/highlight/paraiso-dark.css","hash":"54a74080b472d4f02ec892383df7243a9fc0325c","modified":1486177090649},{"_id":"themes/material/source/css/highlight/paraiso-light.css","hash":"ec682ddb4f6c6022e86bbc3b21fee2db17534dfa","modified":1486177090649},{"_id":"themes/material/source/css/highlight/pojoaque.css","hash":"147fa0862896e6954bc6800e573d0dc009d0bd76","modified":1486177090650},{"_id":"themes/material/source/css/highlight/purebasic.css","hash":"90723dc0145d109bfd8f52a6586cafc0b60f3744","modified":1486177090652},{"_id":"themes/material/source/css/highlight/qtcreator_dark.css","hash":"f6247839bf5f054c1c67675c9a2009c9dd882a54","modified":1486177090652},{"_id":"themes/material/source/css/highlight/qtcreator_light.css","hash":"64a3df679ec5c1189fc4f4c046da13ccfde61088","modified":1486177090652},{"_id":"themes/material/source/css/highlight/railscasts.css","hash":"1bb2dd8ccba3e33aa3fd419bad757b0710ca7bf3","modified":1486177090653},{"_id":"themes/material/source/css/highlight/rainbow.css","hash":"34ebae47223dc8e1b6464880fa83e217a5774199","modified":1486177090653},{"_id":"themes/material/source/css/highlight/solarized-dark.css","hash":"97bba4362e3001a93f1b111a140895cbe6047a81","modified":1486177090654},{"_id":"themes/material/source/css/highlight/solarized-light.css","hash":"fe6779c179c3e6136384e463fdc6d3b08ff88ba7","modified":1486177090654},{"_id":"themes/material/source/css/highlight/solarized-white.css","hash":"1d10f6dc697821d0959eaf975dddddff971a6d63","modified":1486177090655},{"_id":"themes/material/source/css/highlight/tomorrow-night-blue.css","hash":"8fc2bd599487fa428895af9c15278b629205a005","modified":1486177090655},{"_id":"themes/material/source/css/highlight/school-book.css","hash":"908952208417159a90bd05cd6b9c1ae6cfab5274","modified":1486177090654},{"_id":"themes/material/source/css/highlight/tomorrow-night-bright.css","hash":"db7f477d609bfd0d264f69fdee32d28b2b3771ec","modified":1486177090656},{"_id":"themes/material/source/css/highlight/tomorrow-night-eighties.css","hash":"12449d31f223502297086943f1bfeeac5f28c4c1","modified":1486177090657},{"_id":"themes/material/source/css/highlight/tomorrow-night.css","hash":"51486c77fab70d7615e814787531d1a7db22a65a","modified":1486177090657},{"_id":"themes/material/source/css/highlight/tomorrow.css","hash":"e98fd167fe9c5668165f28dd6c0ecb59b3293f67","modified":1486177090658},{"_id":"themes/material/source/css/highlight/vs.css","hash":"7f91ad5a66ffbc8db2af542bd2db0e84bcf22587","modified":1486177090658},{"_id":"themes/material/source/css/highlight/xcode.css","hash":"229ba54cfed52b79c389eb094ef3e480350bf308","modified":1486177090660},{"_id":"themes/material/source/css/material.css","hash":"a4f33bc2e224f7731456d5ee4aae2a1ac80c3011","modified":1486177090663},{"_id":"themes/material/source/css/highlight/xt256.css","hash":"1cfc26a3ec7154a4649eee5bfe57a50e0dc5046e","modified":1486177090661},{"_id":"themes/material/source/css/highlight/zenburn.css","hash":"92941a6ae73b74f44ad7c559c5548c44073c644a","modified":1486177090661},{"_id":"themes/material/source/css/highlight/sunburst.css","hash":"bcbe342ac0be63bb2e8545f426e13c1751a70923","modified":1486177090655},{"_id":"themes/material/source/fonts/MaterialIcons-Regular.eot","hash":"26fb8cecb5512223277b4d290a24492a0f09ede1","modified":1486177090671},{"_id":"themes/material/source/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1486177090716},{"_id":"themes/material/source/img/footer/footer_ico-bilibili.png","hash":"f922bc4606f4ecb3ec2bc1b2bfa092643ffa2e37","modified":1486177090721},{"_id":"themes/material/source/img/footer/footer_ico-facebook.png","hash":"66f959829d878794e66fd0e40c0d6bd843cc0cde","modified":1486177090722},{"_id":"themes/material/source/img/footer/footer_ico-github.png","hash":"4488aa8fc794beaba3e4c80d1f1b9d6c218b31ab","modified":1486177090722},{"_id":"themes/material/source/img/footer/footer_ico-instagram.png","hash":"e8ec64e6f2639aec952e8e4d2944d5173f62e720","modified":1486177090723},{"_id":"themes/material/source/img/footer/footer_ico-gplus.png","hash":"20971cbed2ebf58b9e3b087051f7fc56073da31d","modified":1486177090722},{"_id":"themes/material/source/img/footer/footer_ico-linkedin.png","hash":"3d93bb435053b93243e3c259c448caf4ed00627e","modified":1486177090723},{"_id":"themes/material/source/img/footer/footer_ico-telegram.png","hash":"1095c5279c498412ee314f4469768636e82148cb","modified":1486177090723},{"_id":"themes/material/source/img/footer/footer_ico-tumblr.png","hash":"447421c1dcced081fa5fb0355421b7bc71fe3f76","modified":1486177090724},{"_id":"themes/material/source/img/footer/footer_ico-twitter.png","hash":"98b6529d3e08d5d086a4df85c20265c4517ec9a8","modified":1486177090724},{"_id":"themes/material/source/img/footer/footer_ico-weibo.png","hash":"8d46998b88f57a2d92effaa65e97ee36906396c2","modified":1486177090725},{"_id":"themes/material/source/img/footer/footer_ico-zhihu.png","hash":"6b94cdb6e0a69e169baec6e22fe3a6e51b7ba4b5","modified":1486177090725},{"_id":"themes/material/source/img/gallery/arrow.svg","hash":"144d73877e52acc5068bc0c9d1e69ef450e69f26","modified":1486177090728},{"_id":"themes/material/source/img/gallery/close.svg","hash":"2690088060811f01c9360df75be80070156ff176","modified":1486177090728},{"_id":"themes/material/source/img/gallery/spinner.svg","hash":"fc9d1cd1118ac896d4f5326e110a653f3ea32b11","modified":1486177090729},{"_id":"themes/material/source/js/gallery/jquery.poptrox.min.js","hash":"4b156b61a32467b6bf7766201b777d8949a74ee4","modified":1486177090777},{"_id":"themes/material/source/js/gallery/main.min.js","hash":"c8ab39417f0d855bd28b3f6e040e93b245ba10f1","modified":1486177090778},{"_id":"themes/material/source/js/gallery/skel.min.js","hash":"18a181affac3ac6dcb5e4504e56b14941f4f2185","modified":1486177090778},{"_id":"themes/material/source/js/gallery/util.min.js","hash":"21f9de56727e235a83d514d08a65c7ef1b09c9e9","modified":1486177090779},{"_id":"themes/material/source/img/random/material-13.png","hash":"1a8378db3121b583485e2b939cb1aa0e0b14b0c8","modified":1486177090742},{"_id":"themes/material/source/img/random/material-15.png","hash":"36b9937cf3810e4970902b78797ad29b0831f065","modified":1486177090745},{"_id":"themes/material/source/img/random/material-17.png","hash":"9c463f96d4dadae4e67932c2d7ed1e353c4ecca8","modified":1486177090748},{"_id":"themes/material/source/img/random/material-16.png","hash":"ade7f75200d3fb38326e3cf1e9f1a812fb12a43b","modified":1486177090747},{"_id":"themes/material/source/img/random/material-4.png","hash":"171d9290b89a8e102d33f5a5c3f2d003cc20fe9f","modified":1486177090761},{"_id":"themes/material/source/img/random/material-6.png","hash":"29dd92b7c110bb6dfdfc2923c33f5d0895518001","modified":1486177090766},{"_id":"themes/material/source/img/random/material-10.png","hash":"021dca8d2477dae8f456a0cdc2725502d3b45785","modified":1486177090735},{"_id":"themes/material/source/img/random/material-12.png","hash":"ba0c8506af62f984da564e6e390f592475e51f2d","modified":1486177090741},{"_id":"themes/material/source/img/random/material-3.png","hash":"a7f86a309712b9bbb01a4b7b39b1ee429df9086a","modified":1486177090759},{"_id":"themes/material/source/img/random/material-9.png","hash":"bc4f1b42fd2d09a80ab5fef8c6066b5148db0749","modified":1486177090775},{"_id":"themes/material/source/fonts/fontawesome-webfont.svg","hash":"550ef5c1253c8376f2ead32b654eb58d3c106ca3","modified":1486177090714},{"_id":"themes/material/source/img/random/material-11.png","hash":"637d4513d1e7beeb1e5179fa404b4b6ea61ca3dd","modified":1486177090737},{"_id":"themes/material/source/img/random/material-19.png","hash":"f0b5383ba5c7e91f711daaa6b3a520556b7ca14d","modified":1486177090752},{"_id":"themes/material/source/img/random/material-8.png","hash":"cb700661e312a5527aaf229517705adb1c1cead2","modified":1486177090774},{"_id":"themes/material/source/img/random/material-1.png","hash":"af4b0ad72ce30f3fd7f7435cd3267b9187335ffd","modified":1486177090733},{"_id":"themes/material/source/img/random/material-2.png","hash":"c5fc2ec66660f48be0fb092a872d4058e9d9e68f","modified":1486177090757},{"_id":"themes/material/source/fonts/Roboto-Black.ttf","hash":"0244e6497a51fb8a38ca7e6fe297b066e2e09af5","modified":1486177090682},{"_id":"themes/material/source/fonts/Roboto-Bold.ttf","hash":"d1864343b543978bd491d40c80010cea50c1b7bf","modified":1486177090687},{"_id":"themes/material/source/fonts/Roboto-Light.ttf","hash":"b9ea2eaf26ff8fdcb5aee3e0c2c7a6084ebb6aac","modified":1486177090692},{"_id":"themes/material/source/fonts/Roboto-Medium.ttf","hash":"3965419aab480c184f66bc5e39c1719a373a4ef6","modified":1486177090699},{"_id":"themes/material/source/fonts/Roboto-Regular.ttf","hash":"06691e103d4d3ce1f1108d9b7d21254b714a41f8","modified":1486177090703},{"_id":"themes/material/source/fonts/Roboto-Thin.ttf","hash":"ed5101c3a800f35e925603a406e0c2dc5278b96c","modified":1486177090711},{"_id":"themes/material/source/img/random/material-7.png","hash":"e4aa6d4e1b52f1c097f61b5205d5b71a412e1d80","modified":1486177090770},{"_id":"themes/material/source/img/random/material-18.png","hash":"1d5bacea5d57cc3e652a7c697bcb4fbcb11e20dc","modified":1486177090750},{"_id":"themes/material/source/img/random/material-5.png","hash":"e26c197b3a765bbdcc966e4fb368c8808e9d655d","modified":1486177090765},{"_id":"themes/material/source/img/random/material-14.png","hash":"f6bd9ceca7deb32c45b02a5d89014c7ee4748833","modified":1486177090744},{"_id":"public/atom.xml","hash":"2e199ec1701875da817180b6d19b5c07bf2c9930","modified":1498724148599},{"_id":"public/content.json","hash":"8efdea4b6565af8b9fd47c4cfcbca582a8dbe06c","modified":1498724148883},{"_id":"public/2017/04/05/owncloud/index.html","hash":"c89de6c5063d90cb1ccf4c9b5f9cd3d5efd5ebca","modified":1498724148930},{"_id":"public/2017/02/28/springmvc-log4j-to-logback/index.html","hash":"0dd7394a81d926e2015ff1244b56d0e58c125051","modified":1498724148930},{"_id":"public/2017/03/03/heartbeat/index.html","hash":"bb00c5dd034df4fe3a67774d16fe8e6e06c3fb26","modified":1498724148930},{"_id":"public/2017/03/02/elk-stack-beats/index.html","hash":"022fef2febef9b08b5672cfb6b41478e26ebaaf9","modified":1498724148930},{"_id":"public/2017/02/14/elasticsearch-elastalert/index.html","hash":"a0a2f6d54984c62982b086619604e318fca43094","modified":1498724148930},{"_id":"public/2017/02/03/hexo-github-pages-blog/index.html","hash":"d09ae1e8d35568a6abddf1aec50760b67ea95f73","modified":1498724148931},{"_id":"public/2017/02/16/elastalert-wechat-plugin/index.html","hash":"4769f5255876ee10c69bdb076b5ca5a1a6f52769","modified":1498724148930},{"_id":"public/archives/index.html","hash":"0f6472cc93d290670312929d07678004caed36a4","modified":1498724148931},{"_id":"public/2017/02/08/share-mouse-and-keyboard-with-your-windows-linux-machines-md/index.html","hash":"abe8d595b0ff2c10a7cd2249e20bae452edc0160","modified":1498724148931},{"_id":"public/archives/2017/index.html","hash":"a3e7a4e93f6b6075102d1c6fcf7d4568e4621ad7","modified":1498724148932},{"_id":"public/archives/2017/02/index.html","hash":"3530c3a3f5d52f62674e156beffb1f6dc6466aaa","modified":1498724148932},{"_id":"public/archives/2017/04/index.html","hash":"60cd8abdbfb03c1693c5eacb06920166d369591d","modified":1498724148932},{"_id":"public/2017/06/21/nginx-logging-request-body-as-hexidecimal/index.html","hash":"6024d07cd0183c6cedae18df26fb06929d09c960","modified":1498724148917},{"_id":"public/2017/05/17/jdk-zip/index.html","hash":"6718b2e5b61a2dcd97c91463d4a1d9883eccd88e","modified":1498724148930},{"_id":"public/2017/04/06/elasticsearch-delete-indices-by-date/index.html","hash":"385c512d7b735667bbc4e8f8c95e71d1c4e995f9","modified":1498724148930},{"_id":"public/archives/page/2/index.html","hash":"8e209a389017b9548dc5d60562f681b783b56323","modified":1498724148931},{"_id":"public/archives/2017/page/2/index.html","hash":"6a8a49423f978224ffc036930856769fbedbd8b5","modified":1498724148932},{"_id":"public/archives/2017/05/index.html","hash":"6f242808da0ac9f80478ae81ada52f40c64f15af","modified":1498724148932},{"_id":"public/archives/2017/06/index.html","hash":"da990a4a5a9d23d4e62ba4159e59dea6c6df958c","modified":1498724148932},{"_id":"public/archives/2017/03/index.html","hash":"bed17d399780a328625f7d01c4fc8d1e5f45b1be","modified":1498724148932},{"_id":"public/categories/elkstasck/index.html","hash":"c0ac84dfe3c75f413641a973e16f58cc2a412966","modified":1498724148931},{"_id":"public/index.html","hash":"18481fa62902009586421283a6d5642a6047506b","modified":1498724148932},{"_id":"public/categories/owncloud/index.html","hash":"b413cc66ab3f8179393a09ff5bf66a12b9720713","modified":1498724148931},{"_id":"public/tags/elk/index.html","hash":"5a458eb2ec3c9f4546ce440cbc3e47fd33ede6dc","modified":1498724148932},{"_id":"public/tags/ElastAlert/index.html","hash":"16beac71a3c85942c90a3b963f52f509d2e1908c","modified":1498724148933},{"_id":"public/categories//index.html","hash":"cef351f1aef76972a0177dfe90109067a9fe7ae1","modified":1498724148931},{"_id":"public/categories//index.html","hash":"497f9179f756858611d408efc8f2b948d81e656a","modified":1498724148931},{"_id":"public/tags/elkstasck/index.html","hash":"c7da2c109457b816e468b23c63366ec5d8e4f911","modified":1498724148932},{"_id":"public/tags/blog/index.html","hash":"68b1ee6c503db322a51f1e97ec29c704d21868ca","modified":1498724148933},{"_id":"public/tags/hexo/index.html","hash":"2d56903fcd94fe25346df81efcc7f21fc710348a","modified":1498724148933},{"_id":"public/tags/beats/index.html","hash":"9028d313bcba3378edefac600916b21d7c3d14aa","modified":1498724148933},{"_id":"public/tags/elkstack/index.html","hash":"5dfb8cf887479971a627d77cf16434d0c46fec5d","modified":1498724148933},{"_id":"public/tags/owncloud/index.html","hash":"71616555975fe7e84ac96c1af8be2919b92f5bc1","modified":1498724148934},{"_id":"public/tags/synergy/index.html","hash":"d53ecb745163eafb1f7634e2def4a134a36d3376","modified":1498724148934},{"_id":"public/tags/Heartbeat/index.html","hash":"f7afeeb851095e42ecc903db965bc812b52fd1f5","modified":1498724148933},{"_id":"public/tags/springmvc/index.html","hash":"821dac7b1e4e51ce47131a95500e6e686dfba310","modified":1498724148934},{"_id":"public/tags/log4j/index.html","hash":"db5c7a27692dfce737097c02c88d030b42d81a22","modified":1498724148934},{"_id":"public/tags/logback/index.html","hash":"c6c973361c1c2f78a272c7a64c8297c0f8be2a9d","modified":1498724148934},{"_id":"public/tags/log/index.html","hash":"6e59336aa07c404977f9f8985ee2ba771abf8255","modified":1498724148934},{"_id":"public/categories/nginx/index.html","hash":"a8422a03394906e368e0e52c875d4da59216424f","modified":1498724148931},{"_id":"public/page/2/index.html","hash":"9a4606feeefdfd7576abc61330d797ce01498da7","modified":1498724148932},{"_id":"public/tags/curator/index.html","hash":"ca4c2ae43cd582f531e9fda14ed7c8cb0af10533","modified":1498724148933},{"_id":"public/tags/nginx/index.html","hash":"096f9fba574e7d1249469abe342b69c986779d7d","modified":1498724148933},{"_id":"public/tags/java/index.html","hash":"cd4869916a01207582a7139d95a4a2f11a6bc589","modified":1498724148933},{"_id":"public/tags/logstash/index.html","hash":"b025ab6523a3f23c87a2883f22b43edf3dfeeb55","modified":1498724148934},{"_id":"public/fonts/MaterialIcons-Regular.woff2","hash":"09963592e8c953cc7e14e3fb0a5b05d5042e8435","modified":1498724079357},{"_id":"public/fonts/MaterialIcons-Regular.woff","hash":"c6c953c2ccb2ca9abb21db8dbf473b5a435f0082","modified":1498724079357},{"_id":"public/img/logo.jpg","hash":"bf6ec9ed12d93f95987ffe2fe5af74d721d9b918","modified":1498724079357},{"_id":"public/img/avatar.png","hash":"bf483b0d495dbbcfb308348a945818e1c1cc9696","modified":1498724079357},{"_id":"public/img/bg.png","hash":"a32f9717e19e821a4030ade551dc2917c889fcd8","modified":1498724079357},{"_id":"public/img/favicon.png","hash":"b1bcc84cedb2a618e8db93559ce7d58f9274085d","modified":1498724079358},{"_id":"public/img/logo.png","hash":"b1bcc84cedb2a618e8db93559ce7d58f9274085d","modified":1498724079358},{"_id":"public/img/sidebar_header.png","hash":"c47f4d39f421c0a950279d050ae82f9ae6dd19ff","modified":1498724079358},{"_id":"public/img/upyun_logo.png","hash":"aee4e90c4e2e72ef7036668c52dabcd8d028ee2f","modified":1498724079358},{"_id":"public/img/footer/footer_ico-bilibili.png","hash":"f922bc4606f4ecb3ec2bc1b2bfa092643ffa2e37","modified":1498724079358},{"_id":"public/img/footer/footer_ico-github.png","hash":"4488aa8fc794beaba3e4c80d1f1b9d6c218b31ab","modified":1498724079358},{"_id":"public/img/footer/footer_ico-instagram.png","hash":"e8ec64e6f2639aec952e8e4d2944d5173f62e720","modified":1498724079358},{"_id":"public/img/footer/footer_ico-gplus.png","hash":"20971cbed2ebf58b9e3b087051f7fc56073da31d","modified":1498724079358},{"_id":"public/img/footer/footer_ico-linkedin.png","hash":"3d93bb435053b93243e3c259c448caf4ed00627e","modified":1498724079358},{"_id":"public/img/footer/footer_ico-twitter.png","hash":"98b6529d3e08d5d086a4df85c20265c4517ec9a8","modified":1498724079358},{"_id":"public/img/footer/footer_ico-telegram.png","hash":"1095c5279c498412ee314f4469768636e82148cb","modified":1498724079358},{"_id":"public/img/footer/footer_ico-facebook.png","hash":"66f959829d878794e66fd0e40c0d6bd843cc0cde","modified":1498724079358},{"_id":"public/img/footer/footer_ico-tumblr.png","hash":"447421c1dcced081fa5fb0355421b7bc71fe3f76","modified":1498724079358},{"_id":"public/img/footer/footer_ico-zhihu.png","hash":"6b94cdb6e0a69e169baec6e22fe3a6e51b7ba4b5","modified":1498724079358},{"_id":"public/img/footer/footer_ico-weibo.png","hash":"8d46998b88f57a2d92effaa65e97ee36906396c2","modified":1498724079358},{"_id":"public/img/gallery/spinner.svg","hash":"fc9d1cd1118ac896d4f5326e110a653f3ea32b11","modified":1498724079358},{"_id":"public/img/gallery/arrow.svg","hash":"144d73877e52acc5068bc0c9d1e69ef450e69f26","modified":1498724079358},{"_id":"public/img/gallery/close.svg","hash":"2690088060811f01c9360df75be80070156ff176","modified":1498724079358},{"_id":"public/fonts/fontawesome-webfont.eot","hash":"986eed8dca049714e43eeebcb3932741a4bec76d","modified":1498724079376},{"_id":"public/fonts/FontAwesome.otf","hash":"42c179eef588854b5ec151bcf6a3f58aa8b79b11","modified":1498724079380},{"_id":"public/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1498724079390},{"_id":"public/fonts/MaterialIcons-Regular.ttf","hash":"fc05de31234e0090f7ddc28ce1b23af4026cb1da","modified":1498724079391},{"_id":"public/img/daily_pic.png","hash":"5e9a5f6a134889d0242e69061837f2032416d7ce","modified":1498724079391},{"_id":"public/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1498724079391},{"_id":"public/img/random/material-17.png","hash":"9c463f96d4dadae4e67932c2d7ed1e353c4ecca8","modified":1498724079391},{"_id":"public/img/random/material-15.png","hash":"36b9937cf3810e4970902b78797ad29b0831f065","modified":1498724079391},{"_id":"public/img/random/material-13.png","hash":"1a8378db3121b583485e2b939cb1aa0e0b14b0c8","modified":1498724079392},{"_id":"public/img/random/material-4.png","hash":"171d9290b89a8e102d33f5a5c3f2d003cc20fe9f","modified":1498724079392},{"_id":"public/img/random/material-6.png","hash":"29dd92b7c110bb6dfdfc2923c33f5d0895518001","modified":1498724079392},{"_id":"public/img/random/material-16.png","hash":"ade7f75200d3fb38326e3cf1e9f1a812fb12a43b","modified":1498724079392},{"_id":"public/css/duoshuo.css","hash":"32a02eaa01ff7b66fd9df307b0d33d52810096be","modified":1498724079414},{"_id":"public/css/duoshuo.min.css","hash":"89a30544b8b01d061da51c40f2af702a7969de5e","modified":1498724079415},{"_id":"public/css/ie-blocker.css","hash":"dddce7e6250a449291888ae7865697282a213b14","modified":1498724079415},{"_id":"public/css/uc.css","hash":"7609828f93973d1a6d3ba4b38d94688a92a6a6c5","modified":1498724079415},{"_id":"public/js/ie-blocker.zhCN.js","hash":"0ed49b0ec1d1924b128fbd97fca2cf7af7856fdf","modified":1498724079415},{"_id":"public/js/nprogress.js","hash":"a3058d4b6afb5d7a14e5afcbb88f778de35864f0","modified":1498724079415},{"_id":"public/js/ie-blocker.en.js","hash":"96ca8e677a12048d099319ebdf01983ddc6ca80c","modified":1498724079415},{"_id":"public/js/smoothscroll.js","hash":"df56a1c84191a62750ae820943377b6775fca0e2","modified":1498724079415},{"_id":"public/css/highlight/agate.css","hash":"8e122b0f00f5a7ec4e6dc492bf1560441eeef7f0","modified":1498724079415},{"_id":"public/css/highlight/arduino-light.css","hash":"c6e05580b51b755e229e99eb156940ad2cab192b","modified":1498724079415},{"_id":"public/css/highlight/androidstudio.css","hash":"958baa24814c06a625612a3b2b478d54bc1bf1b1","modified":1498724079415},{"_id":"public/css/highlight/ascetic.css","hash":"6358377b5c25667886aca0d605cbc497cf02405f","modified":1498724079415},{"_id":"public/css/highlight/atelier-cave-dark.css","hash":"f397d4418ce88b998841fd9135242461ba1a79b5","modified":1498724079415},{"_id":"public/css/highlight/atelier-dune-light.css","hash":"7ba074de897e6a5e27d8b97f7cd06c1746474e72","modified":1498724079415},{"_id":"public/css/highlight/atelier-cave-light.css","hash":"2933f0247ac6d84c2954dd4946e359853abbf70a","modified":1498724079415},{"_id":"public/css/highlight/atelier-dune-dark.css","hash":"081d73e454db140cd41b2bb595be297cfcab25e0","modified":1498724079415},{"_id":"public/css/highlight/atelier-estuary-dark.css","hash":"a0c46a0f955e3864f5e967ea93f5e61519a17be8","modified":1498724079415},{"_id":"public/css/highlight/atelier-forest-dark.css","hash":"d8a4dc060b3fc719aa2f7d7b3f1019a3964b8101","modified":1498724079415},{"_id":"public/css/highlight/atelier-estuary-light.css","hash":"91ae4668c15a085ffce15ca21e93da445b5ecf3a","modified":1498724079415},{"_id":"public/css/highlight/arta.css","hash":"17b23b9fa57ef7a05a6aaeea9b5feb5442a8e584","modified":1498724079415},{"_id":"public/css/highlight/atelier-forest-light.css","hash":"8a78a4eea0f32d094d1f9e316d59e990ba739d97","modified":1498724079416},{"_id":"public/css/highlight/atelier-lakeside-dark.css","hash":"fa707b252d5d5caccc0589374522bed47b7ca100","modified":1498724079416},{"_id":"public/css/highlight/atelier-heath-light.css","hash":"172b98f783d213a20211ec6aca9a3840ba524f55","modified":1498724079416},{"_id":"public/css/highlight/atelier-heath-dark.css","hash":"b93c2241ff123e62d4edb3dfc20410e4d1da3e78","modified":1498724079416},{"_id":"public/css/highlight/atelier-plateau-dark.css","hash":"240f79f4e1fd63485c13900875b64c5a0d1bd06d","modified":1498724079416},{"_id":"public/css/highlight/atelier-plateau-light.css","hash":"9731db1052f23351c983210701edd3f5ceed343f","modified":1498724079416},{"_id":"public/css/highlight/atelier-lakeside-light.css","hash":"8ba595b9ba6e8be6dc029bf80caab38e85aed686","modified":1498724079416},{"_id":"public/css/highlight/atelier-seaside-dark.css","hash":"b2800804a21f729a3d0a16b3aadc17679fd0639c","modified":1498724079416},{"_id":"public/css/highlight/atelier-savanna-dark.css","hash":"09d45a218f87b8cb55b5ca7f4e9d76ea89a9404a","modified":1498724079416},{"_id":"public/css/highlight/atelier-sulphurpool-dark.css","hash":"1f006f8bd28e2ffbb73f708769605ba766787fff","modified":1498724079416},{"_id":"public/css/highlight/atelier-savanna-light.css","hash":"6bd3a62c32558476d436bd389500e5fbeb693d67","modified":1498724079416},{"_id":"public/css/highlight/atelier-seaside-light.css","hash":"3e6b9e2a3a5de455490b8224401f19702df4cde9","modified":1498724079416},{"_id":"public/css/highlight/atelier-sulphurpool-light.css","hash":"0319c3eea893601b79b6c57652ef49b9222cc9de","modified":1498724079416},{"_id":"public/css/highlight/atom-one-light.css","hash":"eda63d8cce440dbf3bb823e10577a134e9941deb","modified":1498724079416},{"_id":"public/css/highlight/brown-paper.css","hash":"a6817d890e58f80ce79d87620791dae821a70fff","modified":1498724079416},{"_id":"public/css/highlight/atom-one-dark.css","hash":"a6d28e1c04cee20cd874fc7ac0903d8e2e4bd54e","modified":1498724079416},{"_id":"public/css/highlight/codepen-embed.css","hash":"c4520e45d18259817b8942d17971f27c94f0fb09","modified":1498724079416},{"_id":"public/css/highlight/color-brewer.css","hash":"96332573db854e7b7411caa94ba29b238fede2d3","modified":1498724079416},{"_id":"public/css/highlight/dark.css","hash":"fc77519d4f5d731054c5d4b7e7bbdbb510833271","modified":1498724079416},{"_id":"public/css/highlight/darcula.css","hash":"7740224d07375ddc321147dffabbfa83e39f0d8b","modified":1498724079416},{"_id":"public/css/highlight/docco.css","hash":"1be7be09a1b927c22c7f11451becdb335145bdd2","modified":1498724079416},{"_id":"public/css/highlight/darkula.css","hash":"0be948bb84acc05f93a1e5e9b48fe34cf61673a0","modified":1498724079416},{"_id":"public/css/highlight/github-gist.css","hash":"77cf684fda415812d6279a52f299c84850244778","modified":1498724079416},{"_id":"public/css/highlight/dracula.css","hash":"2633f2e84680e9f381e9ac1df344b542e28f9774","modified":1498724079416},{"_id":"public/css/highlight/far.css","hash":"67e0658b2376e91e4894636a3522a30c2aec42de","modified":1498724079417},{"_id":"public/css/highlight/foundation.css","hash":"75b0674dd1ed35d61977bd5c35dc29ca35835a7b","modified":1498724079417},{"_id":"public/css/highlight/github.css","hash":"ee593952684a791317ee8b77ad096e729dec649e","modified":1498724079417},{"_id":"public/css/highlight/googlecode.css","hash":"fed3d439d0c305b337dd9c0f68dcbfa51429f445","modified":1498724079417},{"_id":"public/css/highlight/grayscale.css","hash":"5688658c28fc5799517e8f3c224ae3da3797ba44","modified":1498724079417},{"_id":"public/css/highlight/idea.css","hash":"164649ae1e7c891a0d88cca075521af28656e2a1","modified":1498724079417},{"_id":"public/css/highlight/hybrid.css","hash":"1e2d54598b5f948b597059909d4bd158b7df021f","modified":1498724079417},{"_id":"public/css/highlight/hopscotch.css","hash":"03e7b9ec74bbd375db8d476836aac3729a6c86e8","modified":1498724079417},{"_id":"public/css/highlight/ir-black.css","hash":"95aad65ba77183500ce0f7ad62a7535b647ee20c","modified":1498724079417},{"_id":"public/css/highlight/gruvbox-dark.css","hash":"aaf90d076e34bc44016462d70f83985e0e55c8dc","modified":1498724079417},{"_id":"public/css/highlight/gruvbox-light.css","hash":"084699ab0aa326fede86e38bf41ebe49edde3a90","modified":1498724079417},{"_id":"public/css/highlight/mono-blue.css","hash":"fd0f39cd4c93ccb8d0bb2f6a1f359522e15a89cb","modified":1498724079417},{"_id":"public/css/highlight/kimbie.dark.css","hash":"58ed061c204fbc09d221ee9135d66bad976e5fc3","modified":1498724079417},{"_id":"public/css/highlight/magula.css","hash":"ebc291f90e456abeeccb16937e7f51735733f4f7","modified":1498724079417},{"_id":"public/css/highlight/kimbie.light.css","hash":"b7aa9b1b21a25dfefcac7649a328962f84c47913","modified":1498724079418},{"_id":"public/css/highlight/monokai-sublime.css","hash":"e4f3df87cbfa634c86b489e9cc43acf44d415986","modified":1498724079418},{"_id":"public/css/highlight/monokai.css","hash":"f69df92e3ccdce28e6f811ec84f11698f2811198","modified":1498724079418},{"_id":"public/css/highlight/obsidian.css","hash":"6ed475813fe4886a58b236297862ff2f181e66f7","modified":1498724079418},{"_id":"public/css/highlight/paraiso-light.css","hash":"6eb3ab7a3337f9cad3a2e5fa6bf7dd83685228d8","modified":1498724079418},{"_id":"public/css/highlight/ocean.css","hash":"fce6858e1c5eb9d2857cb5b5d24069c5994cfc91","modified":1498724079418},{"_id":"public/css/highlight/pojoaque.css","hash":"4e1e6a431212f5043a550474a1acda63362cdd6f","modified":1498724079418},{"_id":"public/css/highlight/purebasic.css","hash":"ef74aa66da52bf7ff04ae4972b3e351372043057","modified":1498724079418},{"_id":"public/css/highlight/paraiso-dark.css","hash":"8f5445327ce3c83b62f6bf4c1a0d87fa6f036341","modified":1498724079418},{"_id":"public/css/highlight/qtcreator_dark.css","hash":"213a40d203c4986cdbcb1bdf7d0b9013b29041ba","modified":1498724079418},{"_id":"public/css/highlight/qtcreator_light.css","hash":"9a2a19ac2f6e6a7d5edd7fae67b7de4a3957e878","modified":1498724079418},{"_id":"public/css/highlight/railscasts.css","hash":"a6d2043478fae5915926914cbd96fe9b706d98a6","modified":1498724079418},{"_id":"public/css/highlight/rainbow.css","hash":"1b2d98ccdda36aa926d0e6d069b673fdacd2d33e","modified":1498724079418},{"_id":"public/css/highlight/solarized-dark.css","hash":"d02fc2dcbeec4b7af2cadec4bbbfc5b016aed4c7","modified":1498724079418},{"_id":"public/css/highlight/school-book.css","hash":"60fe3d8063b1acc4d52de02033095adb0a2b35a9","modified":1498724079418},{"_id":"public/css/highlight/solarized-light.css","hash":"6b70caf1e84d096b1bc6318d5dae78d69e5dd1d3","modified":1498724079418},{"_id":"public/css/highlight/solarized-white.css","hash":"e6d606e8e4b1fa3a363fb3ef0b2b8a2a40e3f7ed","modified":1498724079418},{"_id":"public/css/highlight/tomorrow-night-blue.css","hash":"cd257d7d6a37cd5a09419b5f5f9d34b6b282423f","modified":1498724079418},{"_id":"public/css/highlight/tomorrow-night-bright.css","hash":"04f0af30fdda5e5d6ebdeef5a860b6b7e49cfe89","modified":1498724079418},{"_id":"public/css/highlight/tomorrow-night.css","hash":"86264dd861d35a8b135f9fcb8ff2675e9fa69c16","modified":1498724079418},{"_id":"public/css/highlight/tomorrow-night-eighties.css","hash":"d82b84bcda0588105dbbc0e8e8ba5e62c208a061","modified":1498724079418},{"_id":"public/css/highlight/tomorrow.css","hash":"163593ad70770d0296c5e643fa62e58e63f1b340","modified":1498724079418},{"_id":"public/css/highlight/vs.css","hash":"2ac5e89ceb3d5a0e0fdab1ed6d9a411ec7d221aa","modified":1498724079418},{"_id":"public/css/highlight/xcode.css","hash":"65d775a7e11e238c91e0d3c7370547348c92d6b3","modified":1498724079418},{"_id":"public/css/highlight/sunburst.css","hash":"8309eab2e5b1765dbee81a626baacbdad869b76a","modified":1498724079419},{"_id":"public/css/highlight/xt256.css","hash":"bbe28ec69177699cb6300d777598adf6323f7861","modified":1498724079419},{"_id":"public/css/highlight/zenburn.css","hash":"933a3b196d01254dea5e6f48105ea15e210ae000","modified":1498724079419},{"_id":"public/js/gallery/main.min.js","hash":"c8ab39417f0d855bd28b3f6e040e93b245ba10f1","modified":1498724079419},{"_id":"public/js/gallery/util.min.js","hash":"21f9de56727e235a83d514d08a65c7ef1b09c9e9","modified":1498724079419},{"_id":"public/js/gallery/jquery.poptrox.min.js","hash":"ade2e2710565eebca01b68b9bfae4a4848d779aa","modified":1498724079419},{"_id":"public/js/gallery/skel.min.js","hash":"a337cc51a3fb9953d306b3879e2e7676dd27ce53","modified":1498724079419},{"_id":"public/css/gallery.min.css","hash":"c5333ca835aae49239d809130a7b281af745729e","modified":1498724079419},{"_id":"public/js/highlight.min.js","hash":"de8b5bc84ade7906ea2000deb3a9c29dd700ea05","modified":1498724079419},{"_id":"public/css/style.css","hash":"d37a4998c382a6ffda6365e7352ba6ccca39175b","modified":1498724079419},{"_id":"public/css/material.min.css","hash":"f3c8e6a9d94e6cad30c6628e1d732e6ee00d5fce","modified":1498724079419},{"_id":"public/css/style.min.css","hash":"ac6be209ae8814ccc9b9dad7b87c14d40e8ef303","modified":1498724079419},{"_id":"public/js/js.js","hash":"5c36b940f65bd43dbe9613cb1a7f730d93213021","modified":1498724079419},{"_id":"public/js/js.min.js","hash":"0653ac558249173228c656f0b51b08286c1da250","modified":1498724079419},{"_id":"public/js/jquery.min.js","hash":"00073d6597d2760b81387274a9ec56b9d5cb1552","modified":1498724079419},{"_id":"public/css/material.css","hash":"3c138cc7cf3d53c033471c6706b0d553b0b936bf","modified":1498724079419},{"_id":"public/fonts/MaterialIcons-Regular.eot","hash":"26fb8cecb5512223277b4d290a24492a0f09ede1","modified":1498724079419},{"_id":"public/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1498724079419},{"_id":"public/img/random/material-10.png","hash":"021dca8d2477dae8f456a0cdc2725502d3b45785","modified":1498724079420},{"_id":"public/img/random/material-12.png","hash":"ba0c8506af62f984da564e6e390f592475e51f2d","modified":1498724079420},{"_id":"public/img/random/material-9.png","hash":"bc4f1b42fd2d09a80ab5fef8c6066b5148db0749","modified":1498724079420},{"_id":"public/img/random/material-3.png","hash":"a7f86a309712b9bbb01a4b7b39b1ee429df9086a","modified":1498724079420},{"_id":"public/img/random/material-11.png","hash":"637d4513d1e7beeb1e5179fa404b4b6ea61ca3dd","modified":1498724079448},{"_id":"public/img/random/material-19.png","hash":"f0b5383ba5c7e91f711daaa6b3a520556b7ca14d","modified":1498724079448},{"_id":"public/img/random/material-8.png","hash":"cb700661e312a5527aaf229517705adb1c1cead2","modified":1498724079455},{"_id":"public/img/random/material-1.png","hash":"af4b0ad72ce30f3fd7f7435cd3267b9187335ffd","modified":1498724079473},{"_id":"public/img/random/material-2.png","hash":"c5fc2ec66660f48be0fb092a872d4058e9d9e68f","modified":1498724079473},{"_id":"public/fonts/fontawesome-webfont.svg","hash":"550ef5c1253c8376f2ead32b654eb58d3c106ca3","modified":1498724079481},{"_id":"public/fonts/Roboto-Black.ttf","hash":"0244e6497a51fb8a38ca7e6fe297b066e2e09af5","modified":1498724079535},{"_id":"public/fonts/Roboto-Bold.ttf","hash":"d1864343b543978bd491d40c80010cea50c1b7bf","modified":1498724079535},{"_id":"public/fonts/Roboto-Light.ttf","hash":"b9ea2eaf26ff8fdcb5aee3e0c2c7a6084ebb6aac","modified":1498724079535},{"_id":"public/fonts/Roboto-Medium.ttf","hash":"3965419aab480c184f66bc5e39c1719a373a4ef6","modified":1498724079536},{"_id":"public/fonts/Roboto-Thin.ttf","hash":"ed5101c3a800f35e925603a406e0c2dc5278b96c","modified":1498724079536},{"_id":"public/fonts/Roboto-Regular.ttf","hash":"06691e103d4d3ce1f1108d9b7d21254b714a41f8","modified":1498724079536},{"_id":"public/img/random/material-7.png","hash":"e4aa6d4e1b52f1c097f61b5205d5b71a412e1d80","modified":1498724079536},{"_id":"public/img/random/material-18.png","hash":"1d5bacea5d57cc3e652a7c697bcb4fbcb11e20dc","modified":1498724079538},{"_id":"public/img/random/material-5.png","hash":"e26c197b3a765bbdcc966e4fb368c8808e9d655d","modified":1498724079538},{"_id":"public/img/random/material-14.png","hash":"f6bd9ceca7deb32c45b02a5d89014c7ee4748833","modified":1498724079541},{"_id":"public/2017/06/29/nginx-regex-test-way/index.html","hash":"9fe406ef1183fa0d8b88b0247232d728f2f28c2b","modified":1498724148942}],"Category":[{"name":"elkstasck","_id":"cj4i5mbns0002vkdopsvpo0qc"},{"name":"","_id":"cj4i5mboe000ivkdou73mzl6d"},{"name":"nginx","_id":"cj4i5mboj000ovkdoamzztvx0"},{"name":"owncloud","_id":"cj4i5mbok000tvkdocfl29o58"},{"name":"","_id":"cj4i5mbon000wvkdovomnpuo7"}],"Data":[],"Page":[],"Post":[{"title":"elastalert","date":"2017-02-16T08:27:53.000Z","_content":"\nElastAlert(shell,python,java)\n\n<!-- more -->\n\n## \nElastAlert\n\n* Command\n* Email\n* JIRA\n* OpsGenie\n* SNS\n* HipChat\n* Slack\n* Telegram\n* Debug\n* Stomp\n\nEmail (),(QQ)PC\n\nCommand\n\n  [][]\n\n## ElastAlert Python \n\n### \n1. Elasticsearch 5.2.0\n2. ElastAlert 0.1.8\n\n### \n\nElastAlertEmail [ElastAlert Elasticsearch](https://anjia.ml/2017/02/14/elasticsearch-elastalert/)\n\n```bash\n$ cd ~/\n\n$ git clone https://github.com/Yelp/elastalert.git\n\n$ cd elastalert\n\n$ wget -P ~/elastalert/elastalert_modules/ https://raw.githubusercontent.com/anjia0532/elastalert-wechat-plugin/master/wechat_qiye_alert.py\n\n$ touch ~/elastalert/elastalert_modules/__init__.py\n\n$ cp  config.yaml.example config.yaml\n\n$ vi example_rules/example_frequency.yaml\n```\n```yaml\n# From example_rules/example_frequency.yaml\n#es_host: elasticsearch.example.com\n#es_port: 14900\nname: Example rule\n\ntype: frequency\n\nindex: logstash-*\n\nnum_events: 1\n\ntimeframe:\n    minutes: 1\n\nfilter:\n- term:\n    _type: \"test\"\n\n# (Required)\n# The alert is use when a match is found\nalert:\n- \"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"\n\n#->->->->CorpIDSecret\n#appid\ncorp_id: xx\n#Secret\nsecret: xx\n#->->id\n#id\nagent_id: xx\n#id\nparty_id: xx\n#\nuser_id: xx\n# id\ntag_id: xx\n```\n\n\n```bash\n$ python -m elastalert.elastalert --verbose --rule example_rules/example_frequency.yaml\n\n$ curl -X POST \"http://127.0.0.1:9200/logstash-2017.02.16/test\"  -d '{\n\"@timestamp\": \"2017-02-16T17:23:00.000+08:00\",\n\"field\": \"value\"\n}'\n\nINFO:elastalert:Starting up\nINFO:elastalert:Queried rule Example rule from 2017-02-16 17:16 CST to 2017-02-16 17:25 CST: 1 / 1 hits\n{u'errcode': 0, u'errmsg': u'ok'}\nINFO:elastalert: xxx\nINFO:elastalert:Ran Example rule from 2017-02-16 16:31 CST to 2017-02-16 17:25 CST: 1 query hits, 1 matches, 2 alerts sent\nINFO:elastalert:Sleeping for 57 seconds\n```\n\n![elastalert-wechat-plugin](https://ooo.0o0.ooo/2017/02/16/58a5712d54ddd.png)\n\n [pythonshell][python-shell-wechat]\n\n## ElastAlert Commandjava\n\n### \n1. [][weixin-qiye] \n2. [Git][git]\n3. [Java 1.8+][jdk]\n4. [Maven][maven]\n\n### \n\n [anjia0532/weixin-qiye-alert][weixin-qiye-alert]\n\n[python-shell-wechat]: http://www.cnblogs.com/caoguo/p/5668653.html\n[]: https://github.com/anjia0532/weixin-qiye-alert#\n[weixin-qiye]: https://qy.weixin.qq.com/\n[git]: https://git-scm.com/\n[jdk]: http://www.oracle.com/technetwork/java/javase/downloads/index.html\n[maven]: http://maven.apache.org/download.cgi\n[weixin-qiye-alert]: https://github.com/anjia0532/weixin-qiye-alert\n","source":"_posts/elastalert-wechat-plugin.md","raw":"---\ntitle: elastalert\ndate: 2017-02-16 16:27:53\ntags: [elk,elkstasck,ElastAlert]\ncategories: [elkstasck]\n---\n\nElastAlert(shell,python,java)\n\n<!-- more -->\n\n## \nElastAlert\n\n* Command\n* Email\n* JIRA\n* OpsGenie\n* SNS\n* HipChat\n* Slack\n* Telegram\n* Debug\n* Stomp\n\nEmail (),(QQ)PC\n\nCommand\n\n  [][]\n\n## ElastAlert Python \n\n### \n1. Elasticsearch 5.2.0\n2. ElastAlert 0.1.8\n\n### \n\nElastAlertEmail [ElastAlert Elasticsearch](https://anjia.ml/2017/02/14/elasticsearch-elastalert/)\n\n```bash\n$ cd ~/\n\n$ git clone https://github.com/Yelp/elastalert.git\n\n$ cd elastalert\n\n$ wget -P ~/elastalert/elastalert_modules/ https://raw.githubusercontent.com/anjia0532/elastalert-wechat-plugin/master/wechat_qiye_alert.py\n\n$ touch ~/elastalert/elastalert_modules/__init__.py\n\n$ cp  config.yaml.example config.yaml\n\n$ vi example_rules/example_frequency.yaml\n```\n```yaml\n# From example_rules/example_frequency.yaml\n#es_host: elasticsearch.example.com\n#es_port: 14900\nname: Example rule\n\ntype: frequency\n\nindex: logstash-*\n\nnum_events: 1\n\ntimeframe:\n    minutes: 1\n\nfilter:\n- term:\n    _type: \"test\"\n\n# (Required)\n# The alert is use when a match is found\nalert:\n- \"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"\n\n#->->->->CorpIDSecret\n#appid\ncorp_id: xx\n#Secret\nsecret: xx\n#->->id\n#id\nagent_id: xx\n#id\nparty_id: xx\n#\nuser_id: xx\n# id\ntag_id: xx\n```\n\n\n```bash\n$ python -m elastalert.elastalert --verbose --rule example_rules/example_frequency.yaml\n\n$ curl -X POST \"http://127.0.0.1:9200/logstash-2017.02.16/test\"  -d '{\n\"@timestamp\": \"2017-02-16T17:23:00.000+08:00\",\n\"field\": \"value\"\n}'\n\nINFO:elastalert:Starting up\nINFO:elastalert:Queried rule Example rule from 2017-02-16 17:16 CST to 2017-02-16 17:25 CST: 1 / 1 hits\n{u'errcode': 0, u'errmsg': u'ok'}\nINFO:elastalert: xxx\nINFO:elastalert:Ran Example rule from 2017-02-16 16:31 CST to 2017-02-16 17:25 CST: 1 query hits, 1 matches, 2 alerts sent\nINFO:elastalert:Sleeping for 57 seconds\n```\n\n![elastalert-wechat-plugin](https://ooo.0o0.ooo/2017/02/16/58a5712d54ddd.png)\n\n [pythonshell][python-shell-wechat]\n\n## ElastAlert Commandjava\n\n### \n1. [][weixin-qiye] \n2. [Git][git]\n3. [Java 1.8+][jdk]\n4. [Maven][maven]\n\n### \n\n [anjia0532/weixin-qiye-alert][weixin-qiye-alert]\n\n[python-shell-wechat]: http://www.cnblogs.com/caoguo/p/5668653.html\n[]: https://github.com/anjia0532/weixin-qiye-alert#\n[weixin-qiye]: https://qy.weixin.qq.com/\n[git]: https://git-scm.com/\n[jdk]: http://www.oracle.com/technetwork/java/javase/downloads/index.html\n[maven]: http://maven.apache.org/download.cgi\n[weixin-qiye-alert]: https://github.com/anjia0532/weixin-qiye-alert\n","slug":"elastalert-wechat-plugin","published":1,"updated":"2017-02-16T09:41:39.566Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbnf0000vkdo9gepnj9w","content":"<p>ElastAlert(shell,python,java)</p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ElastAlert</p>\n<ul>\n<li>Command</li>\n<li>Email</li>\n<li>JIRA</li>\n<li>OpsGenie</li>\n<li>SNS</li>\n<li>HipChat</li>\n<li>Slack</li>\n<li>Telegram</li>\n<li>Debug</li>\n<li>Stomp</li>\n</ul>\n<p>Email (),(QQ)PC</p>\n<p>Command</p>\n<p>  <a href=\"https://github.com/anjia0532/weixin-qiye-alert#\" target=\"_blank\" rel=\"external\"></a></p>\n<h2 id=\"ElastAlert-Python-\"><a href=\"#ElastAlert-Python-\" class=\"headerlink\" title=\"ElastAlert Python \"></a>ElastAlert Python </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>Elasticsearch 5.2.0</li>\n<li>ElastAlert 0.1.8</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ElastAlertEmail <a href=\"https://anjia.ml/2017/02/14/elasticsearch-elastalert/\">ElastAlert Elasticsearch</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">cd</span> ~/</div><div class=\"line\"></div><div class=\"line\">$ git <span class=\"built_in\">clone</span> https://github.com/Yelp/elastalert.git</div><div class=\"line\"></div><div class=\"line\">$ <span class=\"built_in\">cd</span> elastalert</div><div class=\"line\"></div><div class=\"line\">$ wget -P ~/elastalert/elastalert_modules/ https://raw.githubusercontent.com/anjia0532/elastalert-wechat-plugin/master/wechat_qiye_alert.py</div><div class=\"line\"></div><div class=\"line\">$ touch ~/elastalert/elastalert_modules/__init__.py</div><div class=\"line\"></div><div class=\"line\">$ cp  config.yaml.example config.yaml</div><div class=\"line\"></div><div class=\"line\">$ vi example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># From example_rules/example_frequency.yaml</span></div><div class=\"line\"><span class=\"comment\">#es_host: elasticsearch.example.com</span></div><div class=\"line\"><span class=\"comment\">#es_port: 14900</span></div><div class=\"line\"><span class=\"attr\">name:</span> Example rule</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">type:</span> frequency</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">index:</span> logstash-*</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">filter:</span></div><div class=\"line\"><span class=\"attr\">- term:</span></div><div class=\"line\"><span class=\"attr\">    _type:</span> <span class=\"string\">\"test\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;-&gt;-&gt;CorpIDSecret</span></div><div class=\"line\"><span class=\"comment\">#appid</span></div><div class=\"line\"><span class=\"attr\">corp_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#Secret</span></div><div class=\"line\"><span class=\"attr\">secret:</span> xx</div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;id</span></div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">agent_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">party_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">user_id:</span> xx</div><div class=\"line\"><span class=\"comment\"># id</span></div><div class=\"line\"><span class=\"attr\">tag_id:</span> xx</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ python -m elastalert.elastalert --verbose --rule example_rules/example_frequency.yaml</div><div class=\"line\"></div><div class=\"line\">$ curl -X POST <span class=\"string\">\"http://127.0.0.1:9200/logstash-2017.02.16/test\"</span>  <span class=\"_\">-d</span> <span class=\"string\">'&#123;</span></div><div class=\"line\">\"@timestamp\": \"2017-02-16T17:23:00.000+08:00\",</div><div class=\"line\">\"field\": \"value\"</div><div class=\"line\">&#125;'</div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Starting up</div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-16 17:16 CST to 2017-02-16 17:25 CST: 1 / 1 hits</div><div class=\"line\">&#123;u<span class=\"string\">'errcode'</span>: 0, u<span class=\"string\">'errmsg'</span>: u<span class=\"string\">'ok'</span>&#125;</div><div class=\"line\">INFO:elastalert: xxx</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-16 16:31 CST to 2017-02-16 17:25 CST: 1 query hits, 1 matches, 2 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 57 seconds</div></pre></td></tr></table></figure>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/16/58a5712d54ddd.png\" alt=\"elastalert-wechat-plugin\"></p>\n<p> <a href=\"http://www.cnblogs.com/caoguo/p/5668653.html\" target=\"_blank\" rel=\"external\">pythonshell</a></p>\n<h2 id=\"ElastAlert-Commandjava\"><a href=\"#ElastAlert-Commandjava\" class=\"headerlink\" title=\"ElastAlert Commandjava\"></a>ElastAlert Commandjava</h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><a href=\"https://qy.weixin.qq.com/\" target=\"_blank\" rel=\"external\"></a> </li>\n<li><a href=\"https://git-scm.com/\" target=\"_blank\" rel=\"external\">Git</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" target=\"_blank\" rel=\"external\">Java 1.8+</a></li>\n<li><a href=\"http://maven.apache.org/download.cgi\" target=\"_blank\" rel=\"external\">Maven</a></li>\n</ol>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://github.com/anjia0532/weixin-qiye-alert\" target=\"_blank\" rel=\"external\">anjia0532/weixin-qiye-alert</a></p>\n","excerpt":"<p>ElastAlert(shell,python,java)</p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>ElastAlert</p>\n<ul>\n<li>Command</li>\n<li>Email</li>\n<li>JIRA</li>\n<li>OpsGenie</li>\n<li>SNS</li>\n<li>HipChat</li>\n<li>Slack</li>\n<li>Telegram</li>\n<li>Debug</li>\n<li>Stomp</li>\n</ul>\n<p>Email (),(QQ)PC</p>\n<p>Command</p>\n<p>  <a href=\"https://github.com/anjia0532/weixin-qiye-alert#\"></a></p>\n<h2 id=\"ElastAlert-Python-\"><a href=\"#ElastAlert-Python-\" class=\"headerlink\" title=\"ElastAlert Python \"></a>ElastAlert Python </h2><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li>Elasticsearch 5.2.0</li>\n<li>ElastAlert 0.1.8</li>\n</ol>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>ElastAlertEmail <a href=\"https://anjia.ml/2017/02/14/elasticsearch-elastalert/\">ElastAlert Elasticsearch</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">cd</span> ~/</div><div class=\"line\"></div><div class=\"line\">$ git <span class=\"built_in\">clone</span> https://github.com/Yelp/elastalert.git</div><div class=\"line\"></div><div class=\"line\">$ <span class=\"built_in\">cd</span> elastalert</div><div class=\"line\"></div><div class=\"line\">$ wget -P ~/elastalert/elastalert_modules/ https://raw.githubusercontent.com/anjia0532/elastalert-wechat-plugin/master/wechat_qiye_alert.py</div><div class=\"line\"></div><div class=\"line\">$ touch ~/elastalert/elastalert_modules/__init__.py</div><div class=\"line\"></div><div class=\"line\">$ cp  config.yaml.example config.yaml</div><div class=\"line\"></div><div class=\"line\">$ vi example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># From example_rules/example_frequency.yaml</span></div><div class=\"line\"><span class=\"comment\">#es_host: elasticsearch.example.com</span></div><div class=\"line\"><span class=\"comment\">#es_port: 14900</span></div><div class=\"line\"><span class=\"attr\">name:</span> Example rule</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">type:</span> frequency</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">index:</span> logstash-*</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">filter:</span></div><div class=\"line\"><span class=\"attr\">- term:</span></div><div class=\"line\"><span class=\"attr\">    _type:</span> <span class=\"string\">\"test\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;-&gt;-&gt;CorpIDSecret</span></div><div class=\"line\"><span class=\"comment\">#appid</span></div><div class=\"line\"><span class=\"attr\">corp_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#Secret</span></div><div class=\"line\"><span class=\"attr\">secret:</span> xx</div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;id</span></div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">agent_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">party_id:</span> xx</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">user_id:</span> xx</div><div class=\"line\"><span class=\"comment\"># id</span></div><div class=\"line\"><span class=\"attr\">tag_id:</span> xx</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ python -m elastalert.elastalert --verbose --rule example_rules/example_frequency.yaml</div><div class=\"line\"></div><div class=\"line\">$ curl -X POST <span class=\"string\">\"http://127.0.0.1:9200/logstash-2017.02.16/test\"</span>  <span class=\"_\">-d</span> <span class=\"string\">'&#123;</div><div class=\"line\">\"@timestamp\": \"2017-02-16T17:23:00.000+08:00\",</div><div class=\"line\">\"field\": \"value\"</div><div class=\"line\">&#125;'</span></div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Starting up</div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-16 17:16 CST to 2017-02-16 17:25 CST: 1 / 1 hits</div><div class=\"line\">&#123;u<span class=\"string\">'errcode'</span>: 0, u<span class=\"string\">'errmsg'</span>: u<span class=\"string\">'ok'</span>&#125;</div><div class=\"line\">INFO:elastalert: xxx</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-16 16:31 CST to 2017-02-16 17:25 CST: 1 query hits, 1 matches, 2 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 57 seconds</div></pre></td></tr></table></figure>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/16/58a5712d54ddd.png\" alt=\"elastalert-wechat-plugin\"></p>\n<p> <a href=\"http://www.cnblogs.com/caoguo/p/5668653.html\">pythonshell</a></p>\n<h2 id=\"ElastAlert-Commandjava\"><a href=\"#ElastAlert-Commandjava\" class=\"headerlink\" title=\"ElastAlert Commandjava\"></a>ElastAlert Commandjava</h2><h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><ol>\n<li><a href=\"https://qy.weixin.qq.com/\"></a> </li>\n<li><a href=\"https://git-scm.com/\">Git</a></li>\n<li><a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">Java 1.8+</a></li>\n<li><a href=\"http://maven.apache.org/download.cgi\">Maven</a></li>\n</ol>\n<h3 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://github.com/anjia0532/weixin-qiye-alert\">anjia0532/weixin-qiye-alert</a></p>"},{"title":"elasticsearch","date":"2017-04-06T06:10:47.000Z","_content":"\nelkstacknginxlog(Index)\n\n<!-- more -->\n\n### _delete_by_query\n[--Delete By Query API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html)\n\n```bash\ncurl -u :  -H'Content-Type:application/json' -d'{\n    \"query\": {\n        \"range\": {\n            \"@timestamp\": {\n                \"lt\": \"now-7d\",\n                \"format\": \"epoch_millis\"\n            }\n        }\n    }\n}\n' -XPOST \"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"\n```\n\n****\n\n`-u``userName:password``Basic Auth``elasticsearch``x-pack``-u`\n\n`-H`json\n\n`-XPOST``POST`\n\n`-d``body`\n\n```javascript\n{\n    \"query\": {\n        \"range\": { //\n            \"@timestamp\": {//\n                \"lt\": \"now-7d\",//lt(<)lte(<=),gt(>),gte(>=),now-7d7\n                \"format\": \"epoch_millis\"\n            }\n        }\n    }\n}\n```\n\n\n```bash\n$ crontab -e\n\n* 0 * * * /usr/bin/curl -u username:password  -H'Content-Type:application/json' -d'{\"query\":{\"range\":{\"@timestamp\":{\"lt\":\"now-7d\",\"format\":\"epoch_millis\"}}}}' -XPOST \"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\" > /tmp/elk_clean.txt\n```\n\n07\n\n\n\n- \n\n- \n\n- `*`\n\n\n- \n\n### sh\nstackoverflow [Removing old indices in elasticsearch#answer-39746705](http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-39746705)\n```bash\n#!/bin/bash\nsearchIndex=logstash-monitor\nelastic_url=logging.core.k94.kvk.nl\nelastic_port=9200\n\ndate2stamp () {\n    date --utc --date \"$1\" +%s\n}\n\ndateDiff (){\n    case $1 in\n        -s)   sec=1;      shift;;\n        -m)   sec=60;     shift;;\n        -h)   sec=3600;   shift;;\n        -d)   sec=86400;  shift;;\n        *)    sec=86400;;\n    esac\n    dte1=$(date2stamp $1)\n    dte2=$(date2stamp $2)\n    diffSec=$((dte2-dte1))\n    if ((diffSec < 0)); then abs=-1; else abs=1; fi\n    echo $((diffSec/sec*abs))\n}\n\nfor index in $(curl -s \"${elastic_url}:${elastic_port}/_cat/indices?v\" |     grep -E \" ${searchIndex}-20[0-9][0-9]\\.[0-1][0-9]\\.[0-3][0-9]\" | awk '{     print $3 }'); do\n  date=$(echo ${index: -10} | sed 's/\\./-/g')\n  cond=$(date +%Y-%m-%d)\n  diff=$(dateDiff -d $date $cond)\n  echo -n \"${index} (${diff})\"\n  if [ $diff -gt 1 ]; then\n    echo \" / DELETE\"\n    # curl -XDELETE \"${elastic_url}:${elastic_port}/${index}?pretty\"\n  else\n    echo \"\"\n  fi\ndone    \n```\n `_cat/indices`api\n\n###  curator\n\nwindows[zip](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-zip.html),[msi](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-msi.html),linux[apt](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/apt-repository.html),[yum](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/yum-repository.html)\n\n[Curator Reference](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/index.html) [github-curator](https://github.com/elastic/curator)\n\n#### \n[](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/installation.html)\n\n#### \n\n http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400\n\n1.config\n\n```yaml\n---\n# Remember, leave a key empty if there is no value.  None will be a string,\n# not a Python \"NoneType\"\nclient:\n  hosts:\n    * 127.0.0.1\n  port: 9200\n  url_prefix:\n  use_ssl: False\n  certificate:\n  client_cert:\n  client_key:\n  ssl_no_validate: False\n  http_auth: username:password\n  timeout:\n  master_only: True\n\nlogging:\n  loglevel: INFO\n  logfile:\n  logformat: default\n  #blacklist: ['elasticsearch', 'urllib3']\n```\n\n2.action\n\n```yaml\n---\nactions:\n  1:\n    action: delete_indices\n    description: >-\n      Delete indices older than 7 days (based on index name), for logstash-\n      prefixed indices. Ignore the error if the filter does not result in an\n      actionable list of indices (ignore_empty_list) and exit cleanly.\n    options:\n      ignore_empty_list: True\n      timeout_override:\n      continue_if_exception: False\n      disable_action: False\n    filters:\n    * filtertype: pattern\n      kind: prefix\n      value: logstash-\n      exclude:\n    * filtertype: age\n      source: name\n      direction: older\n      timestring: '%Y.%m.%d'\n      unit: days\n      unit_count: 7\n      exclude:\n```\n\n`index-'%Y.%m.%d'``source: creation_date`  https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date\n\n3.\n\n```\ncurator --config /path/config_file.yml /path/action_file.yml\n```\n\n`crontab -e`","source":"_posts/elasticsearch-delete-indices-by-date.md","raw":"---\ntitle: elasticsearch\ndate: 2017-04-06 14:10:47\ntags: [elk,elkstasck,curator]\ncategories: [elkstasck]\n---\n\nelkstacknginxlog(Index)\n\n<!-- more -->\n\n### _delete_by_query\n[--Delete By Query API](https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html)\n\n```bash\ncurl -u :  -H'Content-Type:application/json' -d'{\n    \"query\": {\n        \"range\": {\n            \"@timestamp\": {\n                \"lt\": \"now-7d\",\n                \"format\": \"epoch_millis\"\n            }\n        }\n    }\n}\n' -XPOST \"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"\n```\n\n****\n\n`-u``userName:password``Basic Auth``elasticsearch``x-pack``-u`\n\n`-H`json\n\n`-XPOST``POST`\n\n`-d``body`\n\n```javascript\n{\n    \"query\": {\n        \"range\": { //\n            \"@timestamp\": {//\n                \"lt\": \"now-7d\",//lt(<)lte(<=),gt(>),gte(>=),now-7d7\n                \"format\": \"epoch_millis\"\n            }\n        }\n    }\n}\n```\n\n\n```bash\n$ crontab -e\n\n* 0 * * * /usr/bin/curl -u username:password  -H'Content-Type:application/json' -d'{\"query\":{\"range\":{\"@timestamp\":{\"lt\":\"now-7d\",\"format\":\"epoch_millis\"}}}}' -XPOST \"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\" > /tmp/elk_clean.txt\n```\n\n07\n\n\n\n- \n\n- \n\n- `*`\n\n\n- \n\n### sh\nstackoverflow [Removing old indices in elasticsearch#answer-39746705](http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-39746705)\n```bash\n#!/bin/bash\nsearchIndex=logstash-monitor\nelastic_url=logging.core.k94.kvk.nl\nelastic_port=9200\n\ndate2stamp () {\n    date --utc --date \"$1\" +%s\n}\n\ndateDiff (){\n    case $1 in\n        -s)   sec=1;      shift;;\n        -m)   sec=60;     shift;;\n        -h)   sec=3600;   shift;;\n        -d)   sec=86400;  shift;;\n        *)    sec=86400;;\n    esac\n    dte1=$(date2stamp $1)\n    dte2=$(date2stamp $2)\n    diffSec=$((dte2-dte1))\n    if ((diffSec < 0)); then abs=-1; else abs=1; fi\n    echo $((diffSec/sec*abs))\n}\n\nfor index in $(curl -s \"${elastic_url}:${elastic_port}/_cat/indices?v\" |     grep -E \" ${searchIndex}-20[0-9][0-9]\\.[0-1][0-9]\\.[0-3][0-9]\" | awk '{     print $3 }'); do\n  date=$(echo ${index: -10} | sed 's/\\./-/g')\n  cond=$(date +%Y-%m-%d)\n  diff=$(dateDiff -d $date $cond)\n  echo -n \"${index} (${diff})\"\n  if [ $diff -gt 1 ]; then\n    echo \" / DELETE\"\n    # curl -XDELETE \"${elastic_url}:${elastic_port}/${index}?pretty\"\n  else\n    echo \"\"\n  fi\ndone    \n```\n `_cat/indices`api\n\n###  curator\n\nwindows[zip](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-zip.html),[msi](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-msi.html),linux[apt](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/apt-repository.html),[yum](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/yum-repository.html)\n\n[Curator Reference](https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/index.html) [github-curator](https://github.com/elastic/curator)\n\n#### \n[](https://www.elastic.co/guide/en/elasticsearch/client/curator/current/installation.html)\n\n#### \n\n http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400\n\n1.config\n\n```yaml\n---\n# Remember, leave a key empty if there is no value.  None will be a string,\n# not a Python \"NoneType\"\nclient:\n  hosts:\n    * 127.0.0.1\n  port: 9200\n  url_prefix:\n  use_ssl: False\n  certificate:\n  client_cert:\n  client_key:\n  ssl_no_validate: False\n  http_auth: username:password\n  timeout:\n  master_only: True\n\nlogging:\n  loglevel: INFO\n  logfile:\n  logformat: default\n  #blacklist: ['elasticsearch', 'urllib3']\n```\n\n2.action\n\n```yaml\n---\nactions:\n  1:\n    action: delete_indices\n    description: >-\n      Delete indices older than 7 days (based on index name), for logstash-\n      prefixed indices. Ignore the error if the filter does not result in an\n      actionable list of indices (ignore_empty_list) and exit cleanly.\n    options:\n      ignore_empty_list: True\n      timeout_override:\n      continue_if_exception: False\n      disable_action: False\n    filters:\n    * filtertype: pattern\n      kind: prefix\n      value: logstash-\n      exclude:\n    * filtertype: age\n      source: name\n      direction: older\n      timestring: '%Y.%m.%d'\n      unit: days\n      unit_count: 7\n      exclude:\n```\n\n`index-'%Y.%m.%d'``source: creation_date`  https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date\n\n3.\n\n```\ncurator --config /path/config_file.yml /path/action_file.yml\n```\n\n`crontab -e`","slug":"elasticsearch-delete-indices-by-date","published":1,"updated":"2017-04-06T06:13:37.067Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbnm0001vkdoicfiri7p","content":"<p>elkstacknginxlog(Index)</p>\n<a id=\"more\"></a>\n<h3 id=\"-delete-by-query\"><a href=\"#-delete-by-query\" class=\"headerlink\" title=\"_delete_by_query\"></a>_delete_by_query</h3><p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html\" target=\"_blank\" rel=\"external\">Delete By Query API</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -u :  -H<span class=\"string\">'Content-Type:application/json'</span> <span class=\"_\">-d</span><span class=\"string\">'&#123;</span></div><div class=\"line\">    \"query\": &#123;</div><div class=\"line\">        \"range\": &#123;</div><div class=\"line\">            \"@timestamp\": &#123;</div><div class=\"line\">                \"lt\": \"now-7d\",</div><div class=\"line\">                \"format\": \"epoch_millis\"</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">' -XPOST <span class=\"string\">\"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"</span></div></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<p><code>-u</code><code>userName:password</code><code>Basic Auth</code><code>elasticsearch</code><code>x-pack</code><code>-u</code></p>\n<p><code>-H</code>json</p>\n<p><code>-XPOST</code><code>POST</code></p>\n<p><code>-d</code><code>body</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"query\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"range\"</span>: &#123; <span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"string\">\"@timestamp\"</span>: &#123;<span class=\"comment\">//</span></div><div class=\"line\">                <span class=\"string\">\"lt\"</span>: <span class=\"string\">\"now-7d\"</span>,<span class=\"comment\">//lt(&lt;)lte(&lt;=),gt(&gt;),gte(&gt;=),now-7d7</span></div><div class=\"line\">                <span class=\"string\">\"format\"</span>: <span class=\"string\">\"epoch_millis\"</span></div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ crontab <span class=\"_\">-e</span></div><div class=\"line\"></div><div class=\"line\">* 0 * * * /usr/bin/curl -u username:password  -H<span class=\"string\">'Content-Type:application/json'</span> <span class=\"_\">-d</span><span class=\"string\">'&#123;\"query\":&#123;\"range\":&#123;\"@timestamp\":&#123;\"lt\":\"now-7d\",\"format\":\"epoch_millis\"&#125;&#125;&#125;&#125;'</span> -XPOST <span class=\"string\">\"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"</span> &gt; /tmp/elk_clean.txt</div></pre></td></tr></table></figure></p>\n<p>07</p>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code>*</code></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<h3 id=\"sh\"><a href=\"#sh\" class=\"headerlink\" title=\"sh\"></a>sh</h3><p>stackoverflow <a href=\"http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-39746705\" target=\"_blank\" rel=\"external\">Removing old indices in elasticsearch#answer-39746705</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\">searchIndex=logstash-monitor</div><div class=\"line\">elastic_url=logging.core.k94.kvk.nl</div><div class=\"line\">elastic_port=9200</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">date2stamp</span></span> () &#123;</div><div class=\"line\">    date --utc --date <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> +%s</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">dateDiff</span></span> ()&#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"variable\">$1</span> <span class=\"keyword\">in</span></div><div class=\"line\">        <span class=\"_\">-s</span>)   sec=1;      <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        -m)   sec=60;     <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        -h)   sec=3600;   <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        <span class=\"_\">-d</span>)   sec=86400;  <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        *)    sec=86400;;</div><div class=\"line\">    <span class=\"keyword\">esac</span></div><div class=\"line\">    dte1=$(date2stamp <span class=\"variable\">$1</span>)</div><div class=\"line\">    dte2=$(date2stamp <span class=\"variable\">$2</span>)</div><div class=\"line\">    diffSec=$((dte2-dte1))</div><div class=\"line\">    <span class=\"keyword\">if</span> ((diffSec &lt; 0)); <span class=\"keyword\">then</span> abs=-1; <span class=\"keyword\">else</span> abs=1; <span class=\"keyword\">fi</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> $((diffSec/sec*abs))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> $(curl <span class=\"_\">-s</span> <span class=\"string\">\"<span class=\"variable\">$&#123;elastic_url&#125;</span>:<span class=\"variable\">$&#123;elastic_port&#125;</span>/_cat/indices?v\"</span> |     grep -E <span class=\"string\">\" <span class=\"variable\">$&#123;searchIndex&#125;</span>-20[0-9][0-9]\\.[0-1][0-9]\\.[0-3][0-9]\"</span> | awk <span class=\"string\">'&#123;     print $3 &#125;'</span>); <span class=\"keyword\">do</span></div><div class=\"line\">  date=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$&#123;index: -10&#125;</span> | sed <span class=\"string\">'s/\\./-/g'</span>)</div><div class=\"line\">  cond=$(date +%Y-%m-%d)</div><div class=\"line\">  diff=$(dateDiff <span class=\"_\">-d</span> <span class=\"variable\">$date</span> <span class=\"variable\">$cond</span>)</div><div class=\"line\">  <span class=\"built_in\">echo</span> -n <span class=\"string\">\"<span class=\"variable\">$&#123;index&#125;</span> (<span class=\"variable\">$&#123;diff&#125;</span>)\"</span></div><div class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$diff</span> <span class=\"_\">-gt</span> 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\" / DELETE\"</span></div><div class=\"line\">    <span class=\"comment\"># curl -XDELETE \"$&#123;elastic_url&#125;:$&#123;elastic_port&#125;/$&#123;index&#125;?pretty\"</span></div><div class=\"line\">  <span class=\"keyword\">else</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\">  <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure></p>\n<p> <code>_cat/indices</code>api</p>\n<h3 id=\"-curator\"><a href=\"#-curator\" class=\"headerlink\" title=\" curator\"></a> curator</h3><p>windows<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-zip.html\" target=\"_blank\" rel=\"external\">zip</a>,<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-msi.html\" target=\"_blank\" rel=\"external\">msi</a>,linux<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/apt-repository.html\" target=\"_blank\" rel=\"external\">apt</a>,<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/yum-repository.html\" target=\"_blank\" rel=\"external\">yum</a></p>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/index.html\" target=\"_blank\" rel=\"external\">Curator Reference</a> <a href=\"https://github.com/elastic/curator\" target=\"_blank\" rel=\"external\">github-curator</a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/current/installation.html\" target=\"_blank\" rel=\"external\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400\" target=\"_blank\" rel=\"external\">http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400</a></p>\n<p>1.config</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"comment\"># Remember, leave a key empty if there is no value.  None will be a string,</span></div><div class=\"line\"><span class=\"comment\"># not a Python \"NoneType\"</span></div><div class=\"line\"><span class=\"attr\">client:</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span></div><div class=\"line\">    * <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\"><span class=\"attr\">  port:</span> <span class=\"number\">9200</span></div><div class=\"line\"><span class=\"attr\">  url_prefix:</span></div><div class=\"line\"><span class=\"attr\">  use_ssl:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">  certificate:</span></div><div class=\"line\"><span class=\"attr\">  client_cert:</span></div><div class=\"line\"><span class=\"attr\">  client_key:</span></div><div class=\"line\"><span class=\"attr\">  ssl_no_validate:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">  http_auth:</span> username:password</div><div class=\"line\"><span class=\"attr\">  timeout:</span></div><div class=\"line\"><span class=\"attr\">  master_only:</span> <span class=\"literal\">True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">logging:</span></div><div class=\"line\"><span class=\"attr\">  loglevel:</span> INFO</div><div class=\"line\"><span class=\"attr\">  logfile:</span></div><div class=\"line\"><span class=\"attr\">  logformat:</span> default</div><div class=\"line\">  <span class=\"comment\">#blacklist: ['elasticsearch', 'urllib3']</span></div></pre></td></tr></table></figure>\n<p>2.action</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">actions:</span></div><div class=\"line\">  <span class=\"number\">1</span>:</div><div class=\"line\"><span class=\"attr\">    action:</span> delete_indices</div><div class=\"line\"><span class=\"attr\">    description:</span> &gt;-</div><div class=\"line\">      Delete indices older than <span class=\"number\">7</span> days (based on index name), for logstash-</div><div class=\"line\">      prefixed indices. Ignore the error if the filter does not result in an</div><div class=\"line\">      actionable list of indices (ignore_empty_list) and exit cleanly.</div><div class=\"line\"><span class=\"attr\">    options:</span></div><div class=\"line\"><span class=\"attr\">      ignore_empty_list:</span> <span class=\"literal\">True</span></div><div class=\"line\"><span class=\"attr\">      timeout_override:</span></div><div class=\"line\"><span class=\"attr\">      continue_if_exception:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">      disable_action:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">    filters:</span></div><div class=\"line\">    * filtertype: pattern</div><div class=\"line\"><span class=\"attr\">      kind:</span> prefix</div><div class=\"line\"><span class=\"attr\">      value:</span> logstash-</div><div class=\"line\"><span class=\"attr\">      exclude:</span></div><div class=\"line\">    * filtertype: age</div><div class=\"line\"><span class=\"attr\">      source:</span> name</div><div class=\"line\"><span class=\"attr\">      direction:</span> older</div><div class=\"line\"><span class=\"attr\">      timestring:</span> <span class=\"string\">'%Y.%m.%d'</span></div><div class=\"line\"><span class=\"attr\">      unit:</span> days</div><div class=\"line\"><span class=\"attr\">      unit_count:</span> <span class=\"number\">7</span></div><div class=\"line\"><span class=\"attr\">      exclude:</span></div></pre></td></tr></table></figure>\n<p><code>index-&#39;%Y.%m.%d&#39;</code><code>source: creation_date</code>  <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date\" target=\"_blank\" rel=\"external\">https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date</a></p>\n<p>3.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">curator --config /path/config_file.yml /path/action_file.yml</div></pre></td></tr></table></figure>\n<p><code>crontab -e</code></p>\n","excerpt":"<p>elkstacknginxlog(Index)</p>","more":"<h3 id=\"-delete-by-query\"><a href=\"#-delete-by-query\" class=\"headerlink\" title=\"_delete_by_query\"></a>_delete_by_query</h3><p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-delete-by-query.html\">Delete By Query API</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -u :  -H<span class=\"string\">'Content-Type:application/json'</span> <span class=\"_\">-d</span><span class=\"string\">'&#123;</div><div class=\"line\">    \"query\": &#123;</div><div class=\"line\">        \"range\": &#123;</div><div class=\"line\">            \"@timestamp\": &#123;</div><div class=\"line\">                \"lt\": \"now-7d\",</div><div class=\"line\">                \"format\": \"epoch_millis\"</div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div><div class=\"line\">'</span> -XPOST <span class=\"string\">\"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"</span></div></pre></td></tr></table></figure>\n<p><strong></strong></p>\n<p><code>-u</code><code>userName:password</code><code>Basic Auth</code><code>elasticsearch</code><code>x-pack</code><code>-u</code></p>\n<p><code>-H</code>json</p>\n<p><code>-XPOST</code><code>POST</code></p>\n<p><code>-d</code><code>body</code></p>\n<figure class=\"highlight javascript\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;</div><div class=\"line\">    <span class=\"string\">\"query\"</span>: &#123;</div><div class=\"line\">        <span class=\"string\">\"range\"</span>: &#123; <span class=\"comment\">//</span></div><div class=\"line\">            <span class=\"string\">\"@timestamp\"</span>: &#123;<span class=\"comment\">//</span></div><div class=\"line\">                <span class=\"string\">\"lt\"</span>: <span class=\"string\">\"now-7d\"</span>,<span class=\"comment\">//lt(&lt;)lte(&lt;=),gt(&gt;),gte(&gt;=),now-7d7</span></div><div class=\"line\">                <span class=\"string\">\"format\"</span>: <span class=\"string\">\"epoch_millis\"</span></div><div class=\"line\">            &#125;</div><div class=\"line\">        &#125;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ crontab <span class=\"_\">-e</span></div><div class=\"line\"></div><div class=\"line\">* 0 * * * /usr/bin/curl -u username:password  -H<span class=\"string\">'Content-Type:application/json'</span> <span class=\"_\">-d</span><span class=\"string\">'&#123;\"query\":&#123;\"range\":&#123;\"@timestamp\":&#123;\"lt\":\"now-7d\",\"format\":\"epoch_millis\"&#125;&#125;&#125;&#125;'</span> -XPOST <span class=\"string\">\"http://127.0.0.1:9200/*-*/_delete_by_query?pretty\"</span> &gt; /tmp/elk_clean.txt</div></pre></td></tr></table></figure></p>\n<p>07</p>\n<p></p>\n<ul>\n<li><p></p>\n</li>\n<li><p></p>\n</li>\n<li><p><code>*</code></p>\n</li>\n</ul>\n<p></p>\n<ul>\n<li></li>\n</ul>\n<h3 id=\"sh\"><a href=\"#sh\" class=\"headerlink\" title=\"sh\"></a>sh</h3><p>stackoverflow <a href=\"http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-39746705\">Removing old indices in elasticsearch#answer-39746705</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">#!/bin/bash</span></div><div class=\"line\">searchIndex=logstash-monitor</div><div class=\"line\">elastic_url=logging.core.k94.kvk.nl</div><div class=\"line\">elastic_port=9200</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">date2stamp</span></span> () &#123;</div><div class=\"line\">    date --utc --date <span class=\"string\">\"<span class=\"variable\">$1</span>\"</span> +%s</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"function\"><span class=\"title\">dateDiff</span></span> ()&#123;</div><div class=\"line\">    <span class=\"keyword\">case</span> <span class=\"variable\">$1</span> <span class=\"keyword\">in</span></div><div class=\"line\">        <span class=\"_\">-s</span>)   sec=1;      <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        -m)   sec=60;     <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        -h)   sec=3600;   <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        <span class=\"_\">-d</span>)   sec=86400;  <span class=\"built_in\">shift</span>;;</div><div class=\"line\">        *)    sec=86400;;</div><div class=\"line\">    <span class=\"keyword\">esac</span></div><div class=\"line\">    dte1=$(date2stamp <span class=\"variable\">$1</span>)</div><div class=\"line\">    dte2=$(date2stamp <span class=\"variable\">$2</span>)</div><div class=\"line\">    diffSec=$((dte2-dte1))</div><div class=\"line\">    <span class=\"keyword\">if</span> ((diffSec &lt; 0)); <span class=\"keyword\">then</span> abs=-1; <span class=\"keyword\">else</span> abs=1; <span class=\"keyword\">fi</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> $((diffSec/sec*abs))</div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">for</span> index <span class=\"keyword\">in</span> $(curl <span class=\"_\">-s</span> <span class=\"string\">\"<span class=\"variable\">$&#123;elastic_url&#125;</span>:<span class=\"variable\">$&#123;elastic_port&#125;</span>/_cat/indices?v\"</span> |     grep -E <span class=\"string\">\" <span class=\"variable\">$&#123;searchIndex&#125;</span>-20[0-9][0-9]\\.[0-1][0-9]\\.[0-3][0-9]\"</span> | awk <span class=\"string\">'&#123;     print $3 &#125;'</span>); <span class=\"keyword\">do</span></div><div class=\"line\">  date=$(<span class=\"built_in\">echo</span> <span class=\"variable\">$&#123;index: -10&#125;</span> | sed <span class=\"string\">'s/\\./-/g'</span>)</div><div class=\"line\">  cond=$(date +%Y-%m-%d)</div><div class=\"line\">  diff=$(dateDiff <span class=\"_\">-d</span> <span class=\"variable\">$date</span> <span class=\"variable\">$cond</span>)</div><div class=\"line\">  <span class=\"built_in\">echo</span> -n <span class=\"string\">\"<span class=\"variable\">$&#123;index&#125;</span> (<span class=\"variable\">$&#123;diff&#125;</span>)\"</span></div><div class=\"line\">  <span class=\"keyword\">if</span> [ <span class=\"variable\">$diff</span> <span class=\"_\">-gt</span> 1 ]; <span class=\"keyword\">then</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\" / DELETE\"</span></div><div class=\"line\">    <span class=\"comment\"># curl -XDELETE \"$&#123;elastic_url&#125;:$&#123;elastic_port&#125;/$&#123;index&#125;?pretty\"</span></div><div class=\"line\">  <span class=\"keyword\">else</span></div><div class=\"line\">    <span class=\"built_in\">echo</span> <span class=\"string\">\"\"</span></div><div class=\"line\">  <span class=\"keyword\">fi</span></div><div class=\"line\"><span class=\"keyword\">done</span></div></pre></td></tr></table></figure></p>\n<p> <code>_cat/indices</code>api</p>\n<h3 id=\"-curator\"><a href=\"#-curator\" class=\"headerlink\" title=\" curator\"></a> curator</h3><p>windows<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-zip.html\">zip</a>,<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/windows-msi.html\">msi</a>,linux<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/apt-repository.html\">apt</a>,<a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/yum-repository.html\">yum</a></p>\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/5.0/index.html\">Curator Reference</a> <a href=\"https://github.com/elastic/curator\">github-curator</a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/current/installation.html\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> <a href=\"http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400\">http://stackoverflow.com/questions/33430055/removing-old-indices-in-elasticsearch#answer-42268400</a></p>\n<p>1.config</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"comment\"># Remember, leave a key empty if there is no value.  None will be a string,</span></div><div class=\"line\"><span class=\"comment\"># not a Python \"NoneType\"</span></div><div class=\"line\"><span class=\"attr\">client:</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span></div><div class=\"line\">    * <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\"><span class=\"attr\">  port:</span> <span class=\"number\">9200</span></div><div class=\"line\"><span class=\"attr\">  url_prefix:</span></div><div class=\"line\"><span class=\"attr\">  use_ssl:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">  certificate:</span></div><div class=\"line\"><span class=\"attr\">  client_cert:</span></div><div class=\"line\"><span class=\"attr\">  client_key:</span></div><div class=\"line\"><span class=\"attr\">  ssl_no_validate:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">  http_auth:</span> username:password</div><div class=\"line\"><span class=\"attr\">  timeout:</span></div><div class=\"line\"><span class=\"attr\">  master_only:</span> <span class=\"literal\">True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">logging:</span></div><div class=\"line\"><span class=\"attr\">  loglevel:</span> INFO</div><div class=\"line\"><span class=\"attr\">  logfile:</span></div><div class=\"line\"><span class=\"attr\">  logformat:</span> default</div><div class=\"line\">  <span class=\"comment\">#blacklist: ['elasticsearch', 'urllib3']</span></div></pre></td></tr></table></figure>\n<p>2.action</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"meta\">---</span></div><div class=\"line\"><span class=\"attr\">actions:</span></div><div class=\"line\">  <span class=\"number\">1</span>:</div><div class=\"line\"><span class=\"attr\">    action:</span> delete_indices</div><div class=\"line\"><span class=\"attr\">    description:</span> &gt;-</div><div class=\"line\">      Delete indices older than <span class=\"number\">7</span> days (based on index name), for logstash-</div><div class=\"line\">      prefixed indices. Ignore the error if the filter does not result in an</div><div class=\"line\">      actionable list of indices (ignore_empty_list) and exit cleanly.</div><div class=\"line\"><span class=\"attr\">    options:</span></div><div class=\"line\"><span class=\"attr\">      ignore_empty_list:</span> <span class=\"literal\">True</span></div><div class=\"line\"><span class=\"attr\">      timeout_override:</span></div><div class=\"line\"><span class=\"attr\">      continue_if_exception:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">      disable_action:</span> <span class=\"literal\">False</span></div><div class=\"line\"><span class=\"attr\">    filters:</span></div><div class=\"line\">    * filtertype: pattern</div><div class=\"line\"><span class=\"attr\">      kind:</span> prefix</div><div class=\"line\"><span class=\"attr\">      value:</span> logstash-</div><div class=\"line\"><span class=\"attr\">      exclude:</span></div><div class=\"line\">    * filtertype: age</div><div class=\"line\"><span class=\"attr\">      source:</span> name</div><div class=\"line\"><span class=\"attr\">      direction:</span> older</div><div class=\"line\"><span class=\"attr\">      timestring:</span> <span class=\"string\">'%Y.%m.%d'</span></div><div class=\"line\"><span class=\"attr\">      unit:</span> days</div><div class=\"line\"><span class=\"attr\">      unit_count:</span> <span class=\"number\">7</span></div><div class=\"line\"><span class=\"attr\">      exclude:</span></div></pre></td></tr></table></figure>\n<p><code>index-&#39;%Y.%m.%d&#39;</code><code>source: creation_date</code>  <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date\">https://www.elastic.co/guide/en/elasticsearch/client/curator/current/fe_source.html#_creation_date</a></p>\n<p>3.</p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">curator --config /path/config_file.yml /path/action_file.yml</div></pre></td></tr></table></figure>\n<p><code>crontab -e</code></p>"},{"title":"ElastAlert Elasticsearch","date":"2017-02-14T00:27:47.000Z","_content":"\nElastalertYelppython2(python2.62.73.x),github [https://github.com/Yelp/elastalert](https://github.com/Yelp/elastalert)\n\n<!-- more -->\n\n## \n\nUbuntu 16.10( 4.8.0-37-generic)\n\nelasticsearch 5.2.0\n\nlogstash 5.2.0\n\nkibana 5.2.0\n\n## \n\n [http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements](http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements)\n\n- Elasticsearch\n- ISO8601 or Unix timestamped data\n- Python 2.6 or 2.7\n- pip, see requirements.txt\n\n\n## Elastalert\n\n `python --version`python\n\n```bash\n$ python --version\n\nPython 2.7.12+\n\n#2.62.73.xpython2.x\n#python 23 /usr/bin/python python2\n```\n\nelastalert\n\n```bash\n\n$ git clone https://github.com/Yelp/elastalert.git\n\n$ sudo python setup.py install\n\n$ sudo pip install -r requirements.txt\n\n```\n\n /usr/local/bin/ 4elastalert\n```bash\n\n$ ll /usr/local/bin/elastalert*\n-rwxr-xr-x 1 root root 396 2  14 10:03 /usr/local/bin/elastalert\n-rwxr-xr-x 1 root root 422 2  14 10:03 /usr/local/bin/elastalert-create-index\n-rwxr-xr-x 1 root root 430 2  14 10:03 /usr/local/bin/elastalert-rule-from-kibana\n-rwxr-xr-x 1 root root 416 2  14 10:03 /usr/local/bin/elastalert-test-rule\n\n```\n\n## elasticsearch\n\n [setting-up-elasticsearch][setting-up-elasticsearch] \n\n`elastalert-create-index` elasticsearchelastalert`alert`, `elastalert_status`\n\n```bash\n$ elastalert-create-index\nNew index name (Default elastalert_status)\nName of existing index to copy (Default None)\nNew index elastalert_status created\nDone!\n```\n\n [ElastAlert Metadata Index][metadata]\n\n## Rule\n\n```bash\n$ cp ~/elastalert/config.yaml.example ~/elastalert/config.yaml\n\n$ vi ~/elastalert/config.yaml\n```\n\n```yaml\n# This is the folder that contains the rule yaml files\n# Any .yaml file will be loaded as a rule\nrules_folder: example_rules\n\n# How often ElastAlert will query Elasticsearch\n# The unit can be anything from weeks to seconds\nrun_every:\n  minutes: 1\n\n# ElastAlert will buffer results from the most recent\n# period of time, in case some log sources are not in real time\nbuffer_time:\n  minutes: 15\n\n# The Elasticsearch hostname for metadata writeback\n# Note that every rule can have its own Elasticsearch host\nes_host: 127.0.0.1\n\n# The Elasticsearch port\nes_port: 9200\n\n# Optional URL prefix for Elasticsearch\n#es_url_prefix: elasticsearch\n\n# Connect with TLS to Elasticsearch\n#use_ssl: True\n\n# Verify TLS certificates\n#verify_certs: True\n\n# GET request with body is the default option for Elasticsearch.\n# If it fails for some reason, you can pass 'GET', 'POST' or 'source'.\n# See http://elasticsearch-py.readthedocs.io/en/master/connection.html?highlight=send_get_body_as#transport\n# for details\n#es_send_get_body_as: GET\n\n# Option basic-auth username and password for Elasticsearch\n#es_username: someusername\n#es_password: somepassword\n\n# The index on es_host which is used for metadata storage\n# This can be a unmapped index, but it is recommended that you run\n# elastalert-create-index to set a mapping\nwriteback_index: elastalert_status\n\n# If an alert fails for some reason, ElastAlert will retry\n# sending the alert until this time period has elapsed\nalert_time_limit:\n  days: 1\n\n```\n\n```bash\n#${userName}\nvi /home/${userName}/elastalert/example_rules/smtp_auth_file.yaml\n```\n```yaml\n#\nuser: xxx@163.com\n#POP3\npassword: xxx\n```\n```bash\nvi ~/elastalert/example_rules/example_frequency.yaml\n```\n [creating-a-rule][creating-a-rule]\n```yaml\n# From example_rules/example_frequency.yaml\n#es_host: elasticsearch.example.com\n#es_port: 14900\nname: Example rule\ntype: frequency\nindex: logstash-*\n#\nnum_events: 1\n#\ntimeframe:\n    #1\n    minutes: 1\n\nfilter:\n- query:\n    query_string:\n      query: \"field: value\"\n\n#SMTP\n#smtp.163.com163smtp\n#163 >POP3/SMTP/IMAP>\nsmtp_host: smtp.163.com\nsmtp_port: 25\n\n#userpassword\n#${userName}\nsmtp_auth_file: /home/${userName}/elastalert/example_rules/smtp_auth_file.yaml\n#\nemail_reply_to: xxx@163.com\n#\nfrom_addr: xxx@163.com\n\n# (Required)\n# The alert is use when a match is found\nalert:\n- \"email\"\n\n# (required, email specific)\n# a list of email addresses to send alerts to\nemail:\n#\n- \"xxxx@qq.com\"\n```\n\n## \n\n [Testing Your Rule][testing-your-rule]\n\n```bash\nelastalert-test-rule ~/elastalert/example_rules/example_frequency.yaml\n```\n\n [commonconfig][commonconfig]\n\n## \n```bash\n$ cd ~/elastalert\n$ python -m elastalert.elastalert --verbose --rule example_frequency.yaml\n\nINFO:elastalert:Starting up\nINFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 / 0 hits\nINFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 query hits, 0 matches, 0 alerts sent\nINFO:elastalert:Sleeping for 59 seconds\n\n```\n```bash\n$ curl -X POST \"http://127.0.0.1:9200/logstash-2017.02.14/test\"  -d '{\n\"@timestamp\": \"2017-02-14T03:10:46.000Z\",\n\"field\": \"value\"\n}'\n\n#  {\"_index\":\"logstash-2017.02.14\",\"_type\":\"test\",\"_id\":\"AVo6oVCnFreCcJPhQqgX\",\"_version\":1,\"result\":\"created\",\"shards\":{\"total\":2,\"successful\":1,\"failed\":0},\"created\":true}\n\n```\n**@timestampUTC82017-02-14 11:21:50UTC 2017-02-14 03:21:50**\n```bash\n#\n\nINFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 / 2 hits\nINFO:elastalert:Alert for Example rule at 2017-02-14T03:10:46Z:\nINFO:elastalert:Example rule\n\nAt least 1 events occurred between 2017-02-14 11:09 CST and 2017-02-14 11:10 CST\n\n@timestamp: 2017-02-14T03:10:46Z\n_id: AVo6oVCnFreCcJPhQqgX\n_index: logstash-2017.02.14\n_type: test\nfield: value\nnum_hits: 2\nnum_matches: 1\n\nINFO:elastalert:Sent email to ['xxx@qq.com']\nINFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 query hits, 1 matches, 2 alerts sent\nINFO:elastalert:Sleeping for 59 seconds\n\n```\n\n## Alert\n\n![](https://ooo.0o0.ooo/2017/02/14/58a27e882df14.png)\n\n[setting-up-elasticsearch]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#setting-up-elasticsearch\n[metadata]: http://elastalert.readthedocs.io/en/latest/elastalert_status.html#metadata\n[creating-a-rule]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#creating-a-rule\n[commonconfig]: http://elastalert.readthedocs.io/en/latest/ruletypes.html#commonconfig\n[testing-your-rule]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#testing-your-rule\n","source":"_posts/elasticsearch-elastalert.md","raw":"---\ntitle: ElastAlert Elasticsearch\ndate: 2017-02-14 08:27:47\ntags: [elk,elkstasck,ElastAlert]\ncategories: [elkstasck]\n---\n\nElastalertYelppython2(python2.62.73.x),github [https://github.com/Yelp/elastalert](https://github.com/Yelp/elastalert)\n\n<!-- more -->\n\n## \n\nUbuntu 16.10( 4.8.0-37-generic)\n\nelasticsearch 5.2.0\n\nlogstash 5.2.0\n\nkibana 5.2.0\n\n## \n\n [http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements](http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements)\n\n- Elasticsearch\n- ISO8601 or Unix timestamped data\n- Python 2.6 or 2.7\n- pip, see requirements.txt\n\n\n## Elastalert\n\n `python --version`python\n\n```bash\n$ python --version\n\nPython 2.7.12+\n\n#2.62.73.xpython2.x\n#python 23 /usr/bin/python python2\n```\n\nelastalert\n\n```bash\n\n$ git clone https://github.com/Yelp/elastalert.git\n\n$ sudo python setup.py install\n\n$ sudo pip install -r requirements.txt\n\n```\n\n /usr/local/bin/ 4elastalert\n```bash\n\n$ ll /usr/local/bin/elastalert*\n-rwxr-xr-x 1 root root 396 2  14 10:03 /usr/local/bin/elastalert\n-rwxr-xr-x 1 root root 422 2  14 10:03 /usr/local/bin/elastalert-create-index\n-rwxr-xr-x 1 root root 430 2  14 10:03 /usr/local/bin/elastalert-rule-from-kibana\n-rwxr-xr-x 1 root root 416 2  14 10:03 /usr/local/bin/elastalert-test-rule\n\n```\n\n## elasticsearch\n\n [setting-up-elasticsearch][setting-up-elasticsearch] \n\n`elastalert-create-index` elasticsearchelastalert`alert`, `elastalert_status`\n\n```bash\n$ elastalert-create-index\nNew index name (Default elastalert_status)\nName of existing index to copy (Default None)\nNew index elastalert_status created\nDone!\n```\n\n [ElastAlert Metadata Index][metadata]\n\n## Rule\n\n```bash\n$ cp ~/elastalert/config.yaml.example ~/elastalert/config.yaml\n\n$ vi ~/elastalert/config.yaml\n```\n\n```yaml\n# This is the folder that contains the rule yaml files\n# Any .yaml file will be loaded as a rule\nrules_folder: example_rules\n\n# How often ElastAlert will query Elasticsearch\n# The unit can be anything from weeks to seconds\nrun_every:\n  minutes: 1\n\n# ElastAlert will buffer results from the most recent\n# period of time, in case some log sources are not in real time\nbuffer_time:\n  minutes: 15\n\n# The Elasticsearch hostname for metadata writeback\n# Note that every rule can have its own Elasticsearch host\nes_host: 127.0.0.1\n\n# The Elasticsearch port\nes_port: 9200\n\n# Optional URL prefix for Elasticsearch\n#es_url_prefix: elasticsearch\n\n# Connect with TLS to Elasticsearch\n#use_ssl: True\n\n# Verify TLS certificates\n#verify_certs: True\n\n# GET request with body is the default option for Elasticsearch.\n# If it fails for some reason, you can pass 'GET', 'POST' or 'source'.\n# See http://elasticsearch-py.readthedocs.io/en/master/connection.html?highlight=send_get_body_as#transport\n# for details\n#es_send_get_body_as: GET\n\n# Option basic-auth username and password for Elasticsearch\n#es_username: someusername\n#es_password: somepassword\n\n# The index on es_host which is used for metadata storage\n# This can be a unmapped index, but it is recommended that you run\n# elastalert-create-index to set a mapping\nwriteback_index: elastalert_status\n\n# If an alert fails for some reason, ElastAlert will retry\n# sending the alert until this time period has elapsed\nalert_time_limit:\n  days: 1\n\n```\n\n```bash\n#${userName}\nvi /home/${userName}/elastalert/example_rules/smtp_auth_file.yaml\n```\n```yaml\n#\nuser: xxx@163.com\n#POP3\npassword: xxx\n```\n```bash\nvi ~/elastalert/example_rules/example_frequency.yaml\n```\n [creating-a-rule][creating-a-rule]\n```yaml\n# From example_rules/example_frequency.yaml\n#es_host: elasticsearch.example.com\n#es_port: 14900\nname: Example rule\ntype: frequency\nindex: logstash-*\n#\nnum_events: 1\n#\ntimeframe:\n    #1\n    minutes: 1\n\nfilter:\n- query:\n    query_string:\n      query: \"field: value\"\n\n#SMTP\n#smtp.163.com163smtp\n#163 >POP3/SMTP/IMAP>\nsmtp_host: smtp.163.com\nsmtp_port: 25\n\n#userpassword\n#${userName}\nsmtp_auth_file: /home/${userName}/elastalert/example_rules/smtp_auth_file.yaml\n#\nemail_reply_to: xxx@163.com\n#\nfrom_addr: xxx@163.com\n\n# (Required)\n# The alert is use when a match is found\nalert:\n- \"email\"\n\n# (required, email specific)\n# a list of email addresses to send alerts to\nemail:\n#\n- \"xxxx@qq.com\"\n```\n\n## \n\n [Testing Your Rule][testing-your-rule]\n\n```bash\nelastalert-test-rule ~/elastalert/example_rules/example_frequency.yaml\n```\n\n [commonconfig][commonconfig]\n\n## \n```bash\n$ cd ~/elastalert\n$ python -m elastalert.elastalert --verbose --rule example_frequency.yaml\n\nINFO:elastalert:Starting up\nINFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 / 0 hits\nINFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 query hits, 0 matches, 0 alerts sent\nINFO:elastalert:Sleeping for 59 seconds\n\n```\n```bash\n$ curl -X POST \"http://127.0.0.1:9200/logstash-2017.02.14/test\"  -d '{\n\"@timestamp\": \"2017-02-14T03:10:46.000Z\",\n\"field\": \"value\"\n}'\n\n#  {\"_index\":\"logstash-2017.02.14\",\"_type\":\"test\",\"_id\":\"AVo6oVCnFreCcJPhQqgX\",\"_version\":1,\"result\":\"created\",\"shards\":{\"total\":2,\"successful\":1,\"failed\":0},\"created\":true}\n\n```\n**@timestampUTC82017-02-14 11:21:50UTC 2017-02-14 03:21:50**\n```bash\n#\n\nINFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 / 2 hits\nINFO:elastalert:Alert for Example rule at 2017-02-14T03:10:46Z:\nINFO:elastalert:Example rule\n\nAt least 1 events occurred between 2017-02-14 11:09 CST and 2017-02-14 11:10 CST\n\n@timestamp: 2017-02-14T03:10:46Z\n_id: AVo6oVCnFreCcJPhQqgX\n_index: logstash-2017.02.14\n_type: test\nfield: value\nnum_hits: 2\nnum_matches: 1\n\nINFO:elastalert:Sent email to ['xxx@qq.com']\nINFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 query hits, 1 matches, 2 alerts sent\nINFO:elastalert:Sleeping for 59 seconds\n\n```\n\n## Alert\n\n![](https://ooo.0o0.ooo/2017/02/14/58a27e882df14.png)\n\n[setting-up-elasticsearch]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#setting-up-elasticsearch\n[metadata]: http://elastalert.readthedocs.io/en/latest/elastalert_status.html#metadata\n[creating-a-rule]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#creating-a-rule\n[commonconfig]: http://elastalert.readthedocs.io/en/latest/ruletypes.html#commonconfig\n[testing-your-rule]: http://elastalert.readthedocs.io/en/latest/running_elastalert.html#testing-your-rule\n","slug":"elasticsearch-elastalert","published":1,"updated":"2017-02-14T06:32:25.097Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbnu0004vkdopntjf0pl","content":"<p>ElastalertYelppython2(python2.62.73.x),github <a href=\"https://github.com/Yelp/elastalert\" target=\"_blank\" rel=\"external\">https://github.com/Yelp/elastalert</a></p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Ubuntu 16.10( 4.8.0-37-generic)</p>\n<p>elasticsearch 5.2.0</p>\n<p>logstash 5.2.0</p>\n<p>kibana 5.2.0</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements\" target=\"_blank\" rel=\"external\">http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements</a></p>\n<ul>\n<li>Elasticsearch</li>\n<li>ISO8601 or Unix timestamped data</li>\n<li>Python 2.6 or 2.7</li>\n<li>pip, see requirements.txt</li>\n</ul>\n<h2 id=\"Elastalert\"><a href=\"#Elastalert\" class=\"headerlink\" title=\"Elastalert\"></a>Elastalert</h2><p> <code>python --version</code>python</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ python --version</div><div class=\"line\"></div><div class=\"line\">Python 2.7.12+</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#2.62.73.xpython2.x</span></div><div class=\"line\"><span class=\"comment\">#python 23 /usr/bin/python python2</span></div></pre></td></tr></table></figure>\n<p>elastalert</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ git <span class=\"built_in\">clone</span> https://github.com/Yelp/elastalert.git</div><div class=\"line\"></div><div class=\"line\">$ sudo python setup.py install</div><div class=\"line\"></div><div class=\"line\">$ sudo pip install -r requirements.txt</div></pre></td></tr></table></figure>\n<p> /usr/local/bin/ 4elastalert<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ ll /usr/<span class=\"built_in\">local</span>/bin/elastalert*</div><div class=\"line\">-rwxr-xr-x 1 root root 396 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert</div><div class=\"line\">-rwxr-xr-x 1 root root 422 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-create-index</div><div class=\"line\">-rwxr-xr-x 1 root root 430 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-rule-from-kibana</div><div class=\"line\">-rwxr-xr-x 1 root root 416 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-test-rule</div></pre></td></tr></table></figure></p>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#setting-up-elasticsearch\" target=\"_blank\" rel=\"external\">setting-up-elasticsearch</a> </p>\n<p><code>elastalert-create-index</code> elasticsearchelastalert<code>alert</code>, <code>elastalert_status</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ elastalert-create-index</div><div class=\"line\">New index name (Default elastalert_status)</div><div class=\"line\">Name of existing index to copy (Default None)</div><div class=\"line\">New index elastalert_status created</div><div class=\"line\">Done!</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/elastalert_status.html#metadata\" target=\"_blank\" rel=\"external\">ElastAlert Metadata Index</a></p>\n<h2 id=\"Rule\"><a href=\"#Rule\" class=\"headerlink\" title=\"Rule\"></a>Rule</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ cp ~/elastalert/config.yaml.example ~/elastalert/config.yaml</div><div class=\"line\"></div><div class=\"line\">$ vi ~/elastalert/config.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># This is the folder that contains the rule yaml files</span></div><div class=\"line\"><span class=\"comment\"># Any .yaml file will be loaded as a rule</span></div><div class=\"line\"><span class=\"attr\">rules_folder:</span> example_rules</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># How often ElastAlert will query Elasticsearch</span></div><div class=\"line\"><span class=\"comment\"># The unit can be anything from weeks to seconds</span></div><div class=\"line\"><span class=\"attr\">run_every:</span></div><div class=\"line\"><span class=\"attr\">  minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ElastAlert will buffer results from the most recent</span></div><div class=\"line\"><span class=\"comment\"># period of time, in case some log sources are not in real time</span></div><div class=\"line\"><span class=\"attr\">buffer_time:</span></div><div class=\"line\"><span class=\"attr\">  minutes:</span> <span class=\"number\">15</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The Elasticsearch hostname for metadata writeback</span></div><div class=\"line\"><span class=\"comment\"># Note that every rule can have its own Elasticsearch host</span></div><div class=\"line\"><span class=\"attr\">es_host:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The Elasticsearch port</span></div><div class=\"line\"><span class=\"attr\">es_port:</span> <span class=\"number\">9200</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Optional URL prefix for Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_url_prefix: elasticsearch</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Connect with TLS to Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#use_ssl: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Verify TLS certificates</span></div><div class=\"line\"><span class=\"comment\">#verify_certs: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># GET request with body is the default option for Elasticsearch.</span></div><div class=\"line\"><span class=\"comment\"># If it fails for some reason, you can pass 'GET', 'POST' or 'source'.</span></div><div class=\"line\"><span class=\"comment\"># See http://elasticsearch-py.readthedocs.io/en/master/connection.html?highlight=send_get_body_as#transport</span></div><div class=\"line\"><span class=\"comment\"># for details</span></div><div class=\"line\"><span class=\"comment\">#es_send_get_body_as: GET</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Option basic-auth username and password for Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_username: someusername</span></div><div class=\"line\"><span class=\"comment\">#es_password: somepassword</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The index on es_host which is used for metadata storage</span></div><div class=\"line\"><span class=\"comment\"># This can be a unmapped index, but it is recommended that you run</span></div><div class=\"line\"><span class=\"comment\"># elastalert-create-index to set a mapping</span></div><div class=\"line\"><span class=\"attr\">writeback_index:</span> elastalert_status</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># If an alert fails for some reason, ElastAlert will retry</span></div><div class=\"line\"><span class=\"comment\"># sending the alert until this time period has elapsed</span></div><div class=\"line\"><span class=\"attr\">alert_time_limit:</span></div><div class=\"line\"><span class=\"attr\">  days:</span> <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#$&#123;userName&#125;</span></div><div class=\"line\">vi /home/<span class=\"variable\">$&#123;userName&#125;</span>/elastalert/example_rules/smtp_auth_file.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">user:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"><span class=\"comment\">#POP3</span></div><div class=\"line\"><span class=\"attr\">password:</span> xxx</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">vi ~/elastalert/example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#creating-a-rule\" target=\"_blank\" rel=\"external\">creating-a-rule</a><br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># From example_rules/example_frequency.yaml</span></div><div class=\"line\"><span class=\"comment\">#es_host: elasticsearch.example.com</span></div><div class=\"line\"><span class=\"comment\">#es_port: 14900</span></div><div class=\"line\"><span class=\"attr\">name:</span> Example rule</div><div class=\"line\"><span class=\"attr\">type:</span> frequency</div><div class=\"line\"><span class=\"attr\">index:</span> logstash-*</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\">    <span class=\"comment\">#1</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">filter:</span></div><div class=\"line\"><span class=\"attr\">- query:</span></div><div class=\"line\"><span class=\"attr\">    query_string:</span></div><div class=\"line\"><span class=\"attr\">      query:</span> <span class=\"string\">\"field: value\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#SMTP</span></div><div class=\"line\"><span class=\"comment\">#smtp.163.com163smtp</span></div><div class=\"line\"><span class=\"comment\">#163 &gt;POP3/SMTP/IMAP&gt;</span></div><div class=\"line\"><span class=\"attr\">smtp_host:</span> smtp<span class=\"number\">.163</span>.com</div><div class=\"line\"><span class=\"attr\">smtp_port:</span> <span class=\"number\">25</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#userpassword</span></div><div class=\"line\"><span class=\"comment\">#$&#123;userName&#125;</span></div><div class=\"line\"><span class=\"attr\">smtp_auth_file:</span> /home/$&#123;userName&#125;/elastalert/example_rules/smtp_auth_file.yaml</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">email_reply_to:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">from_addr:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"email\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (required, email specific)</span></div><div class=\"line\"><span class=\"comment\"># a list of email addresses to send alerts to</span></div><div class=\"line\"><span class=\"attr\">email:</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"xxxx@qq.com\"</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#testing-your-rule\" target=\"_blank\" rel=\"external\">Testing Your Rule</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">elastalert-test-rule ~/elastalert/example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/ruletypes.html#commonconfig\" target=\"_blank\" rel=\"external\">commonconfig</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">cd</span> ~/elastalert</div><div class=\"line\">$ python -m elastalert.elastalert --verbose --rule example_frequency.yaml</div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Starting up</div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 / 0 hits</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 query hits, 0 matches, 0 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 59 seconds</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ curl -X POST <span class=\"string\">\"http://127.0.0.1:9200/logstash-2017.02.14/test\"</span>  <span class=\"_\">-d</span> <span class=\"string\">'&#123;</span></div><div class=\"line\">\"@timestamp\": \"2017-02-14T03:10:46.000Z\",</div><div class=\"line\">\"field\": \"value\"</div><div class=\"line\">&#125;'</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#  &#123;\"_index\":\"logstash-2017.02.14\",\"_type\":\"test\",\"_id\":\"AVo6oVCnFreCcJPhQqgX\",\"_version\":1,\"result\":\"created\",\"shards\":&#123;\"total\":2,\"successful\":1,\"failed\":0&#125;,\"created\":true&#125;</span></div></pre></td></tr></table></figure>\n<p><strong>@timestampUTC82017-02-14 11:21:50UTC 2017-02-14 03:21:50</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 / 2 hits</div><div class=\"line\">INFO:elastalert:Alert <span class=\"keyword\">for</span> Example rule at 2017-02-14T03:10:46Z:</div><div class=\"line\">INFO:elastalert:Example rule</div><div class=\"line\"></div><div class=\"line\">At least 1 events occurred between 2017-02-14 11:09 CST and 2017-02-14 11:10 CST</div><div class=\"line\"></div><div class=\"line\">@timestamp: 2017-02-14T03:10:46Z</div><div class=\"line\">_id: AVo6oVCnFreCcJPhQqgX</div><div class=\"line\">_index: logstash-2017.02.14</div><div class=\"line\">_type: <span class=\"built_in\">test</span></div><div class=\"line\">field: value</div><div class=\"line\">num_hits: 2</div><div class=\"line\">num_matches: 1</div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Sent email to [<span class=\"string\">'xxx@qq.com'</span>]</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 query hits, 1 matches, 2 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 59 seconds</div></pre></td></tr></table></figure></p>\n<h2 id=\"Alert\"><a href=\"#Alert\" class=\"headerlink\" title=\"Alert\"></a>Alert</h2><p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a27e882df14.png\" alt=\"\"></p>\n","excerpt":"<p>ElastalertYelppython2(python2.62.73.x),github <a href=\"https://github.com/Yelp/elastalert\">https://github.com/Yelp/elastalert</a></p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p>Ubuntu 16.10( 4.8.0-37-generic)</p>\n<p>elasticsearch 5.2.0</p>\n<p>logstash 5.2.0</p>\n<p>kibana 5.2.0</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements\">http://elastalert.readthedocs.io/en/latest/running_elastalert.html#requirements</a></p>\n<ul>\n<li>Elasticsearch</li>\n<li>ISO8601 or Unix timestamped data</li>\n<li>Python 2.6 or 2.7</li>\n<li>pip, see requirements.txt</li>\n</ul>\n<h2 id=\"Elastalert\"><a href=\"#Elastalert\" class=\"headerlink\" title=\"Elastalert\"></a>Elastalert</h2><p> <code>python --version</code>python</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ python --version</div><div class=\"line\"></div><div class=\"line\">Python 2.7.12+</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#2.62.73.xpython2.x</span></div><div class=\"line\"><span class=\"comment\">#python 23 /usr/bin/python python2</span></div></pre></td></tr></table></figure>\n<p>elastalert</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ git <span class=\"built_in\">clone</span> https://github.com/Yelp/elastalert.git</div><div class=\"line\"></div><div class=\"line\">$ sudo python setup.py install</div><div class=\"line\"></div><div class=\"line\">$ sudo pip install -r requirements.txt</div></pre></td></tr></table></figure>\n<p> /usr/local/bin/ 4elastalert<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ ll /usr/<span class=\"built_in\">local</span>/bin/elastalert*</div><div class=\"line\">-rwxr-xr-x 1 root root 396 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert</div><div class=\"line\">-rwxr-xr-x 1 root root 422 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-create-index</div><div class=\"line\">-rwxr-xr-x 1 root root 430 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-rule-from-kibana</div><div class=\"line\">-rwxr-xr-x 1 root root 416 2  14 10:03 /usr/<span class=\"built_in\">local</span>/bin/elastalert-test-rule</div></pre></td></tr></table></figure></p>\n<h2 id=\"elasticsearch\"><a href=\"#elasticsearch\" class=\"headerlink\" title=\"elasticsearch\"></a>elasticsearch</h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#setting-up-elasticsearch\">setting-up-elasticsearch</a> </p>\n<p><code>elastalert-create-index</code> elasticsearchelastalert<code>alert</code>, <code>elastalert_status</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ elastalert-create-index</div><div class=\"line\">New index name (Default elastalert_status)</div><div class=\"line\">Name of existing index to copy (Default None)</div><div class=\"line\">New index elastalert_status created</div><div class=\"line\">Done!</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/elastalert_status.html#metadata\">ElastAlert Metadata Index</a></p>\n<h2 id=\"Rule\"><a href=\"#Rule\" class=\"headerlink\" title=\"Rule\"></a>Rule</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ cp ~/elastalert/config.yaml.example ~/elastalert/config.yaml</div><div class=\"line\"></div><div class=\"line\">$ vi ~/elastalert/config.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># This is the folder that contains the rule yaml files</span></div><div class=\"line\"><span class=\"comment\"># Any .yaml file will be loaded as a rule</span></div><div class=\"line\"><span class=\"attr\">rules_folder:</span> example_rules</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># How often ElastAlert will query Elasticsearch</span></div><div class=\"line\"><span class=\"comment\"># The unit can be anything from weeks to seconds</span></div><div class=\"line\"><span class=\"attr\">run_every:</span></div><div class=\"line\"><span class=\"attr\">  minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ElastAlert will buffer results from the most recent</span></div><div class=\"line\"><span class=\"comment\"># period of time, in case some log sources are not in real time</span></div><div class=\"line\"><span class=\"attr\">buffer_time:</span></div><div class=\"line\"><span class=\"attr\">  minutes:</span> <span class=\"number\">15</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The Elasticsearch hostname for metadata writeback</span></div><div class=\"line\"><span class=\"comment\"># Note that every rule can have its own Elasticsearch host</span></div><div class=\"line\"><span class=\"attr\">es_host:</span> <span class=\"number\">127.0</span><span class=\"number\">.0</span><span class=\"number\">.1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The Elasticsearch port</span></div><div class=\"line\"><span class=\"attr\">es_port:</span> <span class=\"number\">9200</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Optional URL prefix for Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_url_prefix: elasticsearch</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Connect with TLS to Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#use_ssl: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Verify TLS certificates</span></div><div class=\"line\"><span class=\"comment\">#verify_certs: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># GET request with body is the default option for Elasticsearch.</span></div><div class=\"line\"><span class=\"comment\"># If it fails for some reason, you can pass 'GET', 'POST' or 'source'.</span></div><div class=\"line\"><span class=\"comment\"># See http://elasticsearch-py.readthedocs.io/en/master/connection.html?highlight=send_get_body_as#transport</span></div><div class=\"line\"><span class=\"comment\"># for details</span></div><div class=\"line\"><span class=\"comment\">#es_send_get_body_as: GET</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># Option basic-auth username and password for Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_username: someusername</span></div><div class=\"line\"><span class=\"comment\">#es_password: somepassword</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># The index on es_host which is used for metadata storage</span></div><div class=\"line\"><span class=\"comment\"># This can be a unmapped index, but it is recommended that you run</span></div><div class=\"line\"><span class=\"comment\"># elastalert-create-index to set a mapping</span></div><div class=\"line\"><span class=\"attr\">writeback_index:</span> elastalert_status</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># If an alert fails for some reason, ElastAlert will retry</span></div><div class=\"line\"><span class=\"comment\"># sending the alert until this time period has elapsed</span></div><div class=\"line\"><span class=\"attr\">alert_time_limit:</span></div><div class=\"line\"><span class=\"attr\">  days:</span> <span class=\"number\">1</span></div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#$&#123;userName&#125;</span></div><div class=\"line\">vi /home/<span class=\"variable\">$&#123;userName&#125;</span>/elastalert/example_rules/smtp_auth_file.yaml</div></pre></td></tr></table></figure>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">user:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"><span class=\"comment\">#POP3</span></div><div class=\"line\"><span class=\"attr\">password:</span> xxx</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">vi ~/elastalert/example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#creating-a-rule\">creating-a-rule</a><br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># From example_rules/example_frequency.yaml</span></div><div class=\"line\"><span class=\"comment\">#es_host: elasticsearch.example.com</span></div><div class=\"line\"><span class=\"comment\">#es_port: 14900</span></div><div class=\"line\"><span class=\"attr\">name:</span> Example rule</div><div class=\"line\"><span class=\"attr\">type:</span> frequency</div><div class=\"line\"><span class=\"attr\">index:</span> logstash-*</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\">    <span class=\"comment\">#1</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">filter:</span></div><div class=\"line\"><span class=\"attr\">- query:</span></div><div class=\"line\"><span class=\"attr\">    query_string:</span></div><div class=\"line\"><span class=\"attr\">      query:</span> <span class=\"string\">\"field: value\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#SMTP</span></div><div class=\"line\"><span class=\"comment\">#smtp.163.com163smtp</span></div><div class=\"line\"><span class=\"comment\">#163 &gt;POP3/SMTP/IMAP&gt;</span></div><div class=\"line\"><span class=\"attr\">smtp_host:</span> smtp<span class=\"number\">.163</span>.com</div><div class=\"line\"><span class=\"attr\">smtp_port:</span> <span class=\"number\">25</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#userpassword</span></div><div class=\"line\"><span class=\"comment\">#$&#123;userName&#125;</span></div><div class=\"line\"><span class=\"attr\">smtp_auth_file:</span> /home/$&#123;userName&#125;/elastalert/example_rules/smtp_auth_file.yaml</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">email_reply_to:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"attr\">from_addr:</span> xxx@<span class=\"number\">163.</span>com</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"email\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (required, email specific)</span></div><div class=\"line\"><span class=\"comment\"># a list of email addresses to send alerts to</span></div><div class=\"line\"><span class=\"attr\">email:</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"xxxx@qq.com\"</span></div></pre></td></tr></table></figure></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://elastalert.readthedocs.io/en/latest/running_elastalert.html#testing-your-rule\">Testing Your Rule</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">elastalert-test-rule ~/elastalert/example_rules/example_frequency.yaml</div></pre></td></tr></table></figure>\n<p> <a href=\"http://elastalert.readthedocs.io/en/latest/ruletypes.html#commonconfig\">commonconfig</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">cd</span> ~/elastalert</div><div class=\"line\">$ python -m elastalert.elastalert --verbose --rule example_frequency.yaml</div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Starting up</div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 / 0 hits</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:09 CST: 0 query hits, 0 matches, 0 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 59 seconds</div></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ curl -X POST <span class=\"string\">\"http://127.0.0.1:9200/logstash-2017.02.14/test\"</span>  <span class=\"_\">-d</span> <span class=\"string\">'&#123;</div><div class=\"line\">\"@timestamp\": \"2017-02-14T03:10:46.000Z\",</div><div class=\"line\">\"field\": \"value\"</div><div class=\"line\">&#125;'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#  &#123;\"_index\":\"logstash-2017.02.14\",\"_type\":\"test\",\"_id\":\"AVo6oVCnFreCcJPhQqgX\",\"_version\":1,\"result\":\"created\",\"shards\":&#123;\"total\":2,\"successful\":1,\"failed\":0&#125;,\"created\":true&#125;</span></div></pre></td></tr></table></figure>\n<p><strong>@timestampUTC82017-02-14 11:21:50UTC 2017-02-14 03:21:50</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Queried rule Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 / 2 hits</div><div class=\"line\">INFO:elastalert:Alert <span class=\"keyword\">for</span> Example rule at 2017-02-14T03:10:46Z:</div><div class=\"line\">INFO:elastalert:Example rule</div><div class=\"line\"></div><div class=\"line\">At least 1 events occurred between 2017-02-14 11:09 CST and 2017-02-14 11:10 CST</div><div class=\"line\"></div><div class=\"line\">@timestamp: 2017-02-14T03:10:46Z</div><div class=\"line\">_id: AVo6oVCnFreCcJPhQqgX</div><div class=\"line\">_index: logstash-2017.02.14</div><div class=\"line\">_type: <span class=\"built_in\">test</span></div><div class=\"line\">field: value</div><div class=\"line\">num_hits: 2</div><div class=\"line\">num_matches: 1</div><div class=\"line\"></div><div class=\"line\">INFO:elastalert:Sent email to [<span class=\"string\">'xxx@qq.com'</span>]</div><div class=\"line\">INFO:elastalert:Ran Example rule from 2017-02-14 11:08 CST to 2017-02-14 11:19 CST: 2 query hits, 1 matches, 2 alerts sent</div><div class=\"line\">INFO:elastalert:Sleeping <span class=\"keyword\">for</span> 59 seconds</div></pre></td></tr></table></figure></p>\n<h2 id=\"Alert\"><a href=\"#Alert\" class=\"headerlink\" title=\"Alert\"></a>Alert</h2><p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a27e882df14.png\" alt=\"\"></p>"},{"title":"ELK StackBeats","date":"2017-03-02T10:55:39.000Z","_content":"\nBeats ELK StackLogstashElasticsearch\n<!-- more -->\n## Filebeat\n\nFilebeatFilebeat\n\n####  \nfilebeat${filebeat_home}\\data\\registry\n#### logstashelasticsearch\nFilebeat(backpressure-sensitive)logstashFilebeat-logstaFilebeat\n![Filebeat](https://static-www.elastic.co/assets/blt203883a0718cdc5a/filebeat-diagram.png?q=891)\n\n## Metricbeat\n\nMetricbeatCPURedisnginx\n\n#### \n\nLinuxWindowsMacMetricbeatcpuIOIO\n![](https://static-www.elastic.co/assets/bltcaef5fe4015417d6/product-metricbeat-1.gif?q=891)\n\n#### \nApache, NGINX, MongoDB, MySQL, PostgreSQL, Redis, and ZooKeeper\n![](https://static-www.elastic.co/assets/blt53458fcf0602cad1/metricbeat-logos-4.svg?q=891)\n\n#### \nDockerMetricbeatproccgroupsDockerDocker API\n\n#### ELK\nMetricbeatsELK StackELKLogstashElasticsearchKibana\n\n## Packetbeat\n\nPacketbeatwiresharkfiddlerChromedev toolsNetworkPacketbeatLogstashElasticsearch\n\n#### \n\nPacketbeat HTTPPacketbeat\n\n#### \n\nPacketbeat\n![](https://static-www.elastic.co/assets/bltbc6a3f306a97dd20/packetbeat-logo-4.svg?q=891)\n\n#### \nPacketbeat----jsonElasticsearch\n![](https://static-www.elastic.co/assets/bltd9ea7151b811b1c6/packetbeat-monitoring-steps3.svg?q=891)\n\n#### ELK\nPacketbeatELK StackELKLogstashElasticsearchKibana\n\n## Winlogbeat\n\nWinlogbeatWindowsWindowsElasticsearchLogstash\n\n#### Windows(Channel)\n\nWindowsWindows(4624),(4625),USB(4663)(11707)WinlogBeatElasticsearch\n![Windows(Channel)](https://static-www.elastic.co/assets/blt1d5fc2155a06db09/winlogbeat-diagram.jpg?q=891)\n\n#### ELK\nWinlogbeatELK StackELKLogstashElasticsearchKibana\n\n## Heartbeat\n\nHeartbeat (URL**Heartbeat**) ELK Stack\n\n#### \n\nHeartbeatHeartbeat\n\n#### PingPing\n\nHeartbeatICMP,TCP,HTTPpingTLSauthentication (proxies)DNS(:You can monitor all the hosts behind a load-balanced server thanks to simple DNS resolution)\n\n#### \n\nHeartbeat(:Heartbeat makes it easy to automate the process of adding and removing monitoring targets via a simple, file-based interface.)\n\n#### ELK\n\nHeartbeatELK StackELKLogstashElasticsearchKibana","source":"_posts/elk-stack-beats.md","raw":"---\ntitle: ELK StackBeats\ndate: 2017-03-02 18:55:39\ntags: [elk,elkstack,beats]\ncategories: [elkstasck]\n---\n\nBeats ELK StackLogstashElasticsearch\n<!-- more -->\n## Filebeat\n\nFilebeatFilebeat\n\n####  \nfilebeat${filebeat_home}\\data\\registry\n#### logstashelasticsearch\nFilebeat(backpressure-sensitive)logstashFilebeat-logstaFilebeat\n![Filebeat](https://static-www.elastic.co/assets/blt203883a0718cdc5a/filebeat-diagram.png?q=891)\n\n## Metricbeat\n\nMetricbeatCPURedisnginx\n\n#### \n\nLinuxWindowsMacMetricbeatcpuIOIO\n![](https://static-www.elastic.co/assets/bltcaef5fe4015417d6/product-metricbeat-1.gif?q=891)\n\n#### \nApache, NGINX, MongoDB, MySQL, PostgreSQL, Redis, and ZooKeeper\n![](https://static-www.elastic.co/assets/blt53458fcf0602cad1/metricbeat-logos-4.svg?q=891)\n\n#### \nDockerMetricbeatproccgroupsDockerDocker API\n\n#### ELK\nMetricbeatsELK StackELKLogstashElasticsearchKibana\n\n## Packetbeat\n\nPacketbeatwiresharkfiddlerChromedev toolsNetworkPacketbeatLogstashElasticsearch\n\n#### \n\nPacketbeat HTTPPacketbeat\n\n#### \n\nPacketbeat\n![](https://static-www.elastic.co/assets/bltbc6a3f306a97dd20/packetbeat-logo-4.svg?q=891)\n\n#### \nPacketbeat----jsonElasticsearch\n![](https://static-www.elastic.co/assets/bltd9ea7151b811b1c6/packetbeat-monitoring-steps3.svg?q=891)\n\n#### ELK\nPacketbeatELK StackELKLogstashElasticsearchKibana\n\n## Winlogbeat\n\nWinlogbeatWindowsWindowsElasticsearchLogstash\n\n#### Windows(Channel)\n\nWindowsWindows(4624),(4625),USB(4663)(11707)WinlogBeatElasticsearch\n![Windows(Channel)](https://static-www.elastic.co/assets/blt1d5fc2155a06db09/winlogbeat-diagram.jpg?q=891)\n\n#### ELK\nWinlogbeatELK StackELKLogstashElasticsearchKibana\n\n## Heartbeat\n\nHeartbeat (URL**Heartbeat**) ELK Stack\n\n#### \n\nHeartbeatHeartbeat\n\n#### PingPing\n\nHeartbeatICMP,TCP,HTTPpingTLSauthentication (proxies)DNS(:You can monitor all the hosts behind a load-balanced server thanks to simple DNS resolution)\n\n#### \n\nHeartbeat(:Heartbeat makes it easy to automate the process of adding and removing monitoring targets via a simple, file-based interface.)\n\n#### ELK\n\nHeartbeatELK StackELKLogstashElasticsearchKibana","slug":"elk-stack-beats","published":1,"updated":"2017-03-02T10:57:41.760Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbnw0005vkdolybxxix5","content":"<p>Beats ELK StackLogstashElasticsearch<br><a id=\"more\"></a></p>\n<h2 id=\"Filebeat\"><a href=\"#Filebeat\" class=\"headerlink\" title=\"Filebeat\"></a>Filebeat</h2><p>FilebeatFilebeat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>filebeat${filebeat_home}\\data\\registry</p>\n<h4 id=\"logstashelasticsearch\"><a href=\"#logstashelasticsearch\" class=\"headerlink\" title=\"logstashelasticsearch\"></a>logstashelasticsearch</h4><p>Filebeat(backpressure-sensitive)logstashFilebeat-logstaFilebeat<br><img src=\"https://static-www.elastic.co/assets/blt203883a0718cdc5a/filebeat-diagram.png?q=891\" alt=\"Filebeat\"></p>\n<h2 id=\"Metricbeat\"><a href=\"#Metricbeat\" class=\"headerlink\" title=\"Metricbeat\"></a>Metricbeat</h2><p>MetricbeatCPURedisnginx</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>LinuxWindowsMacMetricbeatcpuIOIO<br><img src=\"https://static-www.elastic.co/assets/bltcaef5fe4015417d6/product-metricbeat-1.gif?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Apache, NGINX, MongoDB, MySQL, PostgreSQL, Redis, and ZooKeeper<br><img src=\"https://static-www.elastic.co/assets/blt53458fcf0602cad1/metricbeat-logos-4.svg?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DockerMetricbeatproccgroupsDockerDocker API</p>\n<h4 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>MetricbeatsELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Packetbeat\"><a href=\"#Packetbeat\" class=\"headerlink\" title=\"Packetbeat\"></a>Packetbeat</h2><p>PacketbeatwiresharkfiddlerChromedev toolsNetworkPacketbeatLogstashElasticsearch</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat HTTPPacketbeat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat<br><img src=\"https://static-www.elastic.co/assets/bltbc6a3f306a97dd20/packetbeat-logo-4.svg?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat----jsonElasticsearch<br><img src=\"https://static-www.elastic.co/assets/bltd9ea7151b811b1c6/packetbeat-monitoring-steps3.svg?q=891\" alt=\"\"></p>\n<h4 id=\"ELK-1\"><a href=\"#ELK-1\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>PacketbeatELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Winlogbeat\"><a href=\"#Winlogbeat\" class=\"headerlink\" title=\"Winlogbeat\"></a>Winlogbeat</h2><p>WinlogbeatWindowsWindowsElasticsearchLogstash</p>\n<h4 id=\"Windows-Channel-\"><a href=\"#Windows-Channel-\" class=\"headerlink\" title=\"Windows(Channel)\"></a>Windows(Channel)</h4><p>WindowsWindows(4624),(4625),USB(4663)(11707)WinlogBeatElasticsearch<br><img src=\"https://static-www.elastic.co/assets/blt1d5fc2155a06db09/winlogbeat-diagram.jpg?q=891\" alt=\"Windows(Channel)\"></p>\n<h4 id=\"ELK-2\"><a href=\"#ELK-2\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>WinlogbeatELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h2><p>Heartbeat (URL<strong>Heartbeat</strong>) ELK Stack</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>HeartbeatHeartbeat</p>\n<h4 id=\"PingPing\"><a href=\"#PingPing\" class=\"headerlink\" title=\"PingPing\"></a>PingPing</h4><p>HeartbeatICMP,TCP,HTTPpingTLSauthentication (proxies)DNS(:You can monitor all the hosts behind a load-balanced server thanks to simple DNS resolution)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Heartbeat(:Heartbeat makes it easy to automate the process of adding and removing monitoring targets via a simple, file-based interface.)</p>\n<h4 id=\"ELK-3\"><a href=\"#ELK-3\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>HeartbeatELK StackELKLogstashElasticsearchKibana</p>\n","excerpt":"<p>Beats ELK StackLogstashElasticsearch<br>","more":"</p>\n<h2 id=\"Filebeat\"><a href=\"#Filebeat\" class=\"headerlink\" title=\"Filebeat\"></a>Filebeat</h2><p>FilebeatFilebeat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>filebeat${filebeat_home}\\data\\registry</p>\n<h4 id=\"logstashelasticsearch\"><a href=\"#logstashelasticsearch\" class=\"headerlink\" title=\"logstashelasticsearch\"></a>logstashelasticsearch</h4><p>Filebeat(backpressure-sensitive)logstashFilebeat-logstaFilebeat<br><img src=\"https://static-www.elastic.co/assets/blt203883a0718cdc5a/filebeat-diagram.png?q=891\" alt=\"Filebeat\"></p>\n<h2 id=\"Metricbeat\"><a href=\"#Metricbeat\" class=\"headerlink\" title=\"Metricbeat\"></a>Metricbeat</h2><p>MetricbeatCPURedisnginx</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>LinuxWindowsMacMetricbeatcpuIOIO<br><img src=\"https://static-www.elastic.co/assets/bltcaef5fe4015417d6/product-metricbeat-1.gif?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Apache, NGINX, MongoDB, MySQL, PostgreSQL, Redis, and ZooKeeper<br><img src=\"https://static-www.elastic.co/assets/blt53458fcf0602cad1/metricbeat-logos-4.svg?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DockerMetricbeatproccgroupsDockerDocker API</p>\n<h4 id=\"ELK\"><a href=\"#ELK\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>MetricbeatsELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Packetbeat\"><a href=\"#Packetbeat\" class=\"headerlink\" title=\"Packetbeat\"></a>Packetbeat</h2><p>PacketbeatwiresharkfiddlerChromedev toolsNetworkPacketbeatLogstashElasticsearch</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat HTTPPacketbeat</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat<br><img src=\"https://static-www.elastic.co/assets/bltbc6a3f306a97dd20/packetbeat-logo-4.svg?q=891\" alt=\"\"></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Packetbeat----jsonElasticsearch<br><img src=\"https://static-www.elastic.co/assets/bltd9ea7151b811b1c6/packetbeat-monitoring-steps3.svg?q=891\" alt=\"\"></p>\n<h4 id=\"ELK-1\"><a href=\"#ELK-1\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>PacketbeatELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Winlogbeat\"><a href=\"#Winlogbeat\" class=\"headerlink\" title=\"Winlogbeat\"></a>Winlogbeat</h2><p>WinlogbeatWindowsWindowsElasticsearchLogstash</p>\n<h4 id=\"Windows-Channel-\"><a href=\"#Windows-Channel-\" class=\"headerlink\" title=\"Windows(Channel)\"></a>Windows(Channel)</h4><p>WindowsWindows(4624),(4625),USB(4663)(11707)WinlogBeatElasticsearch<br><img src=\"https://static-www.elastic.co/assets/blt1d5fc2155a06db09/winlogbeat-diagram.jpg?q=891\" alt=\"Windows(Channel)\"></p>\n<h4 id=\"ELK-2\"><a href=\"#ELK-2\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>WinlogbeatELK StackELKLogstashElasticsearchKibana</p>\n<h2 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h2><p>Heartbeat (URL<strong>Heartbeat</strong>) ELK Stack</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>HeartbeatHeartbeat</p>\n<h4 id=\"PingPing\"><a href=\"#PingPing\" class=\"headerlink\" title=\"PingPing\"></a>PingPing</h4><p>HeartbeatICMP,TCP,HTTPpingTLSauthentication (proxies)DNS(:You can monitor all the hosts behind a load-balanced server thanks to simple DNS resolution)</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Heartbeat(:Heartbeat makes it easy to automate the process of adding and removing monitoring targets via a simple, file-based interface.)</p>\n<h4 id=\"ELK-3\"><a href=\"#ELK-3\" class=\"headerlink\" title=\"ELK\"></a>ELK</h4><p>HeartbeatELK StackELKLogstashElasticsearchKibana</p>"},{"title":"hexo","date":"2017-02-03T08:07:16.000Z","_content":"github pages\n\n<!-- more -->\n\n## \n### Nodejs\n[Nodejs](http://www.runoob.com/nodejs/nodejs-install-setup.html)\n\nc, `npm config ls -l` ,,  `; ...` ,\n\n```bash\n\n; cli configs\nlong = true\nscope = \"\"\nuser-agent = \"npm/4.0.5 node/v7.4.0 win32 x64\"\n\n; builtin config undefined\n; prefix = \"C:\\\\Users\\\\{userName}\\\\AppData\\\\Roaming\\\\npm\" (overridden)\n\n\n; cache = \"C:\\\\Users\\\\{userName}\\\\AppData\\\\Roaming\\\\npm-cache\" (overridden)\ncache-lock-retries = 10\ncache-lock-stale = 60000\ncache-lock-wait = 10000\ncache-max = null\n\n```\n\n\n\n```bash\n\nnpm config set cache \"${NodejsHome}\\node_cache\" # ${NodejsHome}\n\nnpm config set prefix \"${NodejsHome}\"\n\n```\n\n`npm config set prefix`  `npm install -g xxx` (`Path`)\n\n, [npm](http://npm.taobao.org/)\n\n```bash\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n```\n\n,`npm install``cnpm install`\n\n\n\n### Git\n\n: [http://git-scm.com/download/](http://git-scm.com/download/)\n\n### Hexo\n\n```bash\n\ncd d:\\blog # \n\ncnpm install hexo-cli -g # hexo\n\nhexo init # (hexo init blog blog)\n\ncnpm install # npm\n\nhexo g # \n\nhexo s # ,http://localhost:4000/\n\n```\n\n [http://localhost:4000/](http://localhost:4000/) blog\n\n```bash\n\n# \n\nhexo n == hexo new\n\nhexo g == hexo generate\n\nhexo s == hexo server\n\nhexo d == hexo deploy\n\n# \nhexo d -g # \n\nhexo s -g # \n\n```\n\nwindowsgit-bash.exe\n\n### GitHub \n\n#### rsa\n\n```bash\n\nssh-keygen\n\n# \nEnter file in which to save the key (/c/Users/{userName}/.ssh/id_rsa): # rsakey,id_rsa\nEnter passphrase (empty for no passphrase): # \nEnter same passphrase again: #\n\n```\n\n####  ~/.ssh/id_rsa.pub \n\n```\nssh-rsa\n\nxxxx key xxxxxx  userName@email\n\n```\n\n#### github ssh key\n\n ->settings->Personal settings->SSH and GPG keys->New SSH key->Title ->Key ssh-rsa ->Add SSH key\n\n#### \n\n  + ->New repository->Repository name ${userName}.github.io ${userName}->Create repository\n\n### github\n\n#### github\n\n```bash\n\ngit init # \n\ngit add . # \n\ngit commit -m '' # message\n\ngit checkout -b blog-source # , travis-ci \n\ngit remote add origin git@github.com:${userName}/${userName}.github.io.git #   ${userName} \n\ngit push origin blog-source:blog-source # github\n\n```\n\n####  `.travis.yml` \n\n```yml\nlanguage: node_js\nnode_js: stable\n\n# S: Build Lifecycle\ninstall:\n  - npm install\n\n\nbefore_script:\n  - npm install hexo-helper-qrcode --save\n  - npm install hexo-generator-feed --save\n\nscript:\n  - hexo g\n\nafter_script:\n  - cd ./public\n  # ,CNAME\n  - if [ $MY_DOMAIN ]; then echo ${MY_DOMAIN} > CNAME; fi\n  - git init\n  - git config user.name \"${userName}\"\n  - git config user.email \"${email}\"\n  - git add .\n  - git commit -m \"Update docs\"\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" master:master\n\nbranches:\n  only:\n    - blog-source\nenv:\n global:\n   - GH_REF: github.com/${userName}/${userName}.github.io.git\n   # \n   - MY_DOMAIN: anjia.ml\n```\n\n${userName}${email}\n\n [-Travis CIHexoGithub](http://www.jianshu.com/p/e22c13d85659)\n\ntravis\n\n### https \n[ Github Pages  HTTPS  HTTP/2 ](https://zhuanlan.zhihu.com/p/22667528)\n\n","source":"_posts/hexo-github-pages-blog.md","raw":"title: hexo\ndate: 2017-02-03 16:07:16\ntags: [blog,hexo]\ncategories: []\n---\ngithub pages\n\n<!-- more -->\n\n## \n### Nodejs\n[Nodejs](http://www.runoob.com/nodejs/nodejs-install-setup.html)\n\nc, `npm config ls -l` ,,  `; ...` ,\n\n```bash\n\n; cli configs\nlong = true\nscope = \"\"\nuser-agent = \"npm/4.0.5 node/v7.4.0 win32 x64\"\n\n; builtin config undefined\n; prefix = \"C:\\\\Users\\\\{userName}\\\\AppData\\\\Roaming\\\\npm\" (overridden)\n\n\n; cache = \"C:\\\\Users\\\\{userName}\\\\AppData\\\\Roaming\\\\npm-cache\" (overridden)\ncache-lock-retries = 10\ncache-lock-stale = 60000\ncache-lock-wait = 10000\ncache-max = null\n\n```\n\n\n\n```bash\n\nnpm config set cache \"${NodejsHome}\\node_cache\" # ${NodejsHome}\n\nnpm config set prefix \"${NodejsHome}\"\n\n```\n\n`npm config set prefix`  `npm install -g xxx` (`Path`)\n\n, [npm](http://npm.taobao.org/)\n\n```bash\n\nnpm install -g cnpm --registry=https://registry.npm.taobao.org\n\n```\n\n,`npm install``cnpm install`\n\n\n\n### Git\n\n: [http://git-scm.com/download/](http://git-scm.com/download/)\n\n### Hexo\n\n```bash\n\ncd d:\\blog # \n\ncnpm install hexo-cli -g # hexo\n\nhexo init # (hexo init blog blog)\n\ncnpm install # npm\n\nhexo g # \n\nhexo s # ,http://localhost:4000/\n\n```\n\n [http://localhost:4000/](http://localhost:4000/) blog\n\n```bash\n\n# \n\nhexo n == hexo new\n\nhexo g == hexo generate\n\nhexo s == hexo server\n\nhexo d == hexo deploy\n\n# \nhexo d -g # \n\nhexo s -g # \n\n```\n\nwindowsgit-bash.exe\n\n### GitHub \n\n#### rsa\n\n```bash\n\nssh-keygen\n\n# \nEnter file in which to save the key (/c/Users/{userName}/.ssh/id_rsa): # rsakey,id_rsa\nEnter passphrase (empty for no passphrase): # \nEnter same passphrase again: #\n\n```\n\n####  ~/.ssh/id_rsa.pub \n\n```\nssh-rsa\n\nxxxx key xxxxxx  userName@email\n\n```\n\n#### github ssh key\n\n ->settings->Personal settings->SSH and GPG keys->New SSH key->Title ->Key ssh-rsa ->Add SSH key\n\n#### \n\n  + ->New repository->Repository name ${userName}.github.io ${userName}->Create repository\n\n### github\n\n#### github\n\n```bash\n\ngit init # \n\ngit add . # \n\ngit commit -m '' # message\n\ngit checkout -b blog-source # , travis-ci \n\ngit remote add origin git@github.com:${userName}/${userName}.github.io.git #   ${userName} \n\ngit push origin blog-source:blog-source # github\n\n```\n\n####  `.travis.yml` \n\n```yml\nlanguage: node_js\nnode_js: stable\n\n# S: Build Lifecycle\ninstall:\n  - npm install\n\n\nbefore_script:\n  - npm install hexo-helper-qrcode --save\n  - npm install hexo-generator-feed --save\n\nscript:\n  - hexo g\n\nafter_script:\n  - cd ./public\n  # ,CNAME\n  - if [ $MY_DOMAIN ]; then echo ${MY_DOMAIN} > CNAME; fi\n  - git init\n  - git config user.name \"${userName}\"\n  - git config user.email \"${email}\"\n  - git add .\n  - git commit -m \"Update docs\"\n  - git push --force --quiet \"https://${GH_TOKEN}@${GH_REF}\" master:master\n\nbranches:\n  only:\n    - blog-source\nenv:\n global:\n   - GH_REF: github.com/${userName}/${userName}.github.io.git\n   # \n   - MY_DOMAIN: anjia.ml\n```\n\n${userName}${email}\n\n [-Travis CIHexoGithub](http://www.jianshu.com/p/e22c13d85659)\n\ntravis\n\n### https \n[ Github Pages  HTTPS  HTTP/2 ](https://zhuanlan.zhihu.com/p/22667528)\n\n","slug":"hexo-github-pages-blog","published":1,"updated":"2017-02-08T14:16:14.903Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbo30006vkdopsselta8","content":"<p>github pages</p>\n<a id=\"more\"></a>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Nodejs\"><a href=\"#Nodejs\" class=\"headerlink\" title=\"Nodejs\"></a>Nodejs</h3><p><a href=\"http://www.runoob.com/nodejs/nodejs-install-setup.html\" target=\"_blank\" rel=\"external\">Nodejs</a></p>\n<p>c, <code>npm config ls -l</code> ,,  <code>; ...</code> ,</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">; cli configs</div><div class=\"line\">long = <span class=\"literal\">true</span></div><div class=\"line\">scope = <span class=\"string\">\"\"</span></div><div class=\"line\">user-agent = <span class=\"string\">\"npm/4.0.5 node/v7.4.0 win32 x64\"</span></div><div class=\"line\"></div><div class=\"line\">; <span class=\"built_in\">builtin</span> config undefined</div><div class=\"line\">; prefix = <span class=\"string\">\"C:\\\\Users\\\\&#123;userName&#125;\\\\AppData\\\\Roaming\\\\npm\"</span> (overridden)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">; cache = <span class=\"string\">\"C:\\\\Users\\\\&#123;userName&#125;\\\\AppData\\\\Roaming\\\\npm-cache\"</span> (overridden)</div><div class=\"line\">cache-lock-retries = 10</div><div class=\"line\">cache-lock-stale = 60000</div><div class=\"line\">cache-lock-wait = 10000</div><div class=\"line\">cache-max = null</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">npm config <span class=\"built_in\">set</span> cache <span class=\"string\">\"<span class=\"variable\">$&#123;NodejsHome&#125;</span>\\node_cache\"</span> <span class=\"comment\"># $&#123;NodejsHome&#125;</span></div><div class=\"line\"></div><div class=\"line\">npm config <span class=\"built_in\">set</span> prefix <span class=\"string\">\"<span class=\"variable\">$&#123;NodejsHome&#125;</span>\"</span></div></pre></td></tr></table></figure>\n<p><code>npm config set prefix</code>  <code>npm install -g xxx</code> (<code>Path</code>)</p>\n<p>, <a href=\"http://npm.taobao.org/\" target=\"_blank\" rel=\"external\">npm</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>\n<p>,<code>npm install</code><code>cnpm install</code></p>\n<h3 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h3><p>: <a href=\"http://git-scm.com/download/\" target=\"_blank\" rel=\"external\">http://git-scm.com/download/</a></p>\n<h3 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">cd</span> d:\\blog <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">cnpm install hexo-cli -g <span class=\"comment\"># hexo</span></div><div class=\"line\"></div><div class=\"line\">hexo init <span class=\"comment\"># (hexo init blog blog)</span></div><div class=\"line\"></div><div class=\"line\">cnpm install <span class=\"comment\"># npm</span></div><div class=\"line\"></div><div class=\"line\">hexo g <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo s <span class=\"comment\"># ,http://localhost:4000/</span></div></pre></td></tr></table></figure>\n<p> <a href=\"http://localhost:4000/\" target=\"_blank\" rel=\"external\">http://localhost:4000/</a> blog</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo n == hexo new</div><div class=\"line\"></div><div class=\"line\">hexo g == hexo generate</div><div class=\"line\"></div><div class=\"line\">hexo s == hexo server</div><div class=\"line\"></div><div class=\"line\">hexo d == hexo deploy</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">hexo d -g <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo s -g <span class=\"comment\"># </span></div></pre></td></tr></table></figure>\n<p>windowsgit-bash.exe</p>\n<h3 id=\"GitHub-\"><a href=\"#GitHub-\" class=\"headerlink\" title=\"GitHub \"></a>GitHub </h3><h4 id=\"rsa\"><a href=\"#rsa\" class=\"headerlink\" title=\"rsa\"></a>rsa</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">ssh-keygen</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">Enter file <span class=\"keyword\">in</span> <span class=\"built_in\">which</span> to save the key (/c/Users/&#123;userName&#125;/.ssh/id_rsa): <span class=\"comment\"># rsakey,id_rsa</span></div><div class=\"line\">Enter passphrase (empty <span class=\"keyword\">for</span> no passphrase): <span class=\"comment\"># </span></div><div class=\"line\">Enter same passphrase again: <span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<h4 id=\"-ssh-id-rsa-pub-\"><a href=\"#-ssh-id-rsa-pub-\" class=\"headerlink\" title=\" ~/.ssh/id_rsa.pub \"></a> ~/.ssh/id_rsa.pub </h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">ssh-rsa</div><div class=\"line\"></div><div class=\"line\">xxxx key xxxxxx  userName@email</div></pre></td></tr></table></figure>\n<h4 id=\"github-ssh-key\"><a href=\"#github-ssh-key\" class=\"headerlink\" title=\"github ssh key\"></a>github ssh key</h4><p> -&gt;settings-&gt;Personal settings-&gt;SSH and GPG keys-&gt;New SSH key-&gt;Title -&gt;Key ssh-rsa -&gt;Add SSH key</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  + -&gt;New repository-&gt;Repository name ${userName}.github.io ${userName}-&gt;Create repository</p>\n<h3 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h3><h4 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">git init <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">git add . <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">git commit -m <span class=\"string\">''</span> <span class=\"comment\"># message</span></div><div class=\"line\"></div><div class=\"line\">git checkout -b blog-source <span class=\"comment\"># , travis-ci </span></div><div class=\"line\"></div><div class=\"line\">git remote add origin git@github.com:<span class=\"variable\">$&#123;userName&#125;</span>/<span class=\"variable\">$&#123;userName&#125;</span>.github.io.git <span class=\"comment\">#   $&#123;userName&#125; </span></div><div class=\"line\"></div><div class=\"line\">git push origin blog-source:blog-source <span class=\"comment\"># github</span></div></pre></td></tr></table></figure>\n<h4 id=\"-travis-yml-\"><a href=\"#-travis-yml-\" class=\"headerlink\" title=\" .travis.yml \"></a> <code>.travis.yml</code> </h4><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">language:</span> node_js</div><div class=\"line\"><span class=\"attr\">node_js:</span> stable</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># S: Build Lifecycle</span></div><div class=\"line\"><span class=\"attr\">install:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> npm install</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">before_script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> npm install hexo-helper-qrcode --save</div><div class=\"line\"><span class=\"bullet\">  -</span> npm install hexo-generator-feed --save</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> hexo g</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">after_script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> cd ./public</div><div class=\"line\">  <span class=\"comment\"># ,CNAME</span></div><div class=\"line\"><span class=\"bullet\">  -</span> if [ $MY_DOMAIN ]; then echo $&#123;MY_DOMAIN&#125; &gt; CNAME; fi</div><div class=\"line\"><span class=\"bullet\">  -</span> git init</div><div class=\"line\"><span class=\"bullet\">  -</span> git config user.name <span class=\"string\">\"$&#123;userName&#125;\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git config user.email <span class=\"string\">\"$&#123;email&#125;\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git add .</div><div class=\"line\"><span class=\"bullet\">  -</span> git commit -m <span class=\"string\">\"Update docs\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git push --force --quiet <span class=\"string\">\"https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;\"</span> master:master</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">branches:</span></div><div class=\"line\"><span class=\"attr\">  only:</span></div><div class=\"line\"><span class=\"bullet\">    -</span> blog-source</div><div class=\"line\"><span class=\"attr\">env:</span></div><div class=\"line\"><span class=\"attr\"> global:</span></div><div class=\"line\"><span class=\"attr\">   - GH_REF:</span> github.com/$&#123;userName&#125;/$&#123;userName&#125;.github.io.git</div><div class=\"line\">   <span class=\"comment\"># </span></div><div class=\"line\"><span class=\"attr\">   - MY_DOMAIN:</span> anjia.ml</div></pre></td></tr></table></figure>\n<p>${userName}${email}</p>\n<p> <a href=\"http://www.jianshu.com/p/e22c13d85659\" target=\"_blank\" rel=\"external\">-Travis CIHexoGithub</a></p>\n<p>travis</p>\n<h3 id=\"https-\"><a href=\"#https-\" class=\"headerlink\" title=\"https \"></a>https </h3><p><a href=\"https://zhuanlan.zhihu.com/p/22667528\" target=\"_blank\" rel=\"external\"> Github Pages  HTTPS  HTTP/2 </a></p>\n","excerpt":"<p>github pages</p>","more":"<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"Nodejs\"><a href=\"#Nodejs\" class=\"headerlink\" title=\"Nodejs\"></a>Nodejs</h3><p><a href=\"http://www.runoob.com/nodejs/nodejs-install-setup.html\">Nodejs</a></p>\n<p>c, <code>npm config ls -l</code> ,,  <code>; ...</code> ,</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">; cli configs</div><div class=\"line\">long = <span class=\"literal\">true</span></div><div class=\"line\">scope = <span class=\"string\">\"\"</span></div><div class=\"line\">user-agent = <span class=\"string\">\"npm/4.0.5 node/v7.4.0 win32 x64\"</span></div><div class=\"line\"></div><div class=\"line\">; <span class=\"built_in\">builtin</span> config undefined</div><div class=\"line\">; prefix = <span class=\"string\">\"C:\\\\Users\\\\&#123;userName&#125;\\\\AppData\\\\Roaming\\\\npm\"</span> (overridden)</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\">; cache = <span class=\"string\">\"C:\\\\Users\\\\&#123;userName&#125;\\\\AppData\\\\Roaming\\\\npm-cache\"</span> (overridden)</div><div class=\"line\">cache-lock-retries = 10</div><div class=\"line\">cache-lock-stale = 60000</div><div class=\"line\">cache-lock-wait = 10000</div><div class=\"line\">cache-max = null</div></pre></td></tr></table></figure>\n<p></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">npm config <span class=\"built_in\">set</span> cache <span class=\"string\">\"<span class=\"variable\">$&#123;NodejsHome&#125;</span>\\node_cache\"</span> <span class=\"comment\"># $&#123;NodejsHome&#125;</span></div><div class=\"line\"></div><div class=\"line\">npm config <span class=\"built_in\">set</span> prefix <span class=\"string\">\"<span class=\"variable\">$&#123;NodejsHome&#125;</span>\"</span></div></pre></td></tr></table></figure>\n<p><code>npm config set prefix</code>  <code>npm install -g xxx</code> (<code>Path</code>)</p>\n<p>, <a href=\"http://npm.taobao.org/\">npm</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">npm install -g cnpm --registry=https://registry.npm.taobao.org</div></pre></td></tr></table></figure>\n<p>,<code>npm install</code><code>cnpm install</code></p>\n<h3 id=\"Git\"><a href=\"#Git\" class=\"headerlink\" title=\"Git\"></a>Git</h3><p>: <a href=\"http://git-scm.com/download/\">http://git-scm.com/download/</a></p>\n<h3 id=\"Hexo\"><a href=\"#Hexo\" class=\"headerlink\" title=\"Hexo\"></a>Hexo</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"built_in\">cd</span> d:\\blog <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">cnpm install hexo-cli -g <span class=\"comment\"># hexo</span></div><div class=\"line\"></div><div class=\"line\">hexo init <span class=\"comment\"># (hexo init blog blog)</span></div><div class=\"line\"></div><div class=\"line\">cnpm install <span class=\"comment\"># npm</span></div><div class=\"line\"></div><div class=\"line\">hexo g <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo s <span class=\"comment\"># ,http://localhost:4000/</span></div></pre></td></tr></table></figure>\n<p> <a href=\"http://localhost:4000/\">http://localhost:4000/</a> blog</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo n == hexo new</div><div class=\"line\"></div><div class=\"line\">hexo g == hexo generate</div><div class=\"line\"></div><div class=\"line\">hexo s == hexo server</div><div class=\"line\"></div><div class=\"line\">hexo d == hexo deploy</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">hexo d -g <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">hexo s -g <span class=\"comment\"># </span></div></pre></td></tr></table></figure>\n<p>windowsgit-bash.exe</p>\n<h3 id=\"GitHub-\"><a href=\"#GitHub-\" class=\"headerlink\" title=\"GitHub \"></a>GitHub </h3><h4 id=\"rsa\"><a href=\"#rsa\" class=\"headerlink\" title=\"rsa\"></a>rsa</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">ssh-keygen</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">Enter file <span class=\"keyword\">in</span> <span class=\"built_in\">which</span> to save the key (/c/Users/&#123;userName&#125;/.ssh/id_rsa): <span class=\"comment\"># rsakey,id_rsa</span></div><div class=\"line\">Enter passphrase (empty <span class=\"keyword\">for</span> no passphrase): <span class=\"comment\"># </span></div><div class=\"line\">Enter same passphrase again: <span class=\"comment\">#</span></div></pre></td></tr></table></figure>\n<h4 id=\"-ssh-id-rsa-pub-\"><a href=\"#-ssh-id-rsa-pub-\" class=\"headerlink\" title=\" ~/.ssh/id_rsa.pub \"></a> ~/.ssh/id_rsa.pub </h4><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">ssh-rsa</div><div class=\"line\"></div><div class=\"line\">xxxx key xxxxxx  userName@email</div></pre></td></tr></table></figure>\n<h4 id=\"github-ssh-key\"><a href=\"#github-ssh-key\" class=\"headerlink\" title=\"github ssh key\"></a>github ssh key</h4><p> -&gt;settings-&gt;Personal settings-&gt;SSH and GPG keys-&gt;New SSH key-&gt;Title -&gt;Key ssh-rsa -&gt;Add SSH key</p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>  + -&gt;New repository-&gt;Repository name ${userName}.github.io ${userName}-&gt;Create repository</p>\n<h3 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h3><h4 id=\"github\"><a href=\"#github\" class=\"headerlink\" title=\"github\"></a>github</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">git init <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">git add . <span class=\"comment\"># </span></div><div class=\"line\"></div><div class=\"line\">git commit -m <span class=\"string\">''</span> <span class=\"comment\"># message</span></div><div class=\"line\"></div><div class=\"line\">git checkout -b blog-source <span class=\"comment\"># , travis-ci </span></div><div class=\"line\"></div><div class=\"line\">git remote add origin git@github.com:<span class=\"variable\">$&#123;userName&#125;</span>/<span class=\"variable\">$&#123;userName&#125;</span>.github.io.git <span class=\"comment\">#   $&#123;userName&#125; </span></div><div class=\"line\"></div><div class=\"line\">git push origin blog-source:blog-source <span class=\"comment\"># github</span></div></pre></td></tr></table></figure>\n<h4 id=\"-travis-yml-\"><a href=\"#-travis-yml-\" class=\"headerlink\" title=\" .travis.yml \"></a> <code>.travis.yml</code> </h4><figure class=\"highlight yml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">language:</span> node_js</div><div class=\"line\"><span class=\"attr\">node_js:</span> stable</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># S: Build Lifecycle</span></div><div class=\"line\"><span class=\"attr\">install:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> npm install</div><div class=\"line\"></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">before_script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> npm install hexo-helper-qrcode --save</div><div class=\"line\"><span class=\"bullet\">  -</span> npm install hexo-generator-feed --save</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> hexo g</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">after_script:</span></div><div class=\"line\"><span class=\"bullet\">  -</span> cd ./public</div><div class=\"line\">  <span class=\"comment\"># ,CNAME</span></div><div class=\"line\"><span class=\"bullet\">  -</span> if [ $MY_DOMAIN ]; then echo $&#123;MY_DOMAIN&#125; &gt; CNAME; fi</div><div class=\"line\"><span class=\"bullet\">  -</span> git init</div><div class=\"line\"><span class=\"bullet\">  -</span> git config user.name <span class=\"string\">\"$&#123;userName&#125;\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git config user.email <span class=\"string\">\"$&#123;email&#125;\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git add .</div><div class=\"line\"><span class=\"bullet\">  -</span> git commit -m <span class=\"string\">\"Update docs\"</span></div><div class=\"line\"><span class=\"bullet\">  -</span> git push --force --quiet <span class=\"string\">\"https://$&#123;GH_TOKEN&#125;@$&#123;GH_REF&#125;\"</span> master:master</div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">branches:</span></div><div class=\"line\"><span class=\"attr\">  only:</span></div><div class=\"line\"><span class=\"bullet\">    -</span> blog-source</div><div class=\"line\"><span class=\"attr\">env:</span></div><div class=\"line\"><span class=\"attr\"> global:</span></div><div class=\"line\"><span class=\"attr\">   - GH_REF:</span> github.com/$&#123;userName&#125;/$&#123;userName&#125;.github.io.git</div><div class=\"line\">   <span class=\"comment\"># </span></div><div class=\"line\"><span class=\"attr\">   - MY_DOMAIN:</span> anjia.ml</div></pre></td></tr></table></figure>\n<p>${userName}${email}</p>\n<p> <a href=\"http://www.jianshu.com/p/e22c13d85659\">-Travis CIHexoGithub</a></p>\n<p>travis</p>\n<h3 id=\"https-\"><a href=\"#https-\" class=\"headerlink\" title=\"https \"></a>https </h3><p><a href=\"https://zhuanlan.zhihu.com/p/22667528\"> Github Pages  HTTPS  HTTP/2 </a></p>"},{"title":"ElkStackHeartbeat()","date":"2017-03-02T17:20:16.000Z","_content":"\nHeartbeatMetricbeatMetricbeatHeartbeat\n\nHeartbeat\n\nHeartbeatPingDNSIP\n\nHeartbeathosts  10`9:00`~`17:00`\n\nHeartbeathosts\n- ICMP(IPV4/IPV6)`icmp`\n\n- TCP `tcp`TCP`tcp`(payload)(endpoint)\n\n- HTTP`http`http`http`\n\n`tcp``http`SSL/TLS\n\n# Heartbeat\n\nHeartbeat\n\n[][downloads]\n\n**deb(Debian/Ubuntu)**\n```bash\ncurl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-amd64.deb\nsudo dpkg -i heartbeat-5.2.2-amd64.deb\n```\n\n**rpm(Redhat / Centos / Fedora)**\n```bash\ncurl -L O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-x86_64.rpm\nsudo rpm -vi heartbeat-5.2.2-x86_64.rpm\n```\n\n**mac**\n```bash\ncurl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-darwin-x86_64.tar.gz\ntar xzvf heartbeat-5.2.2-darwin-x86_64.tar.gz\n```\n\n**windows**\n\n1. [][downloads] 32 `https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86.zip` 64`https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86_64.zip` `{version}`,`5.2.1`\n\n1. zip `D:\\Heartbeat`\n\n1. PowerShell(PowerShell****)xppowershell\n\n1. Windows\n```powershell\nPS > cd 'D:\\Heartbeat'\nPS D:\\Heartbeat> .\\install-service-heartbeat.ps1\n```\n\n!> xp[nssm][nssm],`-c D:\\Heartbeat\\heartbeat.yml  -path.home D:\\Heartbeat\\ -path.data D:\\Heartbeat\\`\n\n `heartbeat.exe -e -f heartbeat.yml`\n\n`net start heartbeat`(cmdpowershell(<kbd>Win</kbd>+<kbd>R</kbd>`services.msc`heartbeat)\n\n\n# Heartbeat\n`heartbeat.yml`heartbeat`heartbeat.full.yml`\n\nHeartbeatHeartbeatICMP,TCP HTTP  [][overview]\n\n#### (`-`) (yaml),Heartbeat`ICMP``TCP`\n\n```yaml\nheartbeat.monitors:\n- type: icmp\n  schedule: '*/5 * * * * * *'   #1\n  hosts: [\"myhost\"]\n- type: tcp\n  schedule: '@every 5s'         #2\n  hosts: [\"myhost:7\"]  # default TCP Echo Protocol\n  mode: any                     #3\n  check.send: \"Check\"\n  check.receive: \"Check\"\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://localhost:80/service/status\"]\n  check.response.status: 200\nheartbeat.scheduler:\n  limit: 10\n```\n\n1. ICMP(e.g. `10:00:00`,`10:00:05` ...) `schedule``cron`[this cronexpr implementation][cronexpr]\n\n2. TCP5Heartbeat`@every``conexpr`\n\n3. `mode`pingip`any`IPS(`all`) \n\n[][heartbeat-configuration-details]\n\n#### \n\n###### type\n- `icmp`(IPV4/IPV6)`icmp`\n\n- `tcp` `tcp`TCP`tcp`(payload)(endpoint)\n\n- `http``http`http`http`\n\n`tcp``http`SSL/TLS\n###### name\n\n\n###### enabled\nBooleantrue\n\n###### schedule\ncron\n\n###### ipv4\nBooleanhostipv4pintrue\n\n###### ipv6\nBooleanhostipv4pintrue\n\n###### mode\n`any``all`,`any``any`pingip`all`pingdnsip\n\n###### watch.poll_file\n****\n\nJSONHeartbeatHeartbeatheartbeat.ymljsonjosnheartbeat\n\nidjson(json)heartbeat`watch.poll_file`\n\n```yaml\nheartbeat.monitors:\n- type: tcp\n  schedule: '*/5 * * * * * *'\n  hosts: [\"myhost\"]\n  watch.poll_file:\n    path: {path.config}/monitors/dynamic.json\n    interval: 5s\n```\n    path\n\n        JSON\n\n    interval\n\n        \n\nJSON\n```javascript\n{\"hosts\": [\"myhost:1234\"], \"schedule\": \"*/15 * * * * * *\"}     #1\n{\"hosts\": [\"tls://otherhost:479\"], \"ssl.certificate_authorities\": [\"path/to/ca/file.pem\"]}      #2\n```\n\n1. heartbeat15\n2. heartbeatcaTLS\n\n##### ICMP\n\n`type``icmp`HeartbeatICMP(v4v6)\n\n###### hosts\nping\n\n###### wait\n1s\n\n##### TCP \n`type``tcp`tcp\n\n###### hosts\nping\n* `localhost` ip`ports`sslheartbeatssltlstcp\n* +`localhost:8080`heartbeatsslheartbeatssltlstcp\n* URL `scheme://<host>:[port]`\n    - `scheme`  `tcp`,`plain`,`ssl``tls``tcp``plain`heartbeattcpssl`tls``ssl`,heartbeatsslssl(windows)\n    - `host`\n    - `port`\n\n###### ports\n`hosts`ping 80,9200,5044\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [80, 9200, 5044]\n```\n\n###### check\n(payload)(payload)payload`hello message``banner`(: If receive is specified without send, no payload is sent, but the client expects to receive a payload in the form of a \"hello message\" or \"banner\" on connect.)\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [7]\n  check.send: 'Hello World'\n  check.receive: 'Hello World'\n```\n###### proxy_url\nsocks5\n```yaml\nproxy_url: socks5://user:password@socks5-proxy:2233\n```\n proxy_use_local_resolver\n\n###### proxy_use_local_resolver\nBooleanfalse\n\n###### ssl\nTLS/SSL`check`SSL/TLSTCP\n\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [80, 9200, 5044]\n  ssl:\n    certificate_authorities: ['/etc/ca.crt']\n    supported_protocols: [\"TLSv1.0\", \"TLSv1.1\", \"TLSv1.2\"]\n```\n\n##### HTTP\n`type``http`httphost\n\n###### urls\nURLs\n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://myhost:80\"]\n```\n###### proxy_url\nhttpurl`HTTP_PROXY`\n\n###### username\n403\n\n###### password\nusername\n\n###### ssl tcp ssl\n\n###### check()\n\n`request``response`\n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://myhost:80\"]\n  check.request.method: HEAD\n  check.response.status: 200\n```\n\n* `check.request` \n    - method - HTTP`HEAD`,`GET``POST`\n    - headers - \n    - body - (POST)\n\n* `check.response` \n    - status - `0``404`\n    - headers - header\n    - body - \n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"https://myhost:80\"]\ncheck.request:\n  method: GET\n  headers:\n    'X-API-Key': '12345-mykey-67890'\ncheck.response:\n  status: 200\n  body: '{\"status\": \"ok\"}'\n```\n\n##### Scheduler \n\n```yaml\nheartbeat.scheduler:\n  limit: 10\n  location: 'UTC-08:00'\n```\n`limit`1010IOIODNS\n\n###### limit\nHeartbeatIO001024Heartbeat`limit``ulimit`\n\n###### location\n `localtime`\n\n#### Elasticsearch\n```yaml\noutput.elasticsearch:\n  hosts: [\"192.168.1.42:9200\"]\n  template.name: \"heartbeat\"                #1\n  template.path: \"heartbeat.template.json\"  #2\n```\n1,2Elasticsearch[][heartbeat-template]\n\nLogstash[HeartbeatLogstash][config-heartbeat-logstash]\n\n*heartbeat`./heartbeat -configtest -e`*\n\n# Heartbeat\n\ndeb :\n```bash\nsudo /etc/init.d/ start\n```\n\nrpm :\n```bash\nsudo /etc/init.d/heartbeat start\n```\n\nmac :\n```bash\nsudo ./heartbeat -e -c heartbeat.yml -d \"publish\"\n```\n\nwin : ****\n```bash\nnet start heartbeat\n```\nWindowslog`${Heartbeat_home}\\Logs`\n\n*Heartbeat(logstash/elasticsearch)*\n\n# \n\n*`./heartbeat -h`*\n\n`-E <setting>=<value>`\n\n     `./heartbeat -c heartbeat.yml -E name=mybeat`\n\n`-N`\n\n    Beat\n\n`-c <file>`\n\n    heartbeat\n\n`configtest`\n\n    \n\n`-cpuprofile <output file>`\n\n    cpu\n\n`-d <selectors>`\n\n     `-d \"*\"``-d \"publish\"``\"publish\"`\n\n`-e`\n\n    syslog/filestderr\n\n`-httpprof [<host>]:<port>`\n\n    http\n\n`-memprofile <output file>`\n\n    \n\n`-path.config`\n\n    \n\n`-path.data`\n\n    data\n\n`-path.home`\n\n    \n\n`-path.logs`\n\n    \n\n`-v`\n\n    INFO\n\n`-version`\n\n    beat\n\n\n[logstash,redis][configuring-howto-heartbeat][Processors][configuration-processors][Exported Fields][exported-fields],[Securing Heartbeat][securing-heartbeat]\n\n\n# Heartbeat+ElastAlert \nElastAlert [][_elastalert] \n\n(pinghttp)Heartbeatup=true[common fields#_up][common_fields_up] \n\nElastAlert[change rule][change_rule] `example_rules/example_change.yaml`change ruleup/down (->/->)\n\n\n\n```yaml\n# Alert when some field changes between documents\n# This rule would alert on documents similar to the following:\n# {'username': 'bob', 'country_name': 'USA', '@timestamp': '2014-10-15T00:00:00'}\n# {'username': 'bob', 'country_name': 'Russia', '@timestamp': '2014-10-15T05:00:00'}\n# Because the user (query_key) bob logged in from different countries (compare_key) in the same day (timeframe)\n\n# (Optional)\n# Elasticsearch host\n# es_host: elasticsearch.example.com\n\n# (Optional)\n# Elasticsearch port\n# es_port: 14900\n\n# (Optional) Connect with SSL to Elasticsearch\n#use_ssl: True\n\n# (Optional) basic-auth username and password for elasticsearch\n#es_username: someusername\n#es_password: somepassword\n\n# (Required)\n# Rule name, must be unique\nname: heartbeat-monitor\n\n# (Required)\n# Type of alert.\n# the change rule will alert when a certain field changes in two documents within a timeframe\ntype: change\n\n# (Required)\n# Index to search, wildcard supported\nindex: heartbeat-*\n\n# (Required, change specific)\n# The field to look for changes in\ncompare_key: up\n\n# (Required, change specific)\n# Ignore documents without the compare_key (country_name) field\nignore_null: true\n\n# (Required, change specific)\n# The change must occur in two documents with the same query_key\nquery_key: monitor\n\n# (Required, change specific)\n# The value of compare_key must change in two events that are less than timeframe apart to trigger an alert\nnum_events: 1\ntimeframe:\n    minutes: 1\n\n# (Required)\n# The alert is use when a match is found\nalert:\n#- \"email\"\n#- \"debug\"\n- \"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"\n\n#->->->->CorpIDSecret\n#appid\ncorp_id: xxx\n#Secret\nsecret: xxx\n#->->id\n#id\nagent_id: xxx\n#\n#party_id: xxx\n#\n#user_id: xxx\n\ntag_id: xxx\n```\n\nelastalert[Pull request#926][pr][Issue#925][issues]  `elastalert\\ruletypes.py#L135` `not val` `val is None`[Issue#925][issues]\n\nHeartbeatElasticsearchElasticsearchElastalert`xx hits/xx hits`\n\n![snipaste20170303_134853.png](https://ooo.0o0.ooo/2017/03/03/58b9040175781.png)\n\n[downloads]: https://www.elastic.co/downloads/beats/heartbeat\n[nssm]: http://nssm.cc/download\n[overview]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-overview.html\n[cronexpr]: https://github.com/gorhill/cronexpr#implementation\n[heartbeat-configuration-details]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-configuration-details.html\n[config-heartbeat-logstash]: https://www.elastic.co/guide/en/beats/heartbeat/current/config-heartbeat-logstash.html\n[heartbeat-template]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-template.html\n[configuring-howto-heartbeat]: https://www.elastic.co/guide/en/beats/heartbeat/current/configuring-howto-heartbeat.html\n[exported-fields]: https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields.html\n[securing-heartbeat]: https://www.elastic.co/guide/en/beats/heartbeat/current/securing-heartbeat.html\n[configuration-processors]: https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-processors.html\n[_elastalert]: https://anjia.ml/2017/03/03/heartbeat/\n[change_rule]: https://elastalert.readthedocs.io/en/latest/ruletypes.html#change\n[common_fields_up]: https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields-common.html#_up\n[pr]: https://github.com/Yelp/elastalert/pull/926\n[issues]: https://github.com/Yelp/elastalert/issues/925\n","source":"_posts/heartbeat.md","raw":"---\ntitle: ElkStackHeartbeat()\ndate: 2017-03-03 01:20:16\ntags: [elk,elkstasck,Heartbeat]\ncategories: [elkstasck]\n---\n\nHeartbeatMetricbeatMetricbeatHeartbeat\n\nHeartbeat\n\nHeartbeatPingDNSIP\n\nHeartbeathosts  10`9:00`~`17:00`\n\nHeartbeathosts\n- ICMP(IPV4/IPV6)`icmp`\n\n- TCP `tcp`TCP`tcp`(payload)(endpoint)\n\n- HTTP`http`http`http`\n\n`tcp``http`SSL/TLS\n\n# Heartbeat\n\nHeartbeat\n\n[][downloads]\n\n**deb(Debian/Ubuntu)**\n```bash\ncurl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-amd64.deb\nsudo dpkg -i heartbeat-5.2.2-amd64.deb\n```\n\n**rpm(Redhat / Centos / Fedora)**\n```bash\ncurl -L O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-x86_64.rpm\nsudo rpm -vi heartbeat-5.2.2-x86_64.rpm\n```\n\n**mac**\n```bash\ncurl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-darwin-x86_64.tar.gz\ntar xzvf heartbeat-5.2.2-darwin-x86_64.tar.gz\n```\n\n**windows**\n\n1. [][downloads] 32 `https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86.zip` 64`https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86_64.zip` `{version}`,`5.2.1`\n\n1. zip `D:\\Heartbeat`\n\n1. PowerShell(PowerShell****)xppowershell\n\n1. Windows\n```powershell\nPS > cd 'D:\\Heartbeat'\nPS D:\\Heartbeat> .\\install-service-heartbeat.ps1\n```\n\n!> xp[nssm][nssm],`-c D:\\Heartbeat\\heartbeat.yml  -path.home D:\\Heartbeat\\ -path.data D:\\Heartbeat\\`\n\n `heartbeat.exe -e -f heartbeat.yml`\n\n`net start heartbeat`(cmdpowershell(<kbd>Win</kbd>+<kbd>R</kbd>`services.msc`heartbeat)\n\n\n# Heartbeat\n`heartbeat.yml`heartbeat`heartbeat.full.yml`\n\nHeartbeatHeartbeatICMP,TCP HTTP  [][overview]\n\n#### (`-`) (yaml),Heartbeat`ICMP``TCP`\n\n```yaml\nheartbeat.monitors:\n- type: icmp\n  schedule: '*/5 * * * * * *'   #1\n  hosts: [\"myhost\"]\n- type: tcp\n  schedule: '@every 5s'         #2\n  hosts: [\"myhost:7\"]  # default TCP Echo Protocol\n  mode: any                     #3\n  check.send: \"Check\"\n  check.receive: \"Check\"\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://localhost:80/service/status\"]\n  check.response.status: 200\nheartbeat.scheduler:\n  limit: 10\n```\n\n1. ICMP(e.g. `10:00:00`,`10:00:05` ...) `schedule``cron`[this cronexpr implementation][cronexpr]\n\n2. TCP5Heartbeat`@every``conexpr`\n\n3. `mode`pingip`any`IPS(`all`) \n\n[][heartbeat-configuration-details]\n\n#### \n\n###### type\n- `icmp`(IPV4/IPV6)`icmp`\n\n- `tcp` `tcp`TCP`tcp`(payload)(endpoint)\n\n- `http``http`http`http`\n\n`tcp``http`SSL/TLS\n###### name\n\n\n###### enabled\nBooleantrue\n\n###### schedule\ncron\n\n###### ipv4\nBooleanhostipv4pintrue\n\n###### ipv6\nBooleanhostipv4pintrue\n\n###### mode\n`any``all`,`any``any`pingip`all`pingdnsip\n\n###### watch.poll_file\n****\n\nJSONHeartbeatHeartbeatheartbeat.ymljsonjosnheartbeat\n\nidjson(json)heartbeat`watch.poll_file`\n\n```yaml\nheartbeat.monitors:\n- type: tcp\n  schedule: '*/5 * * * * * *'\n  hosts: [\"myhost\"]\n  watch.poll_file:\n    path: {path.config}/monitors/dynamic.json\n    interval: 5s\n```\n    path\n\n        JSON\n\n    interval\n\n        \n\nJSON\n```javascript\n{\"hosts\": [\"myhost:1234\"], \"schedule\": \"*/15 * * * * * *\"}     #1\n{\"hosts\": [\"tls://otherhost:479\"], \"ssl.certificate_authorities\": [\"path/to/ca/file.pem\"]}      #2\n```\n\n1. heartbeat15\n2. heartbeatcaTLS\n\n##### ICMP\n\n`type``icmp`HeartbeatICMP(v4v6)\n\n###### hosts\nping\n\n###### wait\n1s\n\n##### TCP \n`type``tcp`tcp\n\n###### hosts\nping\n* `localhost` ip`ports`sslheartbeatssltlstcp\n* +`localhost:8080`heartbeatsslheartbeatssltlstcp\n* URL `scheme://<host>:[port]`\n    - `scheme`  `tcp`,`plain`,`ssl``tls``tcp``plain`heartbeattcpssl`tls``ssl`,heartbeatsslssl(windows)\n    - `host`\n    - `port`\n\n###### ports\n`hosts`ping 80,9200,5044\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [80, 9200, 5044]\n```\n\n###### check\n(payload)(payload)payload`hello message``banner`(: If receive is specified without send, no payload is sent, but the client expects to receive a payload in the form of a \"hello message\" or \"banner\" on connect.)\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [7]\n  check.send: 'Hello World'\n  check.receive: 'Hello World'\n```\n###### proxy_url\nsocks5\n```yaml\nproxy_url: socks5://user:password@socks5-proxy:2233\n```\n proxy_use_local_resolver\n\n###### proxy_use_local_resolver\nBooleanfalse\n\n###### ssl\nTLS/SSL`check`SSL/TLSTCP\n\n```yaml\n- type: tcp\n  schedule: '@every 5s'\n  hosts: [\"myhost\"]\n  ports: [80, 9200, 5044]\n  ssl:\n    certificate_authorities: ['/etc/ca.crt']\n    supported_protocols: [\"TLSv1.0\", \"TLSv1.1\", \"TLSv1.2\"]\n```\n\n##### HTTP\n`type``http`httphost\n\n###### urls\nURLs\n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://myhost:80\"]\n```\n###### proxy_url\nhttpurl`HTTP_PROXY`\n\n###### username\n403\n\n###### password\nusername\n\n###### ssl tcp ssl\n\n###### check()\n\n`request``response`\n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"http://myhost:80\"]\n  check.request.method: HEAD\n  check.response.status: 200\n```\n\n* `check.request` \n    - method - HTTP`HEAD`,`GET``POST`\n    - headers - \n    - body - (POST)\n\n* `check.response` \n    - status - `0``404`\n    - headers - header\n    - body - \n\n```yaml\n- type: http\n  schedule: '@every 5s'\n  urls: [\"https://myhost:80\"]\ncheck.request:\n  method: GET\n  headers:\n    'X-API-Key': '12345-mykey-67890'\ncheck.response:\n  status: 200\n  body: '{\"status\": \"ok\"}'\n```\n\n##### Scheduler \n\n```yaml\nheartbeat.scheduler:\n  limit: 10\n  location: 'UTC-08:00'\n```\n`limit`1010IOIODNS\n\n###### limit\nHeartbeatIO001024Heartbeat`limit``ulimit`\n\n###### location\n `localtime`\n\n#### Elasticsearch\n```yaml\noutput.elasticsearch:\n  hosts: [\"192.168.1.42:9200\"]\n  template.name: \"heartbeat\"                #1\n  template.path: \"heartbeat.template.json\"  #2\n```\n1,2Elasticsearch[][heartbeat-template]\n\nLogstash[HeartbeatLogstash][config-heartbeat-logstash]\n\n*heartbeat`./heartbeat -configtest -e`*\n\n# Heartbeat\n\ndeb :\n```bash\nsudo /etc/init.d/ start\n```\n\nrpm :\n```bash\nsudo /etc/init.d/heartbeat start\n```\n\nmac :\n```bash\nsudo ./heartbeat -e -c heartbeat.yml -d \"publish\"\n```\n\nwin : ****\n```bash\nnet start heartbeat\n```\nWindowslog`${Heartbeat_home}\\Logs`\n\n*Heartbeat(logstash/elasticsearch)*\n\n# \n\n*`./heartbeat -h`*\n\n`-E <setting>=<value>`\n\n     `./heartbeat -c heartbeat.yml -E name=mybeat`\n\n`-N`\n\n    Beat\n\n`-c <file>`\n\n    heartbeat\n\n`configtest`\n\n    \n\n`-cpuprofile <output file>`\n\n    cpu\n\n`-d <selectors>`\n\n     `-d \"*\"``-d \"publish\"``\"publish\"`\n\n`-e`\n\n    syslog/filestderr\n\n`-httpprof [<host>]:<port>`\n\n    http\n\n`-memprofile <output file>`\n\n    \n\n`-path.config`\n\n    \n\n`-path.data`\n\n    data\n\n`-path.home`\n\n    \n\n`-path.logs`\n\n    \n\n`-v`\n\n    INFO\n\n`-version`\n\n    beat\n\n\n[logstash,redis][configuring-howto-heartbeat][Processors][configuration-processors][Exported Fields][exported-fields],[Securing Heartbeat][securing-heartbeat]\n\n\n# Heartbeat+ElastAlert \nElastAlert [][_elastalert] \n\n(pinghttp)Heartbeatup=true[common fields#_up][common_fields_up] \n\nElastAlert[change rule][change_rule] `example_rules/example_change.yaml`change ruleup/down (->/->)\n\n\n\n```yaml\n# Alert when some field changes between documents\n# This rule would alert on documents similar to the following:\n# {'username': 'bob', 'country_name': 'USA', '@timestamp': '2014-10-15T00:00:00'}\n# {'username': 'bob', 'country_name': 'Russia', '@timestamp': '2014-10-15T05:00:00'}\n# Because the user (query_key) bob logged in from different countries (compare_key) in the same day (timeframe)\n\n# (Optional)\n# Elasticsearch host\n# es_host: elasticsearch.example.com\n\n# (Optional)\n# Elasticsearch port\n# es_port: 14900\n\n# (Optional) Connect with SSL to Elasticsearch\n#use_ssl: True\n\n# (Optional) basic-auth username and password for elasticsearch\n#es_username: someusername\n#es_password: somepassword\n\n# (Required)\n# Rule name, must be unique\nname: heartbeat-monitor\n\n# (Required)\n# Type of alert.\n# the change rule will alert when a certain field changes in two documents within a timeframe\ntype: change\n\n# (Required)\n# Index to search, wildcard supported\nindex: heartbeat-*\n\n# (Required, change specific)\n# The field to look for changes in\ncompare_key: up\n\n# (Required, change specific)\n# Ignore documents without the compare_key (country_name) field\nignore_null: true\n\n# (Required, change specific)\n# The change must occur in two documents with the same query_key\nquery_key: monitor\n\n# (Required, change specific)\n# The value of compare_key must change in two events that are less than timeframe apart to trigger an alert\nnum_events: 1\ntimeframe:\n    minutes: 1\n\n# (Required)\n# The alert is use when a match is found\nalert:\n#- \"email\"\n#- \"debug\"\n- \"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"\n\n#->->->->CorpIDSecret\n#appid\ncorp_id: xxx\n#Secret\nsecret: xxx\n#->->id\n#id\nagent_id: xxx\n#\n#party_id: xxx\n#\n#user_id: xxx\n\ntag_id: xxx\n```\n\nelastalert[Pull request#926][pr][Issue#925][issues]  `elastalert\\ruletypes.py#L135` `not val` `val is None`[Issue#925][issues]\n\nHeartbeatElasticsearchElasticsearchElastalert`xx hits/xx hits`\n\n![snipaste20170303_134853.png](https://ooo.0o0.ooo/2017/03/03/58b9040175781.png)\n\n[downloads]: https://www.elastic.co/downloads/beats/heartbeat\n[nssm]: http://nssm.cc/download\n[overview]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-overview.html\n[cronexpr]: https://github.com/gorhill/cronexpr#implementation\n[heartbeat-configuration-details]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-configuration-details.html\n[config-heartbeat-logstash]: https://www.elastic.co/guide/en/beats/heartbeat/current/config-heartbeat-logstash.html\n[heartbeat-template]: https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-template.html\n[configuring-howto-heartbeat]: https://www.elastic.co/guide/en/beats/heartbeat/current/configuring-howto-heartbeat.html\n[exported-fields]: https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields.html\n[securing-heartbeat]: https://www.elastic.co/guide/en/beats/heartbeat/current/securing-heartbeat.html\n[configuration-processors]: https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-processors.html\n[_elastalert]: https://anjia.ml/2017/03/03/heartbeat/\n[change_rule]: https://elastalert.readthedocs.io/en/latest/ruletypes.html#change\n[common_fields_up]: https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields-common.html#_up\n[pr]: https://github.com/Yelp/elastalert/pull/926\n[issues]: https://github.com/Yelp/elastalert/issues/925\n","slug":"heartbeat","published":1,"updated":"2017-03-03T05:58:24.584Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbo50009vkdo7e5s6rp8","content":"<p>HeartbeatMetricbeatMetricbeatHeartbeat</p>\n<p>Heartbeat</p>\n<p>HeartbeatPingDNSIP</p>\n<p>Heartbeathosts  10<code>9:00</code>~<code>17:00</code></p>\n<p>Heartbeathosts</p>\n<ul>\n<li><p>ICMP(IPV4/IPV6)<code>icmp</code></p>\n</li>\n<li><p>TCP <code>tcp</code>TCP<code>tcp</code>(payload)(endpoint)</p>\n</li>\n<li><p>HTTP<code>http</code>http<code>http</code></p>\n</li>\n</ul>\n<p><code>tcp</code><code>http</code>SSL/TLS</p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p>Heartbeat</p>\n<p><a href=\"https://www.elastic.co/downloads/beats/heartbeat\" target=\"_blank\" rel=\"external\"></a></p>\n<p><strong>deb(Debian/Ubuntu)</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-amd64.deb</div><div class=\"line\">sudo dpkg -i heartbeat-5.2.2-amd64.deb</div></pre></td></tr></table></figure></p>\n<p><strong>rpm(Redhat / Centos / Fedora)</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-x86_64.rpm</div><div class=\"line\">sudo rpm -vi heartbeat-5.2.2-x86_64.rpm</div></pre></td></tr></table></figure></p>\n<p><strong>mac</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-darwin-x86_64.tar.gz</div><div class=\"line\">tar xzvf heartbeat-5.2.2-darwin-x86_64.tar.gz</div></pre></td></tr></table></figure></p>\n<p><strong>windows</strong></p>\n<ol>\n<li><p><a href=\"https://www.elastic.co/downloads/beats/heartbeat\" target=\"_blank\" rel=\"external\"></a> 32 <code>https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86.zip</code> 64<code>https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86_64.zip</code> <code>{version}</code>,<code>5.2.1</code></p>\n</li>\n<li><p>zip <code>D:\\Heartbeat</code></p>\n</li>\n<li><p>PowerShell(PowerShell<strong></strong>)xppowershell</p>\n</li>\n<li><p>Windows</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><div class=\"line\">PS &gt; cd <span class=\"string\">'D:\\Heartbeat'</span></div><div class=\"line\">PS D:\\Heartbeat&gt; .\\install-service-heartbeat.ps1</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>!&gt; xp<a href=\"http://nssm.cc/download\" target=\"_blank\" rel=\"external\">nssm</a>,<code>-c D:\\Heartbeat\\heartbeat.yml  -path.home D:\\Heartbeat\\ -path.data D:\\Heartbeat\\</code></p>\n<p> <code>heartbeat.exe -e -f heartbeat.yml</code></p>\n<p><code>net start heartbeat</code>(cmdpowershell(<kbd>Win</kbd>+<kbd>R</kbd><code>services.msc</code>heartbeat)</p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p><code>heartbeat.yml</code>heartbeat<code>heartbeat.full.yml</code></p>\n<p>HeartbeatHeartbeatICMP,TCP HTTP  <a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-overview.html\" target=\"_blank\" rel=\"external\"></a></p>\n<h4 id=\"--yaml-HeartbeatICMPTCP\"><a href=\"#--yaml-HeartbeatICMPTCP\" class=\"headerlink\" title=\"(-) (yaml),HeartbeatICMPTCP\"></a>(<code>-</code>) (yaml),Heartbeat<code>ICMP</code><code>TCP</code></h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.monitors:</div><div class=\"line\"><span class=\"attr\">- type:</span> icmp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'*/5 * * * * * *'</span>   <span class=\"comment\">#1</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span>         <span class=\"comment\">#2</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost:7\"</span>]  <span class=\"comment\"># default TCP Echo Protocol</span></div><div class=\"line\"><span class=\"attr\">  mode:</span> any                     <span class=\"comment\">#3</span></div><div class=\"line\">  check.send: <span class=\"string\">\"Check\"</span></div><div class=\"line\">  check.receive: <span class=\"string\">\"Check\"</span></div><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://localhost:80/service/status\"</span>]</div><div class=\"line\">  check.response.status: <span class=\"number\">200</span></div><div class=\"line\">heartbeat.scheduler:</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10</span></div></pre></td></tr></table></figure>\n<ol>\n<li><p>ICMP(e.g. <code>10:00:00</code>,<code>10:00:05</code> ) <code>schedule</code><code>cron</code><a href=\"https://github.com/gorhill/cronexpr#implementation\" target=\"_blank\" rel=\"external\">this cronexpr implementation</a></p>\n</li>\n<li><p>TCP5Heartbeat<code>@every</code><code>conexpr</code></p>\n</li>\n<li><p><code>mode</code>pingip<code>any</code>IPS(<code>all</code>) </p>\n</li>\n</ol>\n<p><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-configuration-details.html\" target=\"_blank\" rel=\"external\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h6 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h6><ul>\n<li><p><code>icmp</code>(IPV4/IPV6)<code>icmp</code></p>\n</li>\n<li><p><code>tcp</code> <code>tcp</code>TCP<code>tcp</code>(payload)(endpoint)</p>\n</li>\n<li><p><code>http</code><code>http</code>http<code>http</code></p>\n</li>\n</ul>\n<p><code>tcp</code><code>http</code>SSL/TLS</p>\n<h6 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h6><p></p>\n<h6 id=\"enabled\"><a href=\"#enabled\" class=\"headerlink\" title=\"enabled\"></a>enabled</h6><p>Booleantrue</p>\n<h6 id=\"schedule\"><a href=\"#schedule\" class=\"headerlink\" title=\"schedule\"></a>schedule</h6><p>cron</p>\n<h6 id=\"ipv4\"><a href=\"#ipv4\" class=\"headerlink\" title=\"ipv4\"></a>ipv4</h6><p>Booleanhostipv4pintrue</p>\n<h6 id=\"ipv6\"><a href=\"#ipv6\" class=\"headerlink\" title=\"ipv6\"></a>ipv6</h6><p>Booleanhostipv4pintrue</p>\n<h6 id=\"mode\"><a href=\"#mode\" class=\"headerlink\" title=\"mode\"></a>mode</h6><p><code>any</code><code>all</code>,<code>any</code><code>any</code>pingip<code>all</code>pingdnsip</p>\n<h6 id=\"watch-poll-file\"><a href=\"#watch-poll-file\" class=\"headerlink\" title=\"watch.poll_file\"></a>watch.poll_file</h6><p><strong></strong></p>\n<p>JSONHeartbeatHeartbeatheartbeat.ymljsonjosnheartbeat</p>\n<p>idjson(json)heartbeat<code>watch.poll_file</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.monitors:</div><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'*/5 * * * * * *'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\">  watch.poll_file:</div><div class=\"line\"><span class=\"attr\">    path:</span> &#123;path.config&#125;/monitors/dynamic.json</div><div class=\"line\"><span class=\"attr\">    interval:</span> <span class=\"number\">5</span>s</div></pre></td></tr></table></figure>\n<pre><code>path\n\n    JSON\n\ninterval\n\n    \n</code></pre><p>JSON<br><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;\"hosts\": [\"myhost:1234\"], \"schedule\": \"*/15 * * * * * *\"&#125;     #1</div><div class=\"line\">&#123;\"hosts\": [\"tls://otherhost:479\"], \"ssl.certificate_authorities\": [\"path/to/ca/file.pem\"]&#125;      #2</div></pre></td></tr></table></figure></p>\n<ol>\n<li>heartbeat15</li>\n<li>heartbeatcaTLS</li>\n</ol>\n<h5 id=\"ICMP\"><a href=\"#ICMP\" class=\"headerlink\" title=\"ICMP\"></a>ICMP</h5><p><code>type</code><code>icmp</code>HeartbeatICMP(v4v6)</p>\n<h6 id=\"hosts\"><a href=\"#hosts\" class=\"headerlink\" title=\"hosts\"></a>hosts</h6><p>ping</p>\n<h6 id=\"wait\"><a href=\"#wait\" class=\"headerlink\" title=\"wait\"></a>wait</h6><p>1s</p>\n<h5 id=\"TCP-\"><a href=\"#TCP-\" class=\"headerlink\" title=\"TCP \"></a>TCP </h5><p><code>type</code><code>tcp</code>tcp</p>\n<h6 id=\"hosts-1\"><a href=\"#hosts-1\" class=\"headerlink\" title=\"hosts\"></a>hosts</h6><p>ping</p>\n<ul>\n<li><code>localhost</code> ip<code>ports</code>sslheartbeatssltlstcp</li>\n<li>+<code>localhost:8080</code>heartbeatsslheartbeatssltlstcp</li>\n<li>URL <code>scheme://&lt;host&gt;:[port]</code><ul>\n<li><code>scheme</code>  <code>tcp</code>,<code>plain</code>,<code>ssl</code><code>tls</code><code>tcp</code><code>plain</code>heartbeattcpssl<code>tls</code><code>ssl</code>,heartbeatsslssl(windows)</li>\n<li><code>host</code></li>\n<li><code>port</code></li>\n</ul>\n</li>\n</ul>\n<h6 id=\"ports\"><a href=\"#ports\" class=\"headerlink\" title=\"ports\"></a>ports</h6><p><code>hosts</code>ping 80,9200,5044<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">80</span>, <span class=\"number\">9200</span>, <span class=\"number\">5044</span>]</div></pre></td></tr></table></figure></p>\n<h6 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h6><p>(payload)(payload)payload<code>hello message</code><code>banner</code>(: If receive is specified without send, no payload is sent, but the client expects to receive a payload in the form of a hello message or banner on connect.)<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">7</span>]</div><div class=\"line\">  check.send: <span class=\"string\">'Hello World'</span></div><div class=\"line\">  check.receive: <span class=\"string\">'Hello World'</span></div></pre></td></tr></table></figure></p>\n<h6 id=\"proxy-url\"><a href=\"#proxy-url\" class=\"headerlink\" title=\"proxy_url\"></a>proxy_url</h6><p>socks5<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">proxy_url:</span> socks5://user:password@socks5-proxy:<span class=\"number\">2233</span></div></pre></td></tr></table></figure></p>\n<p> proxy_use_local_resolver</p>\n<h6 id=\"proxy-use-local-resolver\"><a href=\"#proxy-use-local-resolver\" class=\"headerlink\" title=\"proxy_use_local_resolver\"></a>proxy_use_local_resolver</h6><p>Booleanfalse</p>\n<h6 id=\"ssl\"><a href=\"#ssl\" class=\"headerlink\" title=\"ssl\"></a>ssl</h6><p>TLS/SSL<code>check</code>SSL/TLSTCP</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">80</span>, <span class=\"number\">9200</span>, <span class=\"number\">5044</span>]</div><div class=\"line\"><span class=\"attr\">  ssl:</span></div><div class=\"line\"><span class=\"attr\">    certificate_authorities:</span> [<span class=\"string\">'/etc/ca.crt'</span>]</div><div class=\"line\"><span class=\"attr\">    supported_protocols:</span> [<span class=\"string\">\"TLSv1.0\"</span>, <span class=\"string\">\"TLSv1.1\"</span>, <span class=\"string\">\"TLSv1.2\"</span>]</div></pre></td></tr></table></figure>\n<h5 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h5><p><code>type</code><code>http</code>httphost</p>\n<h6 id=\"urls\"><a href=\"#urls\" class=\"headerlink\" title=\"urls\"></a>urls</h6><p>URLs</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://myhost:80\"</span>]</div></pre></td></tr></table></figure>\n<h6 id=\"proxy-url-1\"><a href=\"#proxy-url-1\" class=\"headerlink\" title=\"proxy_url\"></a>proxy_url</h6><p>httpurl<code>HTTP_PROXY</code></p>\n<h6 id=\"username\"><a href=\"#username\" class=\"headerlink\" title=\"username\"></a>username</h6><p>403</p>\n<h6 id=\"password\"><a href=\"#password\" class=\"headerlink\" title=\"password\"></a>password</h6><p>username</p>\n<h6 id=\"ssl-tcp-ssl\"><a href=\"#ssl-tcp-ssl\" class=\"headerlink\" title=\"ssl tcp ssl\"></a>ssl tcp ssl</h6><h6 id=\"check-\"><a href=\"#check-\" class=\"headerlink\" title=\"check()\"></a>check()</h6><p><code>request</code><code>response</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://myhost:80\"</span>]</div><div class=\"line\">  check.request.method: HEAD</div><div class=\"line\">  check.response.status: <span class=\"number\">200</span></div></pre></td></tr></table></figure>\n<ul>\n<li><p><code>check.request</code> </p>\n<ul>\n<li>method - HTTP<code>HEAD</code>,<code>GET</code><code>POST</code></li>\n<li>headers - </li>\n<li>body - (POST)</li>\n</ul>\n</li>\n<li><p><code>check.response</code> </p>\n<ul>\n<li>status - <code>0</code><code>404</code></li>\n<li>headers - header</li>\n<li>body - </li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"https://myhost:80\"</span>]</div><div class=\"line\">check.request:</div><div class=\"line\"><span class=\"attr\">  method:</span> GET</div><div class=\"line\"><span class=\"attr\">  headers:</span></div><div class=\"line\"><span class=\"attr\">    'X-API-Key':</span> <span class=\"string\">'12345-mykey-67890'</span></div><div class=\"line\">check.response:</div><div class=\"line\"><span class=\"attr\">  status:</span> <span class=\"number\">200</span></div><div class=\"line\"><span class=\"attr\">  body:</span> <span class=\"string\">'&#123;\"status\": \"ok\"&#125;'</span></div></pre></td></tr></table></figure>\n<h5 id=\"Scheduler-\"><a href=\"#Scheduler-\" class=\"headerlink\" title=\"Scheduler \"></a>Scheduler </h5><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.scheduler:</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10</span></div><div class=\"line\"><span class=\"attr\">  location:</span> <span class=\"string\">'UTC-08:00'</span></div></pre></td></tr></table></figure>\n<p><code>limit</code>1010IOIODNS</p>\n<h6 id=\"limit\"><a href=\"#limit\" class=\"headerlink\" title=\"limit\"></a>limit</h6><p>HeartbeatIO001024Heartbeat<code>limit</code><code>ulimit</code></p>\n<h6 id=\"location\"><a href=\"#location\" class=\"headerlink\" title=\"location\"></a>location</h6><p> <code>localtime</code></p>\n<h4 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">output.elasticsearch:</div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"192.168.1.42:9200\"</span>]</div><div class=\"line\">  template.name: <span class=\"string\">\"heartbeat\"</span>                <span class=\"comment\">#1</span></div><div class=\"line\">  template.path: <span class=\"string\">\"heartbeat.template.json\"</span>  <span class=\"comment\">#2</span></div></pre></td></tr></table></figure>\n<p>1,2Elasticsearch<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-template.html\" target=\"_blank\" rel=\"external\"></a></p>\n<p>Logstash<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/config-heartbeat-logstash.html\" target=\"_blank\" rel=\"external\">HeartbeatLogstash</a></p>\n<p><em>heartbeat<code>./heartbeat -configtest -e</code></em></p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p>deb :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/ start</div></pre></td></tr></table></figure></p>\n<p>rpm :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/heartbeat start</div></pre></td></tr></table></figure></p>\n<p>mac :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./heartbeat <span class=\"_\">-e</span> -c heartbeat.yml <span class=\"_\">-d</span> <span class=\"string\">\"publish\"</span></div></pre></td></tr></table></figure></p>\n<p>win : <strong></strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">net start heartbeat</div></pre></td></tr></table></figure></p>\n<p>Windowslog<code>${Heartbeat_home}\\Logs</code></p>\n<p><em>Heartbeat(logstash/elasticsearch)</em></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><em><code>./heartbeat -h</code></em></p>\n<p><code>-E &lt;setting&gt;=&lt;value&gt;</code></p>\n<pre><code> `./heartbeat -c heartbeat.yml -E name=mybeat`\n</code></pre><p><code>-N</code></p>\n<pre><code>Beat\n</code></pre><p><code>-c &lt;file&gt;</code></p>\n<pre><code>heartbeat\n</code></pre><p><code>configtest</code></p>\n<pre><code>\n</code></pre><p><code>-cpuprofile &lt;output file&gt;</code></p>\n<pre><code>cpu\n</code></pre><p><code>-d &lt;selectors&gt;</code></p>\n<pre><code> `-d &quot;*&quot;``-d &quot;publish&quot;``&quot;publish&quot;`\n</code></pre><p><code>-e</code></p>\n<pre><code>syslog/filestderr\n</code></pre><p><code>-httpprof [&lt;host&gt;]:&lt;port&gt;</code></p>\n<pre><code>http\n</code></pre><p><code>-memprofile &lt;output file&gt;</code></p>\n<pre><code>\n</code></pre><p><code>-path.config</code></p>\n<pre><code>\n</code></pre><p><code>-path.data</code></p>\n<pre><code>data\n</code></pre><p><code>-path.home</code></p>\n<pre><code>\n</code></pre><p><code>-path.logs</code></p>\n<pre><code>\n</code></pre><p><code>-v</code></p>\n<pre><code>INFO\n</code></pre><p><code>-version</code></p>\n<pre><code>beat\n</code></pre><p><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/configuring-howto-heartbeat.html\" target=\"_blank\" rel=\"external\">logstash,redis</a><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-processors.html\" target=\"_blank\" rel=\"external\">Processors</a><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields.html\" target=\"_blank\" rel=\"external\">Exported Fields</a>,<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/securing-heartbeat.html\" target=\"_blank\" rel=\"external\">Securing Heartbeat</a></p>\n<h1 id=\"Heartbeat-ElastAlert-\"><a href=\"#Heartbeat-ElastAlert-\" class=\"headerlink\" title=\"Heartbeat+ElastAlert \"></a>Heartbeat+ElastAlert </h1><p>ElastAlert <a href=\"https://anjia.ml/2017/03/03/heartbeat/\"></a> </p>\n<p>(pinghttp)Heartbeatup=true<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields-common.html#_up\" target=\"_blank\" rel=\"external\">common fields#_up</a> </p>\n<p>ElastAlert<a href=\"https://elastalert.readthedocs.io/en/latest/ruletypes.html#change\" target=\"_blank\" rel=\"external\">change rule</a> <code>example_rules/example_change.yaml</code>change ruleup/down (-&gt;/-&gt;)</p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Alert when some field changes between documents</span></div><div class=\"line\"><span class=\"comment\"># This rule would alert on documents similar to the following:</span></div><div class=\"line\"><span class=\"comment\"># &#123;'username': 'bob', 'country_name': 'USA', '@timestamp': '2014-10-15T00:00:00'&#125;</span></div><div class=\"line\"><span class=\"comment\"># &#123;'username': 'bob', 'country_name': 'Russia', '@timestamp': '2014-10-15T05:00:00'&#125;</span></div><div class=\"line\"><span class=\"comment\"># Because the user (query_key) bob logged in from different countries (compare_key) in the same day (timeframe)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional)</span></div><div class=\"line\"><span class=\"comment\"># Elasticsearch host</span></div><div class=\"line\"><span class=\"comment\"># es_host: elasticsearch.example.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional)</span></div><div class=\"line\"><span class=\"comment\"># Elasticsearch port</span></div><div class=\"line\"><span class=\"comment\"># es_port: 14900</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional) Connect with SSL to Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#use_ssl: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional) basic-auth username and password for elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_username: someusername</span></div><div class=\"line\"><span class=\"comment\">#es_password: somepassword</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Rule name, must be unique</span></div><div class=\"line\"><span class=\"attr\">name:</span> heartbeat-monitor</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Type of alert.</span></div><div class=\"line\"><span class=\"comment\"># the change rule will alert when a certain field changes in two documents within a timeframe</span></div><div class=\"line\"><span class=\"attr\">type:</span> change</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Index to search, wildcard supported</span></div><div class=\"line\"><span class=\"attr\">index:</span> heartbeat-*</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The field to look for changes in</span></div><div class=\"line\"><span class=\"attr\">compare_key:</span> up</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># Ignore documents without the compare_key (country_name) field</span></div><div class=\"line\"><span class=\"attr\">ignore_null:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The change must occur in two documents with the same query_key</span></div><div class=\"line\"><span class=\"attr\">query_key:</span> monitor</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The value of compare_key must change in two events that are less than timeframe apart to trigger an alert</span></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"comment\">#- \"email\"</span></div><div class=\"line\"><span class=\"comment\">#- \"debug\"</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;-&gt;-&gt;CorpIDSecret</span></div><div class=\"line\"><span class=\"comment\">#appid</span></div><div class=\"line\"><span class=\"attr\">corp_id:</span> xxx</div><div class=\"line\"><span class=\"comment\">#Secret</span></div><div class=\"line\"><span class=\"attr\">secret:</span> xxx</div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;id</span></div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">agent_id:</span> xxx</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\">#party_id: xxx</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\">#user_id: xxx</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">tag_id:</span> xxx</div></pre></td></tr></table></figure>\n<p>elastalert<a href=\"https://github.com/Yelp/elastalert/pull/926\" target=\"_blank\" rel=\"external\">Pull request#926</a><a href=\"https://github.com/Yelp/elastalert/issues/925\" target=\"_blank\" rel=\"external\">Issue#925</a>  <code>elastalert\\ruletypes.py#L135</code> <code>not val</code> <code>val is None</code><a href=\"https://github.com/Yelp/elastalert/issues/925\" target=\"_blank\" rel=\"external\">Issue#925</a></p>\n<p>HeartbeatElasticsearchElasticsearchElastalert<code>xx hits/xx hits</code></p>\n<p><img src=\"https://ooo.0o0.ooo/2017/03/03/58b9040175781.png\" alt=\"snipaste20170303_134853.png\"></p>\n","excerpt":"","more":"<p>HeartbeatMetricbeatMetricbeatHeartbeat</p>\n<p>Heartbeat</p>\n<p>HeartbeatPingDNSIP</p>\n<p>Heartbeathosts  10<code>9:00</code>~<code>17:00</code></p>\n<p>Heartbeathosts</p>\n<ul>\n<li><p>ICMP(IPV4/IPV6)<code>icmp</code></p>\n</li>\n<li><p>TCP <code>tcp</code>TCP<code>tcp</code>(payload)(endpoint)</p>\n</li>\n<li><p>HTTP<code>http</code>http<code>http</code></p>\n</li>\n</ul>\n<p><code>tcp</code><code>http</code>SSL/TLS</p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p>Heartbeat</p>\n<p><a href=\"https://www.elastic.co/downloads/beats/heartbeat\"></a></p>\n<p><strong>deb(Debian/Ubuntu)</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-amd64.deb</div><div class=\"line\">sudo dpkg -i heartbeat-5.2.2-amd64.deb</div></pre></td></tr></table></figure></p>\n<p><strong>rpm(Redhat / Centos / Fedora)</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-x86_64.rpm</div><div class=\"line\">sudo rpm -vi heartbeat-5.2.2-x86_64.rpm</div></pre></td></tr></table></figure></p>\n<p><strong>mac</strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">curl -L -O https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-5.2.2-darwin-x86_64.tar.gz</div><div class=\"line\">tar xzvf heartbeat-5.2.2-darwin-x86_64.tar.gz</div></pre></td></tr></table></figure></p>\n<p><strong>windows</strong></p>\n<ol>\n<li><p><a href=\"https://www.elastic.co/downloads/beats/heartbeat\"></a> 32 <code>https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86.zip</code> 64<code>https://artifacts.elastic.co/downloads/beats/heartbeat/heartbeat-{version}-windows-x86_64.zip</code> <code>{version}</code>,<code>5.2.1</code></p>\n</li>\n<li><p>zip <code>D:\\Heartbeat</code></p>\n</li>\n<li><p>PowerShell(PowerShell<strong></strong>)xppowershell</p>\n</li>\n<li><p>Windows</p>\n<figure class=\"highlight powershell\"><table><tr><td class=\"code\"><pre><div class=\"line\">PS &gt; cd <span class=\"string\">'D:\\Heartbeat'</span></div><div class=\"line\">PS D:\\Heartbeat&gt; .\\install-service-heartbeat.ps1</div></pre></td></tr></table></figure>\n</li>\n</ol>\n<p>!&gt; xp<a href=\"http://nssm.cc/download\">nssm</a>,<code>-c D:\\Heartbeat\\heartbeat.yml  -path.home D:\\Heartbeat\\ -path.data D:\\Heartbeat\\</code></p>\n<p> <code>heartbeat.exe -e -f heartbeat.yml</code></p>\n<p><code>net start heartbeat</code>(cmdpowershell(<kbd>Win</kbd>+<kbd>R</kbd><code>services.msc</code>heartbeat)</p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p><code>heartbeat.yml</code>heartbeat<code>heartbeat.full.yml</code></p>\n<p>HeartbeatHeartbeatICMP,TCP HTTP  <a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-overview.html\"></a></p>\n<h4 id=\"--yaml-HeartbeatICMPTCP\"><a href=\"#--yaml-HeartbeatICMPTCP\" class=\"headerlink\" title=\"(-) (yaml),HeartbeatICMPTCP\"></a>(<code>-</code>) (yaml),Heartbeat<code>ICMP</code><code>TCP</code></h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.monitors:</div><div class=\"line\"><span class=\"attr\">- type:</span> icmp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'*/5 * * * * * *'</span>   <span class=\"comment\">#1</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span>         <span class=\"comment\">#2</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost:7\"</span>]  <span class=\"comment\"># default TCP Echo Protocol</span></div><div class=\"line\"><span class=\"attr\">  mode:</span> any                     <span class=\"comment\">#3</span></div><div class=\"line\">  check.send: <span class=\"string\">\"Check\"</span></div><div class=\"line\">  check.receive: <span class=\"string\">\"Check\"</span></div><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://localhost:80/service/status\"</span>]</div><div class=\"line\">  check.response.status: <span class=\"number\">200</span></div><div class=\"line\">heartbeat.scheduler:</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10</span></div></pre></td></tr></table></figure>\n<ol>\n<li><p>ICMP(e.g. <code>10:00:00</code>,<code>10:00:05</code> ) <code>schedule</code><code>cron</code><a href=\"https://github.com/gorhill/cronexpr#implementation\">this cronexpr implementation</a></p>\n</li>\n<li><p>TCP5Heartbeat<code>@every</code><code>conexpr</code></p>\n</li>\n<li><p><code>mode</code>pingip<code>any</code>IPS(<code>all</code>) </p>\n</li>\n</ol>\n<p><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-configuration-details.html\"></a></p>\n<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><h6 id=\"type\"><a href=\"#type\" class=\"headerlink\" title=\"type\"></a>type</h6><ul>\n<li><p><code>icmp</code>(IPV4/IPV6)<code>icmp</code></p>\n</li>\n<li><p><code>tcp</code> <code>tcp</code>TCP<code>tcp</code>(payload)(endpoint)</p>\n</li>\n<li><p><code>http</code><code>http</code>http<code>http</code></p>\n</li>\n</ul>\n<p><code>tcp</code><code>http</code>SSL/TLS</p>\n<h6 id=\"name\"><a href=\"#name\" class=\"headerlink\" title=\"name\"></a>name</h6><p></p>\n<h6 id=\"enabled\"><a href=\"#enabled\" class=\"headerlink\" title=\"enabled\"></a>enabled</h6><p>Booleantrue</p>\n<h6 id=\"schedule\"><a href=\"#schedule\" class=\"headerlink\" title=\"schedule\"></a>schedule</h6><p>cron</p>\n<h6 id=\"ipv4\"><a href=\"#ipv4\" class=\"headerlink\" title=\"ipv4\"></a>ipv4</h6><p>Booleanhostipv4pintrue</p>\n<h6 id=\"ipv6\"><a href=\"#ipv6\" class=\"headerlink\" title=\"ipv6\"></a>ipv6</h6><p>Booleanhostipv4pintrue</p>\n<h6 id=\"mode\"><a href=\"#mode\" class=\"headerlink\" title=\"mode\"></a>mode</h6><p><code>any</code><code>all</code>,<code>any</code><code>any</code>pingip<code>all</code>pingdnsip</p>\n<h6 id=\"watch-poll-file\"><a href=\"#watch-poll-file\" class=\"headerlink\" title=\"watch.poll_file\"></a>watch.poll_file</h6><p><strong></strong></p>\n<p>JSONHeartbeatHeartbeatheartbeat.ymljsonjosnheartbeat</p>\n<p>idjson(json)heartbeat<code>watch.poll_file</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.monitors:</div><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'*/5 * * * * * *'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\">  watch.poll_file:</div><div class=\"line\"><span class=\"attr\">    path:</span> &#123;path.config&#125;/monitors/dynamic.json</div><div class=\"line\"><span class=\"attr\">    interval:</span> <span class=\"number\">5</span>s</div></pre></td></tr></table></figure>\n<pre><code>path\n\n    JSON\n\ninterval\n\n    \n</code></pre><p>JSON<br><figure class=\"highlight\"><table><tr><td class=\"code\"><pre><div class=\"line\">&#123;\"hosts\": [\"myhost:1234\"], \"schedule\": \"*/15 * * * * * *\"&#125;     #1</div><div class=\"line\">&#123;\"hosts\": [\"tls://otherhost:479\"], \"ssl.certificate_authorities\": [\"path/to/ca/file.pem\"]&#125;      #2</div></pre></td></tr></table></figure></p>\n<ol>\n<li>heartbeat15</li>\n<li>heartbeatcaTLS</li>\n</ol>\n<h5 id=\"ICMP\"><a href=\"#ICMP\" class=\"headerlink\" title=\"ICMP\"></a>ICMP</h5><p><code>type</code><code>icmp</code>HeartbeatICMP(v4v6)</p>\n<h6 id=\"hosts\"><a href=\"#hosts\" class=\"headerlink\" title=\"hosts\"></a>hosts</h6><p>ping</p>\n<h6 id=\"wait\"><a href=\"#wait\" class=\"headerlink\" title=\"wait\"></a>wait</h6><p>1s</p>\n<h5 id=\"TCP-\"><a href=\"#TCP-\" class=\"headerlink\" title=\"TCP \"></a>TCP </h5><p><code>type</code><code>tcp</code>tcp</p>\n<h6 id=\"hosts-1\"><a href=\"#hosts-1\" class=\"headerlink\" title=\"hosts\"></a>hosts</h6><p>ping</p>\n<ul>\n<li><code>localhost</code> ip<code>ports</code>sslheartbeatssltlstcp</li>\n<li>+<code>localhost:8080</code>heartbeatsslheartbeatssltlstcp</li>\n<li>URL <code>scheme://&lt;host&gt;:[port]</code><ul>\n<li><code>scheme</code>  <code>tcp</code>,<code>plain</code>,<code>ssl</code><code>tls</code><code>tcp</code><code>plain</code>heartbeattcpssl<code>tls</code><code>ssl</code>,heartbeatsslssl(windows)</li>\n<li><code>host</code></li>\n<li><code>port</code></li>\n</ul>\n</li>\n</ul>\n<h6 id=\"ports\"><a href=\"#ports\" class=\"headerlink\" title=\"ports\"></a>ports</h6><p><code>hosts</code>ping 80,9200,5044<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">80</span>, <span class=\"number\">9200</span>, <span class=\"number\">5044</span>]</div></pre></td></tr></table></figure></p>\n<h6 id=\"check\"><a href=\"#check\" class=\"headerlink\" title=\"check\"></a>check</h6><p>(payload)(payload)payload<code>hello message</code><code>banner</code>(: If receive is specified without send, no payload is sent, but the client expects to receive a payload in the form of a hello message or banner on connect.)<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">7</span>]</div><div class=\"line\">  check.send: <span class=\"string\">'Hello World'</span></div><div class=\"line\">  check.receive: <span class=\"string\">'Hello World'</span></div></pre></td></tr></table></figure></p>\n<h6 id=\"proxy-url\"><a href=\"#proxy-url\" class=\"headerlink\" title=\"proxy_url\"></a>proxy_url</h6><p>socks5<br><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">proxy_url:</span> socks5://user:password@socks5-proxy:<span class=\"number\">2233</span></div></pre></td></tr></table></figure></p>\n<p> proxy_use_local_resolver</p>\n<h6 id=\"proxy-use-local-resolver\"><a href=\"#proxy-use-local-resolver\" class=\"headerlink\" title=\"proxy_use_local_resolver\"></a>proxy_use_local_resolver</h6><p>Booleanfalse</p>\n<h6 id=\"ssl\"><a href=\"#ssl\" class=\"headerlink\" title=\"ssl\"></a>ssl</h6><p>TLS/SSL<code>check</code>SSL/TLSTCP</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> tcp</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"myhost\"</span>]</div><div class=\"line\"><span class=\"attr\">  ports:</span> [<span class=\"number\">80</span>, <span class=\"number\">9200</span>, <span class=\"number\">5044</span>]</div><div class=\"line\"><span class=\"attr\">  ssl:</span></div><div class=\"line\"><span class=\"attr\">    certificate_authorities:</span> [<span class=\"string\">'/etc/ca.crt'</span>]</div><div class=\"line\"><span class=\"attr\">    supported_protocols:</span> [<span class=\"string\">\"TLSv1.0\"</span>, <span class=\"string\">\"TLSv1.1\"</span>, <span class=\"string\">\"TLSv1.2\"</span>]</div></pre></td></tr></table></figure>\n<h5 id=\"HTTP\"><a href=\"#HTTP\" class=\"headerlink\" title=\"HTTP\"></a>HTTP</h5><p><code>type</code><code>http</code>httphost</p>\n<h6 id=\"urls\"><a href=\"#urls\" class=\"headerlink\" title=\"urls\"></a>urls</h6><p>URLs</p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://myhost:80\"</span>]</div></pre></td></tr></table></figure>\n<h6 id=\"proxy-url-1\"><a href=\"#proxy-url-1\" class=\"headerlink\" title=\"proxy_url\"></a>proxy_url</h6><p>httpurl<code>HTTP_PROXY</code></p>\n<h6 id=\"username\"><a href=\"#username\" class=\"headerlink\" title=\"username\"></a>username</h6><p>403</p>\n<h6 id=\"password\"><a href=\"#password\" class=\"headerlink\" title=\"password\"></a>password</h6><p>username</p>\n<h6 id=\"ssl-tcp-ssl\"><a href=\"#ssl-tcp-ssl\" class=\"headerlink\" title=\"ssl tcp ssl\"></a>ssl tcp ssl</h6><h6 id=\"check-\"><a href=\"#check-\" class=\"headerlink\" title=\"check()\"></a>check()</h6><p><code>request</code><code>response</code></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"http://myhost:80\"</span>]</div><div class=\"line\">  check.request.method: HEAD</div><div class=\"line\">  check.response.status: <span class=\"number\">200</span></div></pre></td></tr></table></figure>\n<ul>\n<li><p><code>check.request</code> </p>\n<ul>\n<li>method - HTTP<code>HEAD</code>,<code>GET</code><code>POST</code></li>\n<li>headers - </li>\n<li>body - (POST)</li>\n</ul>\n</li>\n<li><p><code>check.response</code> </p>\n<ul>\n<li>status - <code>0</code><code>404</code></li>\n<li>headers - header</li>\n<li>body - </li>\n</ul>\n</li>\n</ul>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"attr\">- type:</span> http</div><div class=\"line\"><span class=\"attr\">  schedule:</span> <span class=\"string\">'@every 5s'</span></div><div class=\"line\"><span class=\"attr\">  urls:</span> [<span class=\"string\">\"https://myhost:80\"</span>]</div><div class=\"line\">check.request:</div><div class=\"line\"><span class=\"attr\">  method:</span> GET</div><div class=\"line\"><span class=\"attr\">  headers:</span></div><div class=\"line\"><span class=\"attr\">    'X-API-Key':</span> <span class=\"string\">'12345-mykey-67890'</span></div><div class=\"line\">check.response:</div><div class=\"line\"><span class=\"attr\">  status:</span> <span class=\"number\">200</span></div><div class=\"line\"><span class=\"attr\">  body:</span> <span class=\"string\">'&#123;\"status\": \"ok\"&#125;'</span></div></pre></td></tr></table></figure>\n<h5 id=\"Scheduler-\"><a href=\"#Scheduler-\" class=\"headerlink\" title=\"Scheduler \"></a>Scheduler </h5><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">heartbeat.scheduler:</div><div class=\"line\"><span class=\"attr\">  limit:</span> <span class=\"number\">10</span></div><div class=\"line\"><span class=\"attr\">  location:</span> <span class=\"string\">'UTC-08:00'</span></div></pre></td></tr></table></figure>\n<p><code>limit</code>1010IOIODNS</p>\n<h6 id=\"limit\"><a href=\"#limit\" class=\"headerlink\" title=\"limit\"></a>limit</h6><p>HeartbeatIO001024Heartbeat<code>limit</code><code>ulimit</code></p>\n<h6 id=\"location\"><a href=\"#location\" class=\"headerlink\" title=\"location\"></a>location</h6><p> <code>localtime</code></p>\n<h4 id=\"Elasticsearch\"><a href=\"#Elasticsearch\" class=\"headerlink\" title=\"Elasticsearch\"></a>Elasticsearch</h4><figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\">output.elasticsearch:</div><div class=\"line\"><span class=\"attr\">  hosts:</span> [<span class=\"string\">\"192.168.1.42:9200\"</span>]</div><div class=\"line\">  template.name: <span class=\"string\">\"heartbeat\"</span>                <span class=\"comment\">#1</span></div><div class=\"line\">  template.path: <span class=\"string\">\"heartbeat.template.json\"</span>  <span class=\"comment\">#2</span></div></pre></td></tr></table></figure>\n<p>1,2Elasticsearch<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/heartbeat-template.html\"></a></p>\n<p>Logstash<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/config-heartbeat-logstash.html\">HeartbeatLogstash</a></p>\n<p><em>heartbeat<code>./heartbeat -configtest -e</code></em></p>\n<h1 id=\"Heartbeat\"><a href=\"#Heartbeat\" class=\"headerlink\" title=\"Heartbeat\"></a>Heartbeat</h1><p>deb :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/ start</div></pre></td></tr></table></figure></p>\n<p>rpm :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo /etc/init.d/heartbeat start</div></pre></td></tr></table></figure></p>\n<p>mac :<br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo ./heartbeat <span class=\"_\">-e</span> -c heartbeat.yml <span class=\"_\">-d</span> <span class=\"string\">\"publish\"</span></div></pre></td></tr></table></figure></p>\n<p>win : <strong></strong><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">net start heartbeat</div></pre></td></tr></table></figure></p>\n<p>Windowslog<code>${Heartbeat_home}\\Logs</code></p>\n<p><em>Heartbeat(logstash/elasticsearch)</em></p>\n<h1 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h1><p><em><code>./heartbeat -h</code></em></p>\n<p><code>-E &lt;setting&gt;=&lt;value&gt;</code></p>\n<pre><code> `./heartbeat -c heartbeat.yml -E name=mybeat`\n</code></pre><p><code>-N</code></p>\n<pre><code>Beat\n</code></pre><p><code>-c &lt;file&gt;</code></p>\n<pre><code>heartbeat\n</code></pre><p><code>configtest</code></p>\n<pre><code>\n</code></pre><p><code>-cpuprofile &lt;output file&gt;</code></p>\n<pre><code>cpu\n</code></pre><p><code>-d &lt;selectors&gt;</code></p>\n<pre><code> `-d &quot;*&quot;``-d &quot;publish&quot;``&quot;publish&quot;`\n</code></pre><p><code>-e</code></p>\n<pre><code>syslog/filestderr\n</code></pre><p><code>-httpprof [&lt;host&gt;]:&lt;port&gt;</code></p>\n<pre><code>http\n</code></pre><p><code>-memprofile &lt;output file&gt;</code></p>\n<pre><code>\n</code></pre><p><code>-path.config</code></p>\n<pre><code>\n</code></pre><p><code>-path.data</code></p>\n<pre><code>data\n</code></pre><p><code>-path.home</code></p>\n<pre><code>\n</code></pre><p><code>-path.logs</code></p>\n<pre><code>\n</code></pre><p><code>-v</code></p>\n<pre><code>INFO\n</code></pre><p><code>-version</code></p>\n<pre><code>beat\n</code></pre><p><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/configuring-howto-heartbeat.html\">logstash,redis</a><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/configuration-processors.html\">Processors</a><a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields.html\">Exported Fields</a>,<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/securing-heartbeat.html\">Securing Heartbeat</a></p>\n<h1 id=\"Heartbeat-ElastAlert-\"><a href=\"#Heartbeat-ElastAlert-\" class=\"headerlink\" title=\"Heartbeat+ElastAlert \"></a>Heartbeat+ElastAlert </h1><p>ElastAlert <a href=\"https://anjia.ml/2017/03/03/heartbeat/\"></a> </p>\n<p>(pinghttp)Heartbeatup=true<a href=\"https://www.elastic.co/guide/en/beats/heartbeat/current/exported-fields-common.html#_up\">common fields#_up</a> </p>\n<p>ElastAlert<a href=\"https://elastalert.readthedocs.io/en/latest/ruletypes.html#change\">change rule</a> <code>example_rules/example_change.yaml</code>change ruleup/down (-&gt;/-&gt;)</p>\n<p></p>\n<figure class=\"highlight yaml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\"># Alert when some field changes between documents</span></div><div class=\"line\"><span class=\"comment\"># This rule would alert on documents similar to the following:</span></div><div class=\"line\"><span class=\"comment\"># &#123;'username': 'bob', 'country_name': 'USA', '@timestamp': '2014-10-15T00:00:00'&#125;</span></div><div class=\"line\"><span class=\"comment\"># &#123;'username': 'bob', 'country_name': 'Russia', '@timestamp': '2014-10-15T05:00:00'&#125;</span></div><div class=\"line\"><span class=\"comment\"># Because the user (query_key) bob logged in from different countries (compare_key) in the same day (timeframe)</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional)</span></div><div class=\"line\"><span class=\"comment\"># Elasticsearch host</span></div><div class=\"line\"><span class=\"comment\"># es_host: elasticsearch.example.com</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional)</span></div><div class=\"line\"><span class=\"comment\"># Elasticsearch port</span></div><div class=\"line\"><span class=\"comment\"># es_port: 14900</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional) Connect with SSL to Elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#use_ssl: True</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Optional) basic-auth username and password for elasticsearch</span></div><div class=\"line\"><span class=\"comment\">#es_username: someusername</span></div><div class=\"line\"><span class=\"comment\">#es_password: somepassword</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Rule name, must be unique</span></div><div class=\"line\"><span class=\"attr\">name:</span> heartbeat-monitor</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Type of alert.</span></div><div class=\"line\"><span class=\"comment\"># the change rule will alert when a certain field changes in two documents within a timeframe</span></div><div class=\"line\"><span class=\"attr\">type:</span> change</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># Index to search, wildcard supported</span></div><div class=\"line\"><span class=\"attr\">index:</span> heartbeat-*</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The field to look for changes in</span></div><div class=\"line\"><span class=\"attr\">compare_key:</span> up</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># Ignore documents without the compare_key (country_name) field</span></div><div class=\"line\"><span class=\"attr\">ignore_null:</span> <span class=\"literal\">true</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The change must occur in two documents with the same query_key</span></div><div class=\"line\"><span class=\"attr\">query_key:</span> monitor</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required, change specific)</span></div><div class=\"line\"><span class=\"comment\"># The value of compare_key must change in two events that are less than timeframe apart to trigger an alert</span></div><div class=\"line\"><span class=\"attr\">num_events:</span> <span class=\"number\">1</span></div><div class=\"line\"><span class=\"attr\">timeframe:</span></div><div class=\"line\"><span class=\"attr\">    minutes:</span> <span class=\"number\">1</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># (Required)</span></div><div class=\"line\"><span class=\"comment\"># The alert is use when a match is found</span></div><div class=\"line\"><span class=\"attr\">alert:</span></div><div class=\"line\"><span class=\"comment\">#- \"email\"</span></div><div class=\"line\"><span class=\"comment\">#- \"debug\"</span></div><div class=\"line\"><span class=\"bullet\">-</span> <span class=\"string\">\"elastalert_modules.wechat_qiye_alert.WeChatAlerter\"</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;-&gt;-&gt;CorpIDSecret</span></div><div class=\"line\"><span class=\"comment\">#appid</span></div><div class=\"line\"><span class=\"attr\">corp_id:</span> xxx</div><div class=\"line\"><span class=\"comment\">#Secret</span></div><div class=\"line\"><span class=\"attr\">secret:</span> xxx</div><div class=\"line\"><span class=\"comment\">#-&gt;-&gt;id</span></div><div class=\"line\"><span class=\"comment\">#id</span></div><div class=\"line\"><span class=\"attr\">agent_id:</span> xxx</div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\">#party_id: xxx</span></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"><span class=\"comment\">#user_id: xxx</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"attr\">tag_id:</span> xxx</div></pre></td></tr></table></figure>\n<p>elastalert<a href=\"https://github.com/Yelp/elastalert/pull/926\">Pull request#926</a><a href=\"https://github.com/Yelp/elastalert/issues/925\">Issue#925</a>  <code>elastalert\\ruletypes.py#L135</code> <code>not val</code> <code>val is None</code><a href=\"https://github.com/Yelp/elastalert/issues/925\">Issue#925</a></p>\n<p>HeartbeatElasticsearchElasticsearchElastalert<code>xx hits/xx hits</code></p>\n<p><img src=\"https://ooo.0o0.ooo/2017/03/03/58b9040175781.png\" alt=\"snipaste20170303_134853.png\"></p>\n"},{"title":"jdk","date":"2017-05-17T04:39:16.000Z","_content":"\n## windows \n\njavaoraclewindowszip\n\nwindows\n1. \n2. java.exe,javaw.exe `C:\\Windows\\System32``C:\\Windows\\SysWOW64` \n3. \n4. `PATH`oraclejavapath,`jre\\bin`\n\n\n\n\njdk7jdk8path`%JAVA_HOME%\\bin;``%JAVA_HOME%\\jre\\bin;`\n\n\n\n\n http://www.oracle.com/technetwork/java/javase/downloads/index.html jdk windows\ne.g.\n`jdk-8u131-windows-x64.exe`\n\n`E:\\jdk-8u131-windows-x64\\` `Win+R`->`cmd`\n\n```\ncd /d E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\nextrac32.exe 111\n\n::  tools.zip \n:: \nexplorer.exe .\n:: tools.zip ,e.g. `E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools`\n\n::  .pack.jar\n\ncd tools\nfor /r %x in (*.pack) do .\\bin\\unpack200 -r \"%x\" \"%~dx%~px%~nx.jar\"\n\n::  src.zip  src.zip \n\ncd ..\\..\\JAVA_CAB9\nextrac32 110\n\n:: src.ziptools\n\nmove src.zip ..\\JAVA_CAB10\\tools\\\n\n:: toolse.g. D:\\jdk\n\nxcopy /s /e /i /y E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools d:\\jdk\n\n::  E:\\jdk-8u131-windows-x64 \ncd / && rd /s /q E:\\jdk-8u131-windows-x64\n```\n\n \n `JAVA_HOME` `d:\\jdk`\n\n`PATH`\n\n `;%JAVA_HOME%\\bin;`\n\n `CLASSPATH`\n\n`.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;`\n\n`cmd`\n\n```\njava -version && javac -version\njava version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b15, mixed mode)\njavac 1.8.0_131\n```\n\n\n## linux \n```bash\n\n# \n$ wget -P ~/downloads --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.tar.gz\n\n# \n$ sudo tar zxf ~/downloads/jdk-*.tar.gz -C /usr/local/\n\n#\n$ sudo ln -sf /usr/local/jdk1.8.0_121 /usr/local/jdk\n\n$ sudo vi /etc/profile\n\n#java\nexport JAVA_HOME=/usr/local/jdk\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar;:$JAVA_HOME/lib/tools.jar:$CLASSPATH\nexport PATH=$JAVA_HOME/bin:$PATH\n\n#\n\n#\n$ source /etc/profile\n```\n\n\n\n https://anjia.ml/2017/05/17/jdk-zip/\n http://www.jianshu.com/p/5dc20d5d4f5c\n https://juejin.im/post/591bdb222f301e006bcde36b","source":"_posts/jdk-zip.md","raw":"---\ntitle: jdk\ndate: 2017-05-17 12:39:16\ntags: java\n---\n\n## windows \n\njavaoraclewindowszip\n\nwindows\n1. \n2. java.exe,javaw.exe `C:\\Windows\\System32``C:\\Windows\\SysWOW64` \n3. \n4. `PATH`oraclejavapath,`jre\\bin`\n\n\n\n\njdk7jdk8path`%JAVA_HOME%\\bin;``%JAVA_HOME%\\jre\\bin;`\n\n\n\n\n http://www.oracle.com/technetwork/java/javase/downloads/index.html jdk windows\ne.g.\n`jdk-8u131-windows-x64.exe`\n\n`E:\\jdk-8u131-windows-x64\\` `Win+R`->`cmd`\n\n```\ncd /d E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\nextrac32.exe 111\n\n::  tools.zip \n:: \nexplorer.exe .\n:: tools.zip ,e.g. `E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools`\n\n::  .pack.jar\n\ncd tools\nfor /r %x in (*.pack) do .\\bin\\unpack200 -r \"%x\" \"%~dx%~px%~nx.jar\"\n\n::  src.zip  src.zip \n\ncd ..\\..\\JAVA_CAB9\nextrac32 110\n\n:: src.ziptools\n\nmove src.zip ..\\JAVA_CAB10\\tools\\\n\n:: toolse.g. D:\\jdk\n\nxcopy /s /e /i /y E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools d:\\jdk\n\n::  E:\\jdk-8u131-windows-x64 \ncd / && rd /s /q E:\\jdk-8u131-windows-x64\n```\n\n \n `JAVA_HOME` `d:\\jdk`\n\n`PATH`\n\n `;%JAVA_HOME%\\bin;`\n\n `CLASSPATH`\n\n`.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;`\n\n`cmd`\n\n```\njava -version && javac -version\njava version \"1.8.0_131\"\nJava(TM) SE Runtime Environment (build 1.8.0_131-b15)\nJava HotSpot(TM) 64-Bit Server VM (build 25.131-b15, mixed mode)\njavac 1.8.0_131\n```\n\n\n## linux \n```bash\n\n# \n$ wget -P ~/downloads --no-check-certificate --no-cookies --header \"Cookie: oraclelicense=accept-securebackup-cookie\" http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.tar.gz\n\n# \n$ sudo tar zxf ~/downloads/jdk-*.tar.gz -C /usr/local/\n\n#\n$ sudo ln -sf /usr/local/jdk1.8.0_121 /usr/local/jdk\n\n$ sudo vi /etc/profile\n\n#java\nexport JAVA_HOME=/usr/local/jdk\nexport CLASSPATH=.:$JAVA_HOME/lib/dt.jar;:$JAVA_HOME/lib/tools.jar:$CLASSPATH\nexport PATH=$JAVA_HOME/bin:$PATH\n\n#\n\n#\n$ source /etc/profile\n```\n\n\n\n https://anjia.ml/2017/05/17/jdk-zip/\n http://www.jianshu.com/p/5dc20d5d4f5c\n https://juejin.im/post/591bdb222f301e006bcde36b","slug":"jdk-zip","published":1,"updated":"2017-05-17T05:17:57.917Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbo7000bvkdo8ihyp5ig","content":"<h2 id=\"windows-\"><a href=\"#windows-\" class=\"headerlink\" title=\"windows \"></a>windows </h2><p>javaoraclewindowszip</p>\n<p>windows</p>\n<ol>\n<li></li>\n<li>java.exe,javaw.exe <code>C:\\Windows\\System32</code><code>C:\\Windows\\SysWOW64</code> </li>\n<li></li>\n<li><code>PATH</code>oraclejavapath,<code>jre\\bin</code></li>\n</ol>\n<p></p>\n<p>jdk7jdk8path<code>%JAVA_HOME%\\bin;</code><code>%JAVA_HOME%\\jre\\bin;</code></p>\n<p></p>\n<p> <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\" target=\"_blank\" rel=\"external\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> jdk windows<br>e.g.<br><code>jdk-8u131-windows-x64.exe</code></p>\n<p><code>E:\\jdk-8u131-windows-x64\\</code> <code>Win+R</code>-&gt;<code>cmd</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">cd /d E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10</div><div class=\"line\">extrac32.exe 111</div><div class=\"line\"></div><div class=\"line\">::  tools.zip </div><div class=\"line\">:: </div><div class=\"line\">explorer.exe .</div><div class=\"line\">:: tools.zip ,e.g. `E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools`</div><div class=\"line\"></div><div class=\"line\">::  .pack.jar</div><div class=\"line\"></div><div class=\"line\">cd tools</div><div class=\"line\">for /r %x in (*.pack) do .\\bin\\unpack200 -r &quot;%x&quot; &quot;%~dx%~px%~nx.jar&quot;</div><div class=\"line\"></div><div class=\"line\">::  src.zip  src.zip </div><div class=\"line\"></div><div class=\"line\">cd ..\\..\\JAVA_CAB9</div><div class=\"line\">extrac32 110</div><div class=\"line\"></div><div class=\"line\">:: src.ziptools</div><div class=\"line\"></div><div class=\"line\">move src.zip ..\\JAVA_CAB10\\tools\\</div><div class=\"line\"></div><div class=\"line\">:: toolse.g. D:\\jdk</div><div class=\"line\"></div><div class=\"line\">xcopy /s /e /i /y E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools d:\\jdk</div><div class=\"line\"></div><div class=\"line\">::  E:\\jdk-8u131-windows-x64 </div><div class=\"line\">cd / &amp;&amp; rd /s /q E:\\jdk-8u131-windows-x64</div></pre></td></tr></table></figure>\n<p><br> <code>JAVA_HOME</code> <code>d:\\jdk</code></p>\n<p><code>PATH</code></p>\n<p> <code>;%JAVA_HOME%\\bin;</code></p>\n<p> <code>CLASSPATH</code></p>\n<p><code>.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;</code></p>\n<p><code>cmd</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">java -version &amp;&amp; javac -version</div><div class=\"line\">java version &quot;1.8.0_131&quot;</div><div class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_131-b15)</div><div class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.131-b15, mixed mode)</div><div class=\"line\">javac 1.8.0_131</div></pre></td></tr></table></figure>\n<h2 id=\"linux-\"><a href=\"#linux-\" class=\"headerlink\" title=\"linux \"></a>linux </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">$ wget -P ~/downloads --no-check-certificate --no-cookies --header <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span> http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.tar.gz</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">$ sudo tar zxf ~/downloads/jdk-*.tar.gz -C /usr/<span class=\"built_in\">local</span>/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">$ sudo ln -sf /usr/<span class=\"built_in\">local</span>/jdk1.8.0_121 /usr/<span class=\"built_in\">local</span>/jdk</div><div class=\"line\"></div><div class=\"line\">$ sudo vi /etc/profile</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#java</span></div><div class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/<span class=\"built_in\">local</span>/jdk</div><div class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar;:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar:<span class=\"variable\">$CLASSPATH</span></div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">$ <span class=\"built_in\">source</span> /etc/profile</div></pre></td></tr></table></figure>\n<p></p>\n<p> <a href=\"https://anjia.ml/2017/05/17/jdk-zip/\">https://anjia.ml/2017/05/17/jdk-zip/</a><br> <a href=\"http://www.jianshu.com/p/5dc20d5d4f5c\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/5dc20d5d4f5c</a><br> <a href=\"https://juejin.im/post/591bdb222f301e006bcde36b\" target=\"_blank\" rel=\"external\">https://juejin.im/post/591bdb222f301e006bcde36b</a></p>\n","excerpt":"","more":"<h2 id=\"windows-\"><a href=\"#windows-\" class=\"headerlink\" title=\"windows \"></a>windows </h2><p>javaoraclewindowszip</p>\n<p>windows</p>\n<ol>\n<li></li>\n<li>java.exe,javaw.exe <code>C:\\Windows\\System32</code><code>C:\\Windows\\SysWOW64</code> </li>\n<li></li>\n<li><code>PATH</code>oraclejavapath,<code>jre\\bin</code></li>\n</ol>\n<p></p>\n<p>jdk7jdk8path<code>%JAVA_HOME%\\bin;</code><code>%JAVA_HOME%\\jre\\bin;</code></p>\n<p></p>\n<p> <a href=\"http://www.oracle.com/technetwork/java/javase/downloads/index.html\">http://www.oracle.com/technetwork/java/javase/downloads/index.html</a> jdk windows<br>e.g.<br><code>jdk-8u131-windows-x64.exe</code></p>\n<p><code>E:\\jdk-8u131-windows-x64\\</code> <code>Win+R</code>-&gt;<code>cmd</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">cd /d E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10</div><div class=\"line\">extrac32.exe 111</div><div class=\"line\"></div><div class=\"line\">::  tools.zip </div><div class=\"line\">:: </div><div class=\"line\">explorer.exe .</div><div class=\"line\">:: tools.zip ,e.g. `E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools`</div><div class=\"line\"></div><div class=\"line\">::  .pack.jar</div><div class=\"line\"></div><div class=\"line\">cd tools</div><div class=\"line\">for /r %x in (*.pack) do .\\bin\\unpack200 -r &quot;%x&quot; &quot;%~dx%~px%~nx.jar&quot;</div><div class=\"line\"></div><div class=\"line\">::  src.zip  src.zip </div><div class=\"line\"></div><div class=\"line\">cd ..\\..\\JAVA_CAB9</div><div class=\"line\">extrac32 110</div><div class=\"line\"></div><div class=\"line\">:: src.ziptools</div><div class=\"line\"></div><div class=\"line\">move src.zip ..\\JAVA_CAB10\\tools\\</div><div class=\"line\"></div><div class=\"line\">:: toolse.g. D:\\jdk</div><div class=\"line\"></div><div class=\"line\">xcopy /s /e /i /y E:\\jdk-8u131-windows-x64\\.rsrc\\1033\\JAVA_CAB10\\tools d:\\jdk</div><div class=\"line\"></div><div class=\"line\">::  E:\\jdk-8u131-windows-x64 </div><div class=\"line\">cd / &amp;&amp; rd /s /q E:\\jdk-8u131-windows-x64</div></pre></td></tr></table></figure>\n<p><br> <code>JAVA_HOME</code> <code>d:\\jdk</code></p>\n<p><code>PATH</code></p>\n<p> <code>;%JAVA_HOME%\\bin;</code></p>\n<p> <code>CLASSPATH</code></p>\n<p><code>.;%JAVA_HOME%\\lib\\dt.jar;%JAVA_HOME%\\lib\\tools.jar;</code></p>\n<p><code>cmd</code></p>\n<figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">java -version &amp;&amp; javac -version</div><div class=\"line\">java version &quot;1.8.0_131&quot;</div><div class=\"line\">Java(TM) SE Runtime Environment (build 1.8.0_131-b15)</div><div class=\"line\">Java HotSpot(TM) 64-Bit Server VM (build 25.131-b15, mixed mode)</div><div class=\"line\">javac 1.8.0_131</div></pre></td></tr></table></figure>\n<h2 id=\"linux-\"><a href=\"#linux-\" class=\"headerlink\" title=\"linux \"></a>linux </h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">$ wget -P ~/downloads --no-check-certificate --no-cookies --header <span class=\"string\">\"Cookie: oraclelicense=accept-securebackup-cookie\"</span> http://download.oracle.com/otn-pub/java/jdk/8u121-b13/e9e7ea248e2c4826b92b3f075a80e441/jdk-8u121-linux-x64.tar.gz</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\">$ sudo tar zxf ~/downloads/jdk-*.tar.gz -C /usr/<span class=\"built_in\">local</span>/</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">$ sudo ln -sf /usr/<span class=\"built_in\">local</span>/jdk1.8.0_121 /usr/<span class=\"built_in\">local</span>/jdk</div><div class=\"line\"></div><div class=\"line\">$ sudo vi /etc/profile</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#java</span></div><div class=\"line\"><span class=\"built_in\">export</span> JAVA_HOME=/usr/<span class=\"built_in\">local</span>/jdk</div><div class=\"line\"><span class=\"built_in\">export</span> CLASSPATH=.:<span class=\"variable\">$JAVA_HOME</span>/lib/dt.jar;:<span class=\"variable\">$JAVA_HOME</span>/lib/tools.jar:<span class=\"variable\">$CLASSPATH</span></div><div class=\"line\"><span class=\"built_in\">export</span> PATH=<span class=\"variable\">$JAVA_HOME</span>/bin:<span class=\"variable\">$PATH</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">$ <span class=\"built_in\">source</span> /etc/profile</div></pre></td></tr></table></figure>\n<p></p>\n<p> <a href=\"https://anjia.ml/2017/05/17/jdk-zip/\">https://anjia.ml/2017/05/17/jdk-zip/</a><br> <a href=\"http://www.jianshu.com/p/5dc20d5d4f5c\">http://www.jianshu.com/p/5dc20d5d4f5c</a><br> <a href=\"https://juejin.im/post/591bdb222f301e006bcde36b\">https://juejin.im/post/591bdb222f301e006bcde36b</a></p>\n"},{"title":"nginx$request_body (\\x22\\x9B\\x5C\\x09\\x08...)","date":"2017-06-21T02:11:46.000Z","_content":"nginx`request_body` `PUT`,`POST`  `\\x22` `\\x9B` `\\x5C` `\\x09` `\\x08` \n\n<!-- more -->\n\n `request_body`http method [http1.1 9 Method Definitions][link9MethodDefinitions]  [Payloads of HTTP Request Methods][linkPayloadsOfHttpRequestMethods]\n\n\n`nginx.conf` access_log \n```\n    log_format  main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"'\n                      '$http_host $upstream_status $upstream_addr $request_time $upstream_response_time'; \n```\n\n\n```\n    log_format json_log escape=json '{\"realip\":\"$remote_addr\",\"@timestamp\":\"$time_iso8601\",\"host\":\"$http_host\",\"request\":\"$request\",\"req_body\":\"$request_body\",\"status\":\"$status\",\"size\":$body_bytes_sent,\"ua\":\"$http_user_agent\",\"cookie\":\"$http_cookie\",\"req_time\":\"$request_time\",\"uri\":\"$uri\",\"referer\":\"$http_referer\",\"xff\":\"$http_x_forwarded_for\",\"ups_status\":\"$upstream_status\",\"ups_addr\":\"$upstream_addr\",\"ups_time\":\"$upstream_response_time\"}';\n```\n\n [How to generate a JSON log from nginx?][linkHowToGenerateAJsonLogFromNginx?]\n\n[ngx_http_log_module.html#log_format][ngx_http_log_module] `escape`*1.11.8*\n\nlinux`shell``logstash``ruby`  [Optionally support handling of \\x escape codes][linkOptionallySupportHandlingOf\\xEscape]\n\n [https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/][blog]\n [http://www.jianshu.com/p/8409f28f32e9][jianshu]\n [https://juejin.im/post/5949e0f7128fe1006a627cc0][juejin]\n\n\n[link9MethodDefinitions]: https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html\n[linkPayloadsOfHttpRequestMethods]: https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods#answer-5928241\n[linkHowToGenerateAJsonLogFromNginx?]: https://stackoverflow.com/questions/25049667/how-to-generate-a-json-log-from-nginx#answer-42564710\n[ngx_http_log_module]: http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format\n[linkOptionallySupportHandlingOf\\xEscape]: https://github.com/logstash-plugins/logstash-codec-json/issues/2\n[jianshu]: http://www.jianshu.com/p/8409f28f32e9\n[juejin]: https://juejin.im/post/5949e0f7128fe1006a627cc0\n[blog]: https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/\n","source":"_posts/nginx-logging-request-body-as-hexidecimal.md","raw":"---\ntitle: nginx$request_body (\\x22\\x9B\\x5C\\x09\\x08...)\ndate: 2017-06-21 10:11:46\ntags: [nginx,logstash,elk,elkstack]\ncategories: [nginx]\n---\nnginx`request_body` `PUT`,`POST`  `\\x22` `\\x9B` `\\x5C` `\\x09` `\\x08` \n\n<!-- more -->\n\n `request_body`http method [http1.1 9 Method Definitions][link9MethodDefinitions]  [Payloads of HTTP Request Methods][linkPayloadsOfHttpRequestMethods]\n\n\n`nginx.conf` access_log \n```\n    log_format  main '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"'\n                      '$http_host $upstream_status $upstream_addr $request_time $upstream_response_time'; \n```\n\n\n```\n    log_format json_log escape=json '{\"realip\":\"$remote_addr\",\"@timestamp\":\"$time_iso8601\",\"host\":\"$http_host\",\"request\":\"$request\",\"req_body\":\"$request_body\",\"status\":\"$status\",\"size\":$body_bytes_sent,\"ua\":\"$http_user_agent\",\"cookie\":\"$http_cookie\",\"req_time\":\"$request_time\",\"uri\":\"$uri\",\"referer\":\"$http_referer\",\"xff\":\"$http_x_forwarded_for\",\"ups_status\":\"$upstream_status\",\"ups_addr\":\"$upstream_addr\",\"ups_time\":\"$upstream_response_time\"}';\n```\n\n [How to generate a JSON log from nginx?][linkHowToGenerateAJsonLogFromNginx?]\n\n[ngx_http_log_module.html#log_format][ngx_http_log_module] `escape`*1.11.8*\n\nlinux`shell``logstash``ruby`  [Optionally support handling of \\x escape codes][linkOptionallySupportHandlingOf\\xEscape]\n\n [https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/][blog]\n [http://www.jianshu.com/p/8409f28f32e9][jianshu]\n [https://juejin.im/post/5949e0f7128fe1006a627cc0][juejin]\n\n\n[link9MethodDefinitions]: https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html\n[linkPayloadsOfHttpRequestMethods]: https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods#answer-5928241\n[linkHowToGenerateAJsonLogFromNginx?]: https://stackoverflow.com/questions/25049667/how-to-generate-a-json-log-from-nginx#answer-42564710\n[ngx_http_log_module]: http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format\n[linkOptionallySupportHandlingOf\\xEscape]: https://github.com/logstash-plugins/logstash-codec-json/issues/2\n[jianshu]: http://www.jianshu.com/p/8409f28f32e9\n[juejin]: https://juejin.im/post/5949e0f7128fe1006a627cc0\n[blog]: https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/\n","slug":"nginx-logging-request-body-as-hexidecimal","published":1,"updated":"2017-06-21T03:07:45.271Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbob000fvkdo4p8r8qhw","content":"<p>nginx<code>request_body</code> <code>PUT</code>,<code>POST</code>  <code>\\x22</code> <code>\\x9B</code> <code>\\x5C</code> <code>\\x09</code> <code>\\x08</code> </p>\n<a id=\"more\"></a>\n<p> <code>request_body</code>http method <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html\" target=\"_blank\" rel=\"external\">http1.1 9 Method Definitions</a>  <a href=\"https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods#answer-5928241\" target=\"_blank\" rel=\"external\">Payloads of HTTP Request Methods</a></p>\n<p><code>nginx.conf</code> access_log <br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">log_format  main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</div><div class=\"line\">                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</div><div class=\"line\">                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;</div><div class=\"line\">                  &apos;$http_host $upstream_status $upstream_addr $request_time $upstream_response_time&apos;;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">log_format json_log escape=json &apos;&#123;&quot;realip&quot;:&quot;$remote_addr&quot;,&quot;@timestamp&quot;:&quot;$time_iso8601&quot;,&quot;host&quot;:&quot;$http_host&quot;,&quot;request&quot;:&quot;$request&quot;,&quot;req_body&quot;:&quot;$request_body&quot;,&quot;status&quot;:&quot;$status&quot;,&quot;size&quot;:$body_bytes_sent,&quot;ua&quot;:&quot;$http_user_agent&quot;,&quot;cookie&quot;:&quot;$http_cookie&quot;,&quot;req_time&quot;:&quot;$request_time&quot;,&quot;uri&quot;:&quot;$uri&quot;,&quot;referer&quot;:&quot;$http_referer&quot;,&quot;xff&quot;:&quot;$http_x_forwarded_for&quot;,&quot;ups_status&quot;:&quot;$upstream_status&quot;,&quot;ups_addr&quot;:&quot;$upstream_addr&quot;,&quot;ups_time&quot;:&quot;$upstream_response_time&quot;&#125;&apos;;</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://stackoverflow.com/questions/25049667/how-to-generate-a-json-log-from-nginx#answer-42564710\" target=\"_blank\" rel=\"external\">How to generate a JSON log from nginx?</a></p>\n<p><a href=\"http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format\" target=\"_blank\" rel=\"external\">ngx_http_log_module.html#log_format</a> <code>escape</code><em>1.11.8</em></p>\n<p>linux<code>shell</code><code>logstash</code><code>ruby</code>  <a href=\"https://github.com/logstash-plugins/logstash-codec-json/issues/2\" target=\"_blank\" rel=\"external\">Optionally support handling of \\x escape codes</a></p>\n<p> <a href=\"https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/\">https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/</a><br> <a href=\"http://www.jianshu.com/p/8409f28f32e9\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/8409f28f32e9</a><br> <a href=\"https://juejin.im/post/5949e0f7128fe1006a627cc0\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5949e0f7128fe1006a627cc0</a></p>\n","excerpt":"<p>nginx<code>request_body</code> <code>PUT</code>,<code>POST</code>  <code>\\x22</code> <code>\\x9B</code> <code>\\x5C</code> <code>\\x09</code> <code>\\x08</code> </p>","more":"<p> <code>request_body</code>http method <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html\">http1.1 9 Method Definitions</a>  <a href=\"https://stackoverflow.com/questions/5905916/payloads-of-http-request-methods#answer-5928241\">Payloads of HTTP Request Methods</a></p>\n<p><code>nginx.conf</code> access_log <br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">log_format  main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &apos;</div><div class=\"line\">                  &apos;$status $body_bytes_sent &quot;$http_referer&quot; &apos;</div><div class=\"line\">                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;</div><div class=\"line\">                  &apos;$http_host $upstream_status $upstream_addr $request_time $upstream_response_time&apos;;</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">log_format json_log escape=json &apos;&#123;&quot;realip&quot;:&quot;$remote_addr&quot;,&quot;@timestamp&quot;:&quot;$time_iso8601&quot;,&quot;host&quot;:&quot;$http_host&quot;,&quot;request&quot;:&quot;$request&quot;,&quot;req_body&quot;:&quot;$request_body&quot;,&quot;status&quot;:&quot;$status&quot;,&quot;size&quot;:$body_bytes_sent,&quot;ua&quot;:&quot;$http_user_agent&quot;,&quot;cookie&quot;:&quot;$http_cookie&quot;,&quot;req_time&quot;:&quot;$request_time&quot;,&quot;uri&quot;:&quot;$uri&quot;,&quot;referer&quot;:&quot;$http_referer&quot;,&quot;xff&quot;:&quot;$http_x_forwarded_for&quot;,&quot;ups_status&quot;:&quot;$upstream_status&quot;,&quot;ups_addr&quot;:&quot;$upstream_addr&quot;,&quot;ups_time&quot;:&quot;$upstream_response_time&quot;&#125;&apos;;</div></pre></td></tr></table></figure></p>\n<p> <a href=\"https://stackoverflow.com/questions/25049667/how-to-generate-a-json-log-from-nginx#answer-42564710\">How to generate a JSON log from nginx?</a></p>\n<p><a href=\"http://nginx.org/en/docs/http/ngx_http_log_module.html#log_format\">ngx_http_log_module.html#log_format</a> <code>escape</code><em>1.11.8</em></p>\n<p>linux<code>shell</code><code>logstash</code><code>ruby</code>  <a href=\"https://github.com/logstash-plugins/logstash-codec-json/issues/2\">Optionally support handling of \\x escape codes</a></p>\n<p> <a href=\"https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/\">https://anjia.ml/2017/06/21/nginx-logging-request-body-as-hexidecimal/</a><br> <a href=\"http://www.jianshu.com/p/8409f28f32e9\">http://www.jianshu.com/p/8409f28f32e9</a><br> <a href=\"https://juejin.im/post/5949e0f7128fe1006a627cc0\">https://juejin.im/post/5949e0f7128fe1006a627cc0</a></p>"},{"title":"Owncloud+Nginx16G","date":"2017-04-05T04:21:25.000Z","_content":"\n## [Owncloud](https://owncloud.org/)\nWindows,Mac,Linux android,ios,blackberry\n\n## \n- Ubuntu-16.04_64\n- Owncloud9.14-2.1\n- SQLite3\n- PHP7\n- Nginx 1.10.0\n\n## \n\n### linux\n[owncloud-9.1](http://download.owncloud.org/download/repositories/9.1/owncloud/)\n\n### \nUbuntu-16.04 owncloud-9.14-2.1\n\n#### rootowncloud\n\n```bash\nsu root\n\nwget -nv https://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/Release.key -O Release.key\napt-key add - < Release.key\n```\n\n#### rootowncloud\n```bash\nsh -c \"echo 'deb http://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/ /' > /etc/apt/sources.list.d/owncloud.list\"\napt  update -y && apt install owncloud -y\n```\n\n## \n\n### PHP7\n\n```bash\nsudo apt-get install -y php7.0-common  php7.0-gd php7.0-json php7.0-mysql php7.0-curl  php7.0-intl php7.0-mcrypt php-imagick  php7.0-zip php7.0-xml php7.0-mbstring\n```\n\n### \n```bash\n#mariadb\nsudo apt-get install -y mariadb-server php7.0-mysql\n\n#sqlite3\nsudo apt-get install -y sqlite3 php7.0-sqlite3\n```\n\n### web\n```bash\n#apache2\nsudo apt-get install -y apache2 libapache2-mod-php7.0\n\n#nginx\nsudo apt-get install -y nginx php7.0-fpm \n```\n\n### fpm(nginx)\n```bash\n$ vi /etc/php/7.0/fpm/pool.d/www.conf\n```\n\n`listen = /run/php/php7.0-fpm.sock``listen=127.0.0.1:9000`(36)\n\n`env`(384-388)\n```\nenv[HOSTNAME] = $HOSTNAME\nenv[PATH] = /usr/local/bin:/usr/bin:/bin\nenv[TMP] = /tmp\nenv[TMPDIR] = /tmp\nenv[TEMP] = /tmp\n```\n\n\n### \n```bash\n$ wget -P /tmp https://download.owncloud.org/download/community/owncloud-latest.zip  && sudo unzip /tmp/owncloud-latest.zip -d /var/www/ && rm -rf /tmp/owncloud-latest.zip\n```\n\n### www-data\n```bash\nsudo chown -R www-data:www-data /var/www/owncloud/\n```\n\n### \n[nginx+https](https://doc.owncloud.org/server/9.1/admin_manual/installation/nginx_examples.html)\n\n[(16G)](https://github.com/owncloud/documentation/wiki/Uploading-files-up-to-16GB)\n\n### nginx\n\n#### nginx\n```bash\n$ vi  /etc/nginx/sites-enabled/owncloud.conf\n\nupstream php-handler {\n    server 127.0.0.1:9000;\n    #server unix:/var/run/php5-fpm.sock;\n}\n\nserver {\n    listen 10010;\n    server_name 127.0.0.1;\n\n    # Add headers to serve security related headers\n    # Before enabling Strict-Transport-Security headers please read into this topic first.\n    #add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";\n    add_header X-Content-Type-Options nosniff;\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Robots-Tag none;\n    add_header X-Download-Options noopen;\n    add_header X-Permitted-Cross-Domain-Policies none;\n\n    # Path to the root of your installation\n    root /var/www/owncloud/;\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # The following 2 rules are only needed for the user_webfinger app.\n    # Uncomment it if you're planning to use this app.\n    #rewrite ^/.well-known/host-meta /public.php?service=host-meta last;\n    #rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;\n\n    location = /.well-known/carddav {\n        return 301 $scheme://$host/remote.php/dav;\n    }\n    location = /.well-known/caldav {\n        return 301 $scheme://$host/remote.php/dav;\n    }\n\n    location /.well-known/acme-challenge { }\n\n    # set max upload size\n    client_max_body_size 16400M;\n    fastcgi_buffers 64 4K;\n    fastcgi_read_timeout 600;\n    client_body_buffer_size 1048576k;\n    client_body_temp_path /tmp/owncloud;\n    \n    # Disable gzip to avoid the removal of the ETag header\n    gzip off;\n\n    # Uncomment if your server is build with the ngx_pagespeed module\n    # This module is currently not supported.\n    #pagespeed off;\n\n    error_page 403 /core/templates/403.php;\n    error_page 404 /core/templates/404.php;\n\n    location / {\n        rewrite ^ /index.php$uri;\n    }\n\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ {\n        return 404;\n    }\n    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console) {\n        return 404;\n    }\n\n    location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\\.php(?:$|/) {\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $fastcgi_path_info;\n        #fastcgi_param HTTPS on;\n        fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off; #Available since nginx 1.7.11\n    }\n\n    location ~ ^/(?:updater|ocs-provider)(?:$|/) {\n        try_files $uri $uri/ =404;\n        index index.php;\n    }\n\n    # Adding the cache control header for js and css files\n    # Make sure it is BELOW the PHP block\n    location ~* \\.(?:css|js)$ {\n        try_files $uri /index.php$uri$is_args$args;\n        add_header Cache-Control \"public, max-age=7200\";\n        # Add headers to serve security related headers (It is intended to have those duplicated to the ones above)\n        # Before enabling Strict-Transport-Security headers please read into this topic first.\n        #add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";\n        add_header X-Content-Type-Options nosniff;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n        add_header X-XSS-Protection \"1; mode=block\";\n        add_header X-Robots-Tag none;\n        add_header X-Download-Options noopen;\n        add_header X-Permitted-Cross-Domain-Policies none;\n        # Optional: Don't log access to assets\n        access_log off;\n    }\n\n    location ~* \\.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg)$ {\n        try_files $uri /index.php$uri$is_args$args;\n        # Optional: Don't log access to other assets\n        access_log off;\n    }\n}\n```\n#### php.ini\n```bash\n\n$ sudo vi /etc/php/7.0/fpm/php.ini\n\n##\n\n; should be bit bigger than upload_max_filesize 16400M = 16G + 16M = 16 * 1025 MB\npost_max_size = 16400M\n\n; cannot be bigger than post_max_size\nupload_max_filesize = 16G\n\n; on online servers this could require bigger values (my server is at home)\nmax_input_time = 3600\n\n; from ownCloud documentation - not sure if is required\noutput_buffering = Off\n\n; not sure if it is required [3] but it seems like ownCloud needs time to move the file to it's\n; final place after upload and that can take quite some time for big files\nmax_execution_time = 1800\n\n; you may also want to point this to a folder having enough space for big files being uploaded\nupload_tmp_dir = /tmp/owncloud\n\n```\n\n\n### \n```bash\n$ sudo service php7.0-fpm restart\n\n$ sudo service nginx restart\n```\n\n### \n`http://127.0.0.1:10010`,MariaDBMysql(mysqloracle)SQLite3SQLite3 https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html\n\n![owncloud.png](https://user-gold-cdn.xitu.io/2017/4/5/4469d32ea305747b364c60c6f03d8a39.png)\n\n### \n https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html\n```bash\nsudo vi /var/www/owncloud/config/config.php\n```\n\n```\n'trusted_domains' => \n  array (\n    0 => '127.0.0.1:10010',\n    1 => '',\n  ),\n```\n\n\n```\n'overwrite.cli.url' => 'http://',\n```\n\n### \n\n`http://127.0.0.1:10010/settings/users`,\n\n### \n\n https://owncloud.org/install/#install-clients","source":"_posts/owncloud.md","raw":"---\ntitle: Owncloud+Nginx16G\ndate: 2017-04-05 12:21:25\ntags: [owncloud]\ncategories: [owncloud]\n---\n\n## [Owncloud](https://owncloud.org/)\nWindows,Mac,Linux android,ios,blackberry\n\n## \n- Ubuntu-16.04_64\n- Owncloud9.14-2.1\n- SQLite3\n- PHP7\n- Nginx 1.10.0\n\n## \n\n### linux\n[owncloud-9.1](http://download.owncloud.org/download/repositories/9.1/owncloud/)\n\n### \nUbuntu-16.04 owncloud-9.14-2.1\n\n#### rootowncloud\n\n```bash\nsu root\n\nwget -nv https://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/Release.key -O Release.key\napt-key add - < Release.key\n```\n\n#### rootowncloud\n```bash\nsh -c \"echo 'deb http://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/ /' > /etc/apt/sources.list.d/owncloud.list\"\napt  update -y && apt install owncloud -y\n```\n\n## \n\n### PHP7\n\n```bash\nsudo apt-get install -y php7.0-common  php7.0-gd php7.0-json php7.0-mysql php7.0-curl  php7.0-intl php7.0-mcrypt php-imagick  php7.0-zip php7.0-xml php7.0-mbstring\n```\n\n### \n```bash\n#mariadb\nsudo apt-get install -y mariadb-server php7.0-mysql\n\n#sqlite3\nsudo apt-get install -y sqlite3 php7.0-sqlite3\n```\n\n### web\n```bash\n#apache2\nsudo apt-get install -y apache2 libapache2-mod-php7.0\n\n#nginx\nsudo apt-get install -y nginx php7.0-fpm \n```\n\n### fpm(nginx)\n```bash\n$ vi /etc/php/7.0/fpm/pool.d/www.conf\n```\n\n`listen = /run/php/php7.0-fpm.sock``listen=127.0.0.1:9000`(36)\n\n`env`(384-388)\n```\nenv[HOSTNAME] = $HOSTNAME\nenv[PATH] = /usr/local/bin:/usr/bin:/bin\nenv[TMP] = /tmp\nenv[TMPDIR] = /tmp\nenv[TEMP] = /tmp\n```\n\n\n### \n```bash\n$ wget -P /tmp https://download.owncloud.org/download/community/owncloud-latest.zip  && sudo unzip /tmp/owncloud-latest.zip -d /var/www/ && rm -rf /tmp/owncloud-latest.zip\n```\n\n### www-data\n```bash\nsudo chown -R www-data:www-data /var/www/owncloud/\n```\n\n### \n[nginx+https](https://doc.owncloud.org/server/9.1/admin_manual/installation/nginx_examples.html)\n\n[(16G)](https://github.com/owncloud/documentation/wiki/Uploading-files-up-to-16GB)\n\n### nginx\n\n#### nginx\n```bash\n$ vi  /etc/nginx/sites-enabled/owncloud.conf\n\nupstream php-handler {\n    server 127.0.0.1:9000;\n    #server unix:/var/run/php5-fpm.sock;\n}\n\nserver {\n    listen 10010;\n    server_name 127.0.0.1;\n\n    # Add headers to serve security related headers\n    # Before enabling Strict-Transport-Security headers please read into this topic first.\n    #add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";\n    add_header X-Content-Type-Options nosniff;\n    add_header X-Frame-Options \"SAMEORIGIN\";\n    add_header X-XSS-Protection \"1; mode=block\";\n    add_header X-Robots-Tag none;\n    add_header X-Download-Options noopen;\n    add_header X-Permitted-Cross-Domain-Policies none;\n\n    # Path to the root of your installation\n    root /var/www/owncloud/;\n\n    location = /robots.txt {\n        allow all;\n        log_not_found off;\n        access_log off;\n    }\n\n    # The following 2 rules are only needed for the user_webfinger app.\n    # Uncomment it if you're planning to use this app.\n    #rewrite ^/.well-known/host-meta /public.php?service=host-meta last;\n    #rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;\n\n    location = /.well-known/carddav {\n        return 301 $scheme://$host/remote.php/dav;\n    }\n    location = /.well-known/caldav {\n        return 301 $scheme://$host/remote.php/dav;\n    }\n\n    location /.well-known/acme-challenge { }\n\n    # set max upload size\n    client_max_body_size 16400M;\n    fastcgi_buffers 64 4K;\n    fastcgi_read_timeout 600;\n    client_body_buffer_size 1048576k;\n    client_body_temp_path /tmp/owncloud;\n    \n    # Disable gzip to avoid the removal of the ETag header\n    gzip off;\n\n    # Uncomment if your server is build with the ngx_pagespeed module\n    # This module is currently not supported.\n    #pagespeed off;\n\n    error_page 403 /core/templates/403.php;\n    error_page 404 /core/templates/404.php;\n\n    location / {\n        rewrite ^ /index.php$uri;\n    }\n\n    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ {\n        return 404;\n    }\n    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console) {\n        return 404;\n    }\n\n    location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\\.php(?:$|/) {\n        fastcgi_split_path_info ^(.+\\.php)(/.*)$;\n        include fastcgi_params;\n        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;\n        fastcgi_param PATH_INFO $fastcgi_path_info;\n        #fastcgi_param HTTPS on;\n        fastcgi_param modHeadersAvailable true; #Avoid sending the security headers twice\n        fastcgi_param front_controller_active true;\n        fastcgi_pass php-handler;\n        fastcgi_intercept_errors on;\n        fastcgi_request_buffering off; #Available since nginx 1.7.11\n    }\n\n    location ~ ^/(?:updater|ocs-provider)(?:$|/) {\n        try_files $uri $uri/ =404;\n        index index.php;\n    }\n\n    # Adding the cache control header for js and css files\n    # Make sure it is BELOW the PHP block\n    location ~* \\.(?:css|js)$ {\n        try_files $uri /index.php$uri$is_args$args;\n        add_header Cache-Control \"public, max-age=7200\";\n        # Add headers to serve security related headers (It is intended to have those duplicated to the ones above)\n        # Before enabling Strict-Transport-Security headers please read into this topic first.\n        #add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";\n        add_header X-Content-Type-Options nosniff;\n        add_header X-Frame-Options \"SAMEORIGIN\";\n        add_header X-XSS-Protection \"1; mode=block\";\n        add_header X-Robots-Tag none;\n        add_header X-Download-Options noopen;\n        add_header X-Permitted-Cross-Domain-Policies none;\n        # Optional: Don't log access to assets\n        access_log off;\n    }\n\n    location ~* \\.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg)$ {\n        try_files $uri /index.php$uri$is_args$args;\n        # Optional: Don't log access to other assets\n        access_log off;\n    }\n}\n```\n#### php.ini\n```bash\n\n$ sudo vi /etc/php/7.0/fpm/php.ini\n\n##\n\n; should be bit bigger than upload_max_filesize 16400M = 16G + 16M = 16 * 1025 MB\npost_max_size = 16400M\n\n; cannot be bigger than post_max_size\nupload_max_filesize = 16G\n\n; on online servers this could require bigger values (my server is at home)\nmax_input_time = 3600\n\n; from ownCloud documentation - not sure if is required\noutput_buffering = Off\n\n; not sure if it is required [3] but it seems like ownCloud needs time to move the file to it's\n; final place after upload and that can take quite some time for big files\nmax_execution_time = 1800\n\n; you may also want to point this to a folder having enough space for big files being uploaded\nupload_tmp_dir = /tmp/owncloud\n\n```\n\n\n### \n```bash\n$ sudo service php7.0-fpm restart\n\n$ sudo service nginx restart\n```\n\n### \n`http://127.0.0.1:10010`,MariaDBMysql(mysqloracle)SQLite3SQLite3 https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html\n\n![owncloud.png](https://user-gold-cdn.xitu.io/2017/4/5/4469d32ea305747b364c60c6f03d8a39.png)\n\n### \n https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html\n```bash\nsudo vi /var/www/owncloud/config/config.php\n```\n\n```\n'trusted_domains' => \n  array (\n    0 => '127.0.0.1:10010',\n    1 => '',\n  ),\n```\n\n\n```\n'overwrite.cli.url' => 'http://',\n```\n\n### \n\n`http://127.0.0.1:10010/settings/users`,\n\n### \n\n https://owncloud.org/install/#install-clients","slug":"owncloud","published":1,"updated":"2017-04-10T16:02:41.477Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbod000hvkdorvc6d5vo","content":"<h2 id=\"Owncloud\"><a href=\"#Owncloud\" class=\"headerlink\" title=\"Owncloud\"></a><a href=\"https://owncloud.org/\" target=\"_blank\" rel=\"external\">Owncloud</a></h2><p>Windows,Mac,Linux android,ios,blackberry</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Ubuntu-16.04_64</li>\n<li>Owncloud9.14-2.1</li>\n<li>SQLite3</li>\n<li>PHP7</li>\n<li>Nginx 1.10.0</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h3><p><a href=\"http://download.owncloud.org/download/repositories/9.1/owncloud/\" target=\"_blank\" rel=\"external\">owncloud-9.1</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Ubuntu-16.04 owncloud-9.14-2.1</p>\n<h4 id=\"rootowncloud\"><a href=\"#rootowncloud\" class=\"headerlink\" title=\"rootowncloud\"></a>rootowncloud</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">su root</div><div class=\"line\"></div><div class=\"line\">wget -nv https://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/Release.key -O Release.key</div><div class=\"line\">apt-key add - &lt; Release.key</div></pre></td></tr></table></figure>\n<h4 id=\"rootowncloud\"><a href=\"#rootowncloud\" class=\"headerlink\" title=\"rootowncloud\"></a>rootowncloud</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sh -c <span class=\"string\">\"echo 'deb http://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/ /' &gt; /etc/apt/sources.list.d/owncloud.list\"</span></div><div class=\"line\">apt  update -y &amp;&amp; apt install owncloud -y</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"PHP7\"><a href=\"#PHP7\" class=\"headerlink\" title=\"PHP7\"></a>PHP7</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo apt-get install -y php7.0-common  php7.0-gd php7.0-json php7.0-mysql php7.0-curl  php7.0-intl php7.0-mcrypt php-imagick  php7.0-zip php7.0-xml php7.0-mbstring</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#mariadb</span></div><div class=\"line\">sudo apt-get install -y mariadb-server php7.0-mysql</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#sqlite3</span></div><div class=\"line\">sudo apt-get install -y sqlite3 php7.0-sqlite3</div></pre></td></tr></table></figure>\n<h3 id=\"web\"><a href=\"#web\" class=\"headerlink\" title=\"web\"></a>web</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#apache2</span></div><div class=\"line\">sudo apt-get install -y apache2 libapache2-mod-php7.0</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#nginx</span></div><div class=\"line\">sudo apt-get install -y nginx php7.0-fpm</div></pre></td></tr></table></figure>\n<h3 id=\"fpm-nginx\"><a href=\"#fpm-nginx\" class=\"headerlink\" title=\"fpm(nginx)\"></a>fpm(nginx)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ vi /etc/php/7.0/fpm/pool.d/www.conf</div></pre></td></tr></table></figure>\n<p><code>listen = /run/php/php7.0-fpm.sock</code><code>listen=127.0.0.1:9000</code>(36)</p>\n<p><code>env</code>(384-388)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">env[HOSTNAME] = $HOSTNAME</div><div class=\"line\">env[PATH] = /usr/local/bin:/usr/bin:/bin</div><div class=\"line\">env[TMP] = /tmp</div><div class=\"line\">env[TMPDIR] = /tmp</div><div class=\"line\">env[TEMP] = /tmp</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ wget -P /tmp https://download.owncloud.org/download/community/owncloud-latest.zip  &amp;&amp; sudo unzip /tmp/owncloud-latest.zip <span class=\"_\">-d</span> /var/www/ &amp;&amp; rm -rf /tmp/owncloud-latest.zip</div></pre></td></tr></table></figure>\n<h3 id=\"www-data\"><a href=\"#www-data\" class=\"headerlink\" title=\"www-data\"></a>www-data</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo chown -R www-data:www-data /var/www/owncloud/</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://doc.owncloud.org/server/9.1/admin_manual/installation/nginx_examples.html\" target=\"_blank\" rel=\"external\">nginx+https</a></p>\n<p><a href=\"https://github.com/owncloud/documentation/wiki/Uploading-files-up-to-16GB\" target=\"_blank\" rel=\"external\">(16G)</a></p>\n<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><h4 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ vi  /etc/nginx/sites-enabled/owncloud.conf</div><div class=\"line\"></div><div class=\"line\">upstream php-handler &#123;</div><div class=\"line\">    server 127.0.0.1:9000;</div><div class=\"line\">    <span class=\"comment\">#server unix:/var/run/php5-fpm.sock;</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">server &#123;</div><div class=\"line\">    listen 10010;</div><div class=\"line\">    server_name 127.0.0.1;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Add headers to serve security related headers</span></div><div class=\"line\">    <span class=\"comment\"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></div><div class=\"line\">    <span class=\"comment\">#add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";</span></div><div class=\"line\">    add_header X-Content-Type-Options nosniff;</div><div class=\"line\">    add_header X-Frame-Options <span class=\"string\">\"SAMEORIGIN\"</span>;</div><div class=\"line\">    add_header X-XSS-Protection <span class=\"string\">\"1; mode=block\"</span>;</div><div class=\"line\">    add_header X-Robots-Tag none;</div><div class=\"line\">    add_header X-Download-Options noopen;</div><div class=\"line\">    add_header X-Permitted-Cross-Domain-Policies none;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Path to the root of your installation</span></div><div class=\"line\">    root /var/www/owncloud/;</div><div class=\"line\"></div><div class=\"line\">    location = /robots.txt &#123;</div><div class=\"line\">        allow all;</div><div class=\"line\">        log_not_found off;</div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># The following 2 rules are only needed for the user_webfinger app.</span></div><div class=\"line\">    <span class=\"comment\"># Uncomment it if you're planning to use this app.</span></div><div class=\"line\">    <span class=\"comment\">#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span></div><div class=\"line\">    <span class=\"comment\">#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;</span></div><div class=\"line\"></div><div class=\"line\">    location = /.well-known/carddav &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 301 <span class=\"variable\">$scheme</span>://<span class=\"variable\">$host</span>/remote.php/dav;</div><div class=\"line\">    &#125;</div><div class=\"line\">    location = /.well-known/caldav &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 301 <span class=\"variable\">$scheme</span>://<span class=\"variable\">$host</span>/remote.php/dav;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location /.well-known/acme-challenge &#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># set max upload size</span></div><div class=\"line\">    client_max_body_size 16400M;</div><div class=\"line\">    fastcgi_buffers 64 4K;</div><div class=\"line\">    fastcgi_read_timeout 600;</div><div class=\"line\">    client_body_buffer_size 1048576k;</div><div class=\"line\">    client_body_temp_path /tmp/owncloud;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># Disable gzip to avoid the removal of the ETag header</span></div><div class=\"line\">    gzip off;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Uncomment if your server is build with the ngx_pagespeed module</span></div><div class=\"line\">    <span class=\"comment\"># This module is currently not supported.</span></div><div class=\"line\">    <span class=\"comment\">#pagespeed off;</span></div><div class=\"line\"></div><div class=\"line\">    error_page 403 /core/templates/403.php;</div><div class=\"line\">    error_page 404 /core/templates/404.php;</div><div class=\"line\"></div><div class=\"line\">    location / &#123;</div><div class=\"line\">        rewrite ^ /index.php<span class=\"variable\">$uri</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 404;</div><div class=\"line\">    &#125;</div><div class=\"line\">    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console) &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 404;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\\.php(?:$|/) &#123;</div><div class=\"line\">        fastcgi_split_path_info ^(.+\\.php)(/.*)$;</div><div class=\"line\">        include fastcgi_params;</div><div class=\"line\">        fastcgi_param SCRIPT_FILENAME <span class=\"variable\">$document_root</span><span class=\"variable\">$fastcgi_script_name</span>;</div><div class=\"line\">        fastcgi_param PATH_INFO <span class=\"variable\">$fastcgi_path_info</span>;</div><div class=\"line\">        <span class=\"comment\">#fastcgi_param HTTPS on;</span></div><div class=\"line\">        fastcgi_param modHeadersAvailable <span class=\"literal\">true</span>; <span class=\"comment\">#Avoid sending the security headers twice</span></div><div class=\"line\">        fastcgi_param front_controller_active <span class=\"literal\">true</span>;</div><div class=\"line\">        fastcgi_pass php-handler;</div><div class=\"line\">        fastcgi_intercept_errors on;</div><div class=\"line\">        fastcgi_request_buffering off; <span class=\"comment\">#Available since nginx 1.7.11</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:updater|ocs-provider)(?:$|/) &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ =404;</div><div class=\"line\">        index index.php;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Adding the cache control header for js and css files</span></div><div class=\"line\">    <span class=\"comment\"># Make sure it is BELOW the PHP block</span></div><div class=\"line\">    location ~* \\.(?:css|js)$ &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> /index.php<span class=\"variable\">$uri</span><span class=\"variable\">$is_args</span><span class=\"variable\">$args</span>;</div><div class=\"line\">        add_header Cache-Control <span class=\"string\">\"public, max-age=7200\"</span>;</div><div class=\"line\">        <span class=\"comment\"># Add headers to serve security related headers (It is intended to have those duplicated to the ones above)</span></div><div class=\"line\">        <span class=\"comment\"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></div><div class=\"line\">        <span class=\"comment\">#add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";</span></div><div class=\"line\">        add_header X-Content-Type-Options nosniff;</div><div class=\"line\">        add_header X-Frame-Options <span class=\"string\">\"SAMEORIGIN\"</span>;</div><div class=\"line\">        add_header X-XSS-Protection <span class=\"string\">\"1; mode=block\"</span>;</div><div class=\"line\">        add_header X-Robots-Tag none;</div><div class=\"line\">        add_header X-Download-Options noopen;</div><div class=\"line\">        add_header X-Permitted-Cross-Domain-Policies none;</div><div class=\"line\">        <span class=\"comment\"># Optional: Don't log access to assets</span></div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~* \\.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg)$ &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> /index.php<span class=\"variable\">$uri</span><span class=\"variable\">$is_args</span><span class=\"variable\">$args</span>;</div><div class=\"line\">        <span class=\"comment\"># Optional: Don't log access to other assets</span></div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"php-ini\"><a href=\"#php-ini\" class=\"headerlink\" title=\"php.ini\"></a>php.ini</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ sudo vi /etc/php/7.0/fpm/php.ini</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">##</span></div><div class=\"line\"></div><div class=\"line\">; should be bit bigger than upload_max_filesize 16400M = 16G + 16M = 16 * 1025 MB</div><div class=\"line\">post_max_size = 16400M</div><div class=\"line\"></div><div class=\"line\">; cannot be bigger than post_max_size</div><div class=\"line\">upload_max_filesize = 16G</div><div class=\"line\"></div><div class=\"line\">; on online servers this could require bigger values (my server is at home)</div><div class=\"line\">max_input_time = 3600</div><div class=\"line\"></div><div class=\"line\">; from ownCloud documentation - not sure <span class=\"keyword\">if</span> is required</div><div class=\"line\">output_buffering = Off</div><div class=\"line\"></div><div class=\"line\">; not sure <span class=\"keyword\">if</span> it is required [3] but it seems like ownCloud needs time to move the file to it<span class=\"string\">'s</span></div><div class=\"line\">; final place after upload and that can take quite some time for big files</div><div class=\"line\">max_execution_time = 1800</div><div class=\"line\"></div><div class=\"line\">; you may also want to point this to a folder having enough space for big files being uploaded</div><div class=\"line\">upload_tmp_dir = /tmp/owncloud</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ sudo service php7.0-fpm restart</div><div class=\"line\"></div><div class=\"line\">$ sudo service nginx restart</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>http://127.0.0.1:10010</code>,MariaDBMysql(mysqloracle)SQLite3SQLite3 <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html\" target=\"_blank\" rel=\"external\">https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html</a> <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html\" target=\"_blank\" rel=\"external\">https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html</a></p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2017/4/5/4469d32ea305747b364c60c6f03d8a39.png\" alt=\"owncloud.png\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html\" target=\"_blank\" rel=\"external\">https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo vi /var/www/owncloud/config/config.php</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&apos;trusted_domains&apos; =&gt; </div><div class=\"line\">  array (</div><div class=\"line\">    0 =&gt; &apos;127.0.0.1:10010&apos;,</div><div class=\"line\">    1 =&gt; &apos;&apos;,</div><div class=\"line\">  ),</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&apos;overwrite.cli.url&apos; =&gt; &apos;http://&apos;,</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>http://127.0.0.1:10010/settings/users</code>,</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://owncloud.org/install/#install-clients\" target=\"_blank\" rel=\"external\">https://owncloud.org/install/#install-clients</a></p>\n","excerpt":"","more":"<h2 id=\"Owncloud\"><a href=\"#Owncloud\" class=\"headerlink\" title=\"Owncloud\"></a><a href=\"https://owncloud.org/\">Owncloud</a></h2><p>Windows,Mac,Linux android,ios,blackberry</p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><ul>\n<li>Ubuntu-16.04_64</li>\n<li>Owncloud9.14-2.1</li>\n<li>SQLite3</li>\n<li>PHP7</li>\n<li>Nginx 1.10.0</li>\n</ul>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h3><p><a href=\"http://download.owncloud.org/download/repositories/9.1/owncloud/\">owncloud-9.1</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Ubuntu-16.04 owncloud-9.14-2.1</p>\n<h4 id=\"rootowncloud\"><a href=\"#rootowncloud\" class=\"headerlink\" title=\"rootowncloud\"></a>rootowncloud</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">su root</div><div class=\"line\"></div><div class=\"line\">wget -nv https://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/Release.key -O Release.key</div><div class=\"line\">apt-key add - &lt; Release.key</div></pre></td></tr></table></figure>\n<h4 id=\"rootowncloud\"><a href=\"#rootowncloud\" class=\"headerlink\" title=\"rootowncloud\"></a>rootowncloud</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sh -c <span class=\"string\">\"echo 'deb http://download.owncloud.org/download/repositories/9.1/Ubuntu_16.04/ /' &gt; /etc/apt/sources.list.d/owncloud.list\"</span></div><div class=\"line\">apt  update -y &amp;&amp; apt install owncloud -y</div></pre></td></tr></table></figure>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><h3 id=\"PHP7\"><a href=\"#PHP7\" class=\"headerlink\" title=\"PHP7\"></a>PHP7</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo apt-get install -y php7.0-common  php7.0-gd php7.0-json php7.0-mysql php7.0-curl  php7.0-intl php7.0-mcrypt php-imagick  php7.0-zip php7.0-xml php7.0-mbstring</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#mariadb</span></div><div class=\"line\">sudo apt-get install -y mariadb-server php7.0-mysql</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#sqlite3</span></div><div class=\"line\">sudo apt-get install -y sqlite3 php7.0-sqlite3</div></pre></td></tr></table></figure>\n<h3 id=\"web\"><a href=\"#web\" class=\"headerlink\" title=\"web\"></a>web</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"comment\">#apache2</span></div><div class=\"line\">sudo apt-get install -y apache2 libapache2-mod-php7.0</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#nginx</span></div><div class=\"line\">sudo apt-get install -y nginx php7.0-fpm</div></pre></td></tr></table></figure>\n<h3 id=\"fpm-nginx\"><a href=\"#fpm-nginx\" class=\"headerlink\" title=\"fpm(nginx)\"></a>fpm(nginx)</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ vi /etc/php/7.0/fpm/pool.d/www.conf</div></pre></td></tr></table></figure>\n<p><code>listen = /run/php/php7.0-fpm.sock</code><code>listen=127.0.0.1:9000</code>(36)</p>\n<p><code>env</code>(384-388)<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">env[HOSTNAME] = $HOSTNAME</div><div class=\"line\">env[PATH] = /usr/local/bin:/usr/bin:/bin</div><div class=\"line\">env[TMP] = /tmp</div><div class=\"line\">env[TMPDIR] = /tmp</div><div class=\"line\">env[TEMP] = /tmp</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ wget -P /tmp https://download.owncloud.org/download/community/owncloud-latest.zip  &amp;&amp; sudo unzip /tmp/owncloud-latest.zip <span class=\"_\">-d</span> /var/www/ &amp;&amp; rm -rf /tmp/owncloud-latest.zip</div></pre></td></tr></table></figure>\n<h3 id=\"www-data\"><a href=\"#www-data\" class=\"headerlink\" title=\"www-data\"></a>www-data</h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo chown -R www-data:www-data /var/www/owncloud/</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><a href=\"https://doc.owncloud.org/server/9.1/admin_manual/installation/nginx_examples.html\">nginx+https</a></p>\n<p><a href=\"https://github.com/owncloud/documentation/wiki/Uploading-files-up-to-16GB\">(16G)</a></p>\n<h3 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h3><h4 id=\"nginx\"><a href=\"#nginx\" class=\"headerlink\" title=\"nginx\"></a>nginx</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ vi  /etc/nginx/sites-enabled/owncloud.conf</div><div class=\"line\"></div><div class=\"line\">upstream php-handler &#123;</div><div class=\"line\">    server 127.0.0.1:9000;</div><div class=\"line\">    <span class=\"comment\">#server unix:/var/run/php5-fpm.sock;</span></div><div class=\"line\">&#125;</div><div class=\"line\"></div><div class=\"line\">server &#123;</div><div class=\"line\">    listen 10010;</div><div class=\"line\">    server_name 127.0.0.1;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Add headers to serve security related headers</span></div><div class=\"line\">    <span class=\"comment\"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></div><div class=\"line\">    <span class=\"comment\">#add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";</span></div><div class=\"line\">    add_header X-Content-Type-Options nosniff;</div><div class=\"line\">    add_header X-Frame-Options <span class=\"string\">\"SAMEORIGIN\"</span>;</div><div class=\"line\">    add_header X-XSS-Protection <span class=\"string\">\"1; mode=block\"</span>;</div><div class=\"line\">    add_header X-Robots-Tag none;</div><div class=\"line\">    add_header X-Download-Options noopen;</div><div class=\"line\">    add_header X-Permitted-Cross-Domain-Policies none;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Path to the root of your installation</span></div><div class=\"line\">    root /var/www/owncloud/;</div><div class=\"line\"></div><div class=\"line\">    location = /robots.txt &#123;</div><div class=\"line\">        allow all;</div><div class=\"line\">        log_not_found off;</div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># The following 2 rules are only needed for the user_webfinger app.</span></div><div class=\"line\">    <span class=\"comment\"># Uncomment it if you're planning to use this app.</span></div><div class=\"line\">    <span class=\"comment\">#rewrite ^/.well-known/host-meta /public.php?service=host-meta last;</span></div><div class=\"line\">    <span class=\"comment\">#rewrite ^/.well-known/host-meta.json /public.php?service=host-meta-json last;</span></div><div class=\"line\"></div><div class=\"line\">    location = /.well-known/carddav &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 301 <span class=\"variable\">$scheme</span>://<span class=\"variable\">$host</span>/remote.php/dav;</div><div class=\"line\">    &#125;</div><div class=\"line\">    location = /.well-known/caldav &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 301 <span class=\"variable\">$scheme</span>://<span class=\"variable\">$host</span>/remote.php/dav;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location /.well-known/acme-challenge &#123; &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># set max upload size</span></div><div class=\"line\">    client_max_body_size 16400M;</div><div class=\"line\">    fastcgi_buffers 64 4K;</div><div class=\"line\">    fastcgi_read_timeout 600;</div><div class=\"line\">    client_body_buffer_size 1048576k;</div><div class=\"line\">    client_body_temp_path /tmp/owncloud;</div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\"># Disable gzip to avoid the removal of the ETag header</span></div><div class=\"line\">    gzip off;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Uncomment if your server is build with the ngx_pagespeed module</span></div><div class=\"line\">    <span class=\"comment\"># This module is currently not supported.</span></div><div class=\"line\">    <span class=\"comment\">#pagespeed off;</span></div><div class=\"line\"></div><div class=\"line\">    error_page 403 /core/templates/403.php;</div><div class=\"line\">    error_page 404 /core/templates/404.php;</div><div class=\"line\"></div><div class=\"line\">    location / &#123;</div><div class=\"line\">        rewrite ^ /index.php<span class=\"variable\">$uri</span>;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:build|tests|config|lib|3rdparty|templates|data)/ &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 404;</div><div class=\"line\">    &#125;</div><div class=\"line\">    location ~ ^/(?:\\.|autotest|occ|issue|indie|db_|console) &#123;</div><div class=\"line\">        <span class=\"built_in\">return</span> 404;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:index|remote|public|cron|core/ajax/update|status|ocs/v[12]|updater/.+|ocs-provider/.+|core/templates/40[34])\\.php(?:$|/) &#123;</div><div class=\"line\">        fastcgi_split_path_info ^(.+\\.php)(/.*)$;</div><div class=\"line\">        include fastcgi_params;</div><div class=\"line\">        fastcgi_param SCRIPT_FILENAME <span class=\"variable\">$document_root</span><span class=\"variable\">$fastcgi_script_name</span>;</div><div class=\"line\">        fastcgi_param PATH_INFO <span class=\"variable\">$fastcgi_path_info</span>;</div><div class=\"line\">        <span class=\"comment\">#fastcgi_param HTTPS on;</span></div><div class=\"line\">        fastcgi_param modHeadersAvailable <span class=\"literal\">true</span>; <span class=\"comment\">#Avoid sending the security headers twice</span></div><div class=\"line\">        fastcgi_param front_controller_active <span class=\"literal\">true</span>;</div><div class=\"line\">        fastcgi_pass php-handler;</div><div class=\"line\">        fastcgi_intercept_errors on;</div><div class=\"line\">        fastcgi_request_buffering off; <span class=\"comment\">#Available since nginx 1.7.11</span></div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~ ^/(?:updater|ocs-provider)(?:$|/) &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> <span class=\"variable\">$uri</span>/ =404;</div><div class=\"line\">        index index.php;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\"># Adding the cache control header for js and css files</span></div><div class=\"line\">    <span class=\"comment\"># Make sure it is BELOW the PHP block</span></div><div class=\"line\">    location ~* \\.(?:css|js)$ &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> /index.php<span class=\"variable\">$uri</span><span class=\"variable\">$is_args</span><span class=\"variable\">$args</span>;</div><div class=\"line\">        add_header Cache-Control <span class=\"string\">\"public, max-age=7200\"</span>;</div><div class=\"line\">        <span class=\"comment\"># Add headers to serve security related headers (It is intended to have those duplicated to the ones above)</span></div><div class=\"line\">        <span class=\"comment\"># Before enabling Strict-Transport-Security headers please read into this topic first.</span></div><div class=\"line\">        <span class=\"comment\">#add_header Strict-Transport-Security \"max-age=15552000; includeSubDomains\";</span></div><div class=\"line\">        add_header X-Content-Type-Options nosniff;</div><div class=\"line\">        add_header X-Frame-Options <span class=\"string\">\"SAMEORIGIN\"</span>;</div><div class=\"line\">        add_header X-XSS-Protection <span class=\"string\">\"1; mode=block\"</span>;</div><div class=\"line\">        add_header X-Robots-Tag none;</div><div class=\"line\">        add_header X-Download-Options noopen;</div><div class=\"line\">        add_header X-Permitted-Cross-Domain-Policies none;</div><div class=\"line\">        <span class=\"comment\"># Optional: Don't log access to assets</span></div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\"></div><div class=\"line\">    location ~* \\.(?:svg|gif|png|html|ttf|woff|ico|jpg|jpeg)$ &#123;</div><div class=\"line\">        try_files <span class=\"variable\">$uri</span> /index.php<span class=\"variable\">$uri</span><span class=\"variable\">$is_args</span><span class=\"variable\">$args</span>;</div><div class=\"line\">        <span class=\"comment\"># Optional: Don't log access to other assets</span></div><div class=\"line\">        access_log off;</div><div class=\"line\">    &#125;</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<h4 id=\"php-ini\"><a href=\"#php-ini\" class=\"headerlink\" title=\"php.ini\"></a>php.ini</h4><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\">$ sudo vi /etc/php/7.0/fpm/php.ini</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">##</span></div><div class=\"line\"></div><div class=\"line\">; should be bit bigger than upload_max_filesize 16400M = 16G + 16M = 16 * 1025 MB</div><div class=\"line\">post_max_size = 16400M</div><div class=\"line\"></div><div class=\"line\">; cannot be bigger than post_max_size</div><div class=\"line\">upload_max_filesize = 16G</div><div class=\"line\"></div><div class=\"line\">; on online servers this could require bigger values (my server is at home)</div><div class=\"line\">max_input_time = 3600</div><div class=\"line\"></div><div class=\"line\">; from ownCloud documentation - not sure <span class=\"keyword\">if</span> is required</div><div class=\"line\">output_buffering = Off</div><div class=\"line\"></div><div class=\"line\">; not sure <span class=\"keyword\">if</span> it is required [3] but it seems like ownCloud needs time to move the file to it<span class=\"string\">'s</div><div class=\"line\">; final place after upload and that can take quite some time for big files</div><div class=\"line\">max_execution_time = 1800</div><div class=\"line\"></div><div class=\"line\">; you may also want to point this to a folder having enough space for big files being uploaded</div><div class=\"line\">upload_tmp_dir = /tmp/owncloud</span></div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ sudo service php7.0-fpm restart</div><div class=\"line\"></div><div class=\"line\">$ sudo service nginx restart</div></pre></td></tr></table></figure>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>http://127.0.0.1:10010</code>,MariaDBMysql(mysqloracle)SQLite3SQLite3 <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html\">https://doc.owncloud.org/server/latest/admin_manual/configuration_database/db_conversion.html</a> <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html\">https://doc.owncloud.org/server/latest/admin_manual/configuration_database/linux_database_configuration.html</a></p>\n<p><img src=\"https://user-gold-cdn.xitu.io/2017/4/5/4469d32ea305747b364c60c6f03d8a39.png\" alt=\"owncloud.png\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html\">https://doc.owncloud.org/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html</a><br><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">sudo vi /var/www/owncloud/config/config.php</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&apos;trusted_domains&apos; =&gt; </div><div class=\"line\">  array (</div><div class=\"line\">    0 =&gt; &apos;127.0.0.1:10010&apos;,</div><div class=\"line\">    1 =&gt; &apos;&apos;,</div><div class=\"line\">  ),</div></pre></td></tr></table></figure></p>\n<p><br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">&apos;overwrite.cli.url&apos; =&gt; &apos;http://&apos;,</div></pre></td></tr></table></figure></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><code>http://127.0.0.1:10010/settings/users</code>,</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> <a href=\"https://owncloud.org/install/#install-clients\">https://owncloud.org/install/#install-clients</a></p>\n"},{"title":"synergy ","date":"2017-02-08T09:44:28.000Z","_content":"Synergy  WinLinuxMac\n\n<!-- more -->\n\nSynergy KVM.\n\nsynergy [Synergy \\(Win/Mac/Linux\\)](http://www.iplaysoft.com/synergy.html) [Synergy  /](http://www.appinn.com/synergy/)\n\n>+\n\n>Synergy  Synergy  Win/Mac/Linux \n\n2PCUbuntu Zesty Zapus + Windows10 1607\n\n\n## [synergy](https://symless.com/synergy/#get-synergy)\n\n`email``fullname`\n\n<kbd>Enter</kbd>\n\n## [](https://symless.com/nightly)\n\n\n\n [synergy-master-stable-a5140aa-Windows-x64.msi](https://symless.com/files/nightly/synergy-master-stable-a5140aa-Windows-x64.msi)  [synergy-master-stable-a5140aa-Linux-x86_64.deb](https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb)\n\n## \n\n [1.4.18](http://symless.com/download/free/)`Login` \n\n## windows\n\n**360**\n\n![360sb](https://ooo.0o0.ooo/2017/02/09/589bcf5446e43.png)\n\n### \n\n![synergy.png](https://ooo.0o0.ooo/2017/02/08/589af1a1280b0.png)\n\n http://www.veryhuo.com/down/html/90189.html\n\n### \n\n![](https://ooo.0o0.ooo/2017/02/14/58a25ac9a4796.png)\n\n## Ubuntu\n\n```bash\n\n# synergy  libavahi-compat-libdnssd1\n# sudo apt install -y libavahi-compat-libdnssd1 \n# \n# https://www.ubuntuupdates.org/package_metas?utf8=%E2%9C%93&q=libavahi-compat-libdnssd1 \n\nwget http://security.ubuntu.com/ubuntu/pool/main/a/avahi/libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb #ubuntu 16.10 \n\nwget https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb\n\nsudo dpkg -i libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb\n\n# \n# sudo apt-get update # \n# sudo apt-get -f install # \n# sudo dpkg -i xxx.deb # \n\nsudo dpkg -i synergy-master-stable-a5140aa-Linux-x86_64.deb\n\nnohup synergy &\n```\n\n![](https://ooo.0o0.ooo/2017/02/14/58a25ac9a6991.png)\n\nsynergyserver ip\n\n**serverclientclient **\n\n**clientserverserverclient **\n\n**pinge.g.  Ngrok **","source":"_posts/share-mouse-and-keyboard-with-your-windows-linux-machines-md.md","raw":"---\ntitle: synergy \ndate: 2017-02-08 17:44:28\ntags: [synergy]\ncategories: []\n---\nSynergy  WinLinuxMac\n\n<!-- more -->\n\nSynergy KVM.\n\nsynergy [Synergy \\(Win/Mac/Linux\\)](http://www.iplaysoft.com/synergy.html) [Synergy  /](http://www.appinn.com/synergy/)\n\n>+\n\n>Synergy  Synergy  Win/Mac/Linux \n\n2PCUbuntu Zesty Zapus + Windows10 1607\n\n\n## [synergy](https://symless.com/synergy/#get-synergy)\n\n`email``fullname`\n\n<kbd>Enter</kbd>\n\n## [](https://symless.com/nightly)\n\n\n\n [synergy-master-stable-a5140aa-Windows-x64.msi](https://symless.com/files/nightly/synergy-master-stable-a5140aa-Windows-x64.msi)  [synergy-master-stable-a5140aa-Linux-x86_64.deb](https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb)\n\n## \n\n [1.4.18](http://symless.com/download/free/)`Login` \n\n## windows\n\n**360**\n\n![360sb](https://ooo.0o0.ooo/2017/02/09/589bcf5446e43.png)\n\n### \n\n![synergy.png](https://ooo.0o0.ooo/2017/02/08/589af1a1280b0.png)\n\n http://www.veryhuo.com/down/html/90189.html\n\n### \n\n![](https://ooo.0o0.ooo/2017/02/14/58a25ac9a4796.png)\n\n## Ubuntu\n\n```bash\n\n# synergy  libavahi-compat-libdnssd1\n# sudo apt install -y libavahi-compat-libdnssd1 \n# \n# https://www.ubuntuupdates.org/package_metas?utf8=%E2%9C%93&q=libavahi-compat-libdnssd1 \n\nwget http://security.ubuntu.com/ubuntu/pool/main/a/avahi/libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb #ubuntu 16.10 \n\nwget https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb\n\nsudo dpkg -i libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb\n\n# \n# sudo apt-get update # \n# sudo apt-get -f install # \n# sudo dpkg -i xxx.deb # \n\nsudo dpkg -i synergy-master-stable-a5140aa-Linux-x86_64.deb\n\nnohup synergy &\n```\n\n![](https://ooo.0o0.ooo/2017/02/14/58a25ac9a6991.png)\n\nsynergyserver ip\n\n**serverclientclient **\n\n**clientserverserverclient **\n\n**pinge.g.  Ngrok **","slug":"share-mouse-and-keyboard-with-your-windows-linux-machines-md","published":1,"updated":"2017-02-14T01:19:22.744Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mboh000lvkdovxa3mem5","content":"<p>Synergy  WinLinuxMac</p>\n<a id=\"more\"></a>\n<p>Synergy KVM.</p>\n<p>synergy <a href=\"http://www.iplaysoft.com/synergy.html\" target=\"_blank\" rel=\"external\">Synergy (Win/Mac/Linux)</a> <a href=\"http://www.appinn.com/synergy/\" target=\"_blank\" rel=\"external\">Synergy  /</a></p>\n<blockquote>\n<p>+</p>\n<p>Synergy  Synergy  Win/Mac/Linux </p>\n</blockquote>\n<p>2PCUbuntu Zesty Zapus + Windows10 1607</p>\n<h2 id=\"synergy\"><a href=\"#synergy\" class=\"headerlink\" title=\"synergy\"></a><a href=\"https://symless.com/synergy/#get-synergy\" target=\"_blank\" rel=\"external\">synergy</a></h2><p><code>email</code><code>fullname</code></p>\n<p><kbd>Enter</kbd></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://symless.com/nightly\" target=\"_blank\" rel=\"external\"></a></h2><p></p>\n<p> <a href=\"https://symless.com/files/nightly/synergy-master-stable-a5140aa-Windows-x64.msi\" target=\"_blank\" rel=\"external\">synergy-master-stable-a5140aa-Windows-x64.msi</a>  <a href=\"https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb\" target=\"_blank\" rel=\"external\">synergy-master-stable-a5140aa-Linux-x86_64.deb</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://symless.com/download/free/\" target=\"_blank\" rel=\"external\">1.4.18</a><code>Login</code> </p>\n<h2 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h2><p><strong>360</strong></p>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/09/589bcf5446e43.png\" alt=\"360sb\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://ooo.0o0.ooo/2017/02/08/589af1a1280b0.png\" alt=\"synergy.png\"></p>\n<p> <a href=\"http://www.veryhuo.com/down/html/90189.html\" target=\"_blank\" rel=\"external\">http://www.veryhuo.com/down/html/90189.html</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a25ac9a4796.png\" alt=\"\"></p>\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># synergy  libavahi-compat-libdnssd1</span></div><div class=\"line\"><span class=\"comment\"># sudo apt install -y libavahi-compat-libdnssd1 </span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># https://www.ubuntuupdates.org/package_metas?utf8=%E2%9C%93&amp;q=libavahi-compat-libdnssd1 </span></div><div class=\"line\"></div><div class=\"line\">wget http://security.ubuntu.com/ubuntu/pool/main/a/avahi/libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb <span class=\"comment\">#ubuntu 16.10 </span></div><div class=\"line\"></div><div class=\"line\">wget https://symless.com/files/nightly/synergy-master-stable<span class=\"_\">-a</span>5140aa-Linux-x86_64.deb</div><div class=\"line\"></div><div class=\"line\">sudo dpkg -i libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># sudo apt-get update # </span></div><div class=\"line\"><span class=\"comment\"># sudo apt-get -f install # </span></div><div class=\"line\"><span class=\"comment\"># sudo dpkg -i xxx.deb # </span></div><div class=\"line\"></div><div class=\"line\">sudo dpkg -i synergy-master-stable<span class=\"_\">-a</span>5140aa-Linux-x86_64.deb</div><div class=\"line\"></div><div class=\"line\">nohup synergy &amp;</div></pre></td></tr></table></figure>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a25ac9a6991.png\" alt=\"\"></p>\n<p>synergyserver ip</p>\n<p><strong>serverclientclient </strong></p>\n<p><strong>clientserverserverclient </strong></p>\n<p><strong>pinge.g.  Ngrok </strong></p>\n","excerpt":"<p>Synergy  WinLinuxMac</p>","more":"<p>Synergy KVM.</p>\n<p>synergy <a href=\"http://www.iplaysoft.com/synergy.html\">Synergy (Win/Mac/Linux)</a> <a href=\"http://www.appinn.com/synergy/\">Synergy  /</a></p>\n<blockquote>\n<p>+</p>\n<p>Synergy  Synergy  Win/Mac/Linux </p>\n</blockquote>\n<p>2PCUbuntu Zesty Zapus + Windows10 1607</p>\n<h2 id=\"synergy\"><a href=\"#synergy\" class=\"headerlink\" title=\"synergy\"></a><a href=\"https://symless.com/synergy/#get-synergy\">synergy</a></h2><p><code>email</code><code>fullname</code></p>\n<p><kbd>Enter</kbd></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"https://symless.com/nightly\"></a></h2><p></p>\n<p> <a href=\"https://symless.com/files/nightly/synergy-master-stable-a5140aa-Windows-x64.msi\">synergy-master-stable-a5140aa-Windows-x64.msi</a>  <a href=\"https://symless.com/files/nightly/synergy-master-stable-a5140aa-Linux-x86_64.deb\">synergy-master-stable-a5140aa-Linux-x86_64.deb</a></p>\n<h2 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h2><p> <a href=\"http://symless.com/download/free/\">1.4.18</a><code>Login</code> </p>\n<h2 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h2><p><strong>360</strong></p>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/09/589bcf5446e43.png\" alt=\"360sb\"></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://ooo.0o0.ooo/2017/02/08/589af1a1280b0.png\" alt=\"synergy.png\"></p>\n<p> <a href=\"http://www.veryhuo.com/down/html/90189.html\">http://www.veryhuo.com/down/html/90189.html</a></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a25ac9a4796.png\" alt=\"\"></p>\n<h2 id=\"Ubuntu\"><a href=\"#Ubuntu\" class=\"headerlink\" title=\"Ubuntu\"></a>Ubuntu</h2><figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># synergy  libavahi-compat-libdnssd1</span></div><div class=\"line\"><span class=\"comment\"># sudo apt install -y libavahi-compat-libdnssd1 </span></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># https://www.ubuntuupdates.org/package_metas?utf8=%E2%9C%93&amp;q=libavahi-compat-libdnssd1 </span></div><div class=\"line\"></div><div class=\"line\">wget http://security.ubuntu.com/ubuntu/pool/main/a/avahi/libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb <span class=\"comment\">#ubuntu 16.10 </span></div><div class=\"line\"></div><div class=\"line\">wget https://symless.com/files/nightly/synergy-master-stable<span class=\"_\">-a</span>5140aa-Linux-x86_64.deb</div><div class=\"line\"></div><div class=\"line\">sudo dpkg -i libavahi-compat-libdnssd1_0.6.32-1ubuntu1_amd64.deb</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># </span></div><div class=\"line\"><span class=\"comment\"># sudo apt-get update # </span></div><div class=\"line\"><span class=\"comment\"># sudo apt-get -f install # </span></div><div class=\"line\"><span class=\"comment\"># sudo dpkg -i xxx.deb # </span></div><div class=\"line\"></div><div class=\"line\">sudo dpkg -i synergy-master-stable<span class=\"_\">-a</span>5140aa-Linux-x86_64.deb</div><div class=\"line\"></div><div class=\"line\">nohup synergy &amp;</div></pre></td></tr></table></figure>\n<p><img src=\"https://ooo.0o0.ooo/2017/02/14/58a25ac9a6991.png\" alt=\"\"></p>\n<p>synergyserver ip</p>\n<p><strong>serverclientclient </strong></p>\n<p><strong>clientserverserverclient </strong></p>\n<p><strong>pinge.g.  Ngrok </strong></p>"},{"title":"Spring3.0 Log4jlogback","date":"2017-02-28T06:54:44.000Z","_content":"`Spring3.0.5`,`Spring5.0 M3`\n\n `logback` `log4j2`\n\n\n\n1. log4j2 logger()\n2. log4j2 JSONLayout \n\nlog4j2logback 10(1.2.0+)() [FileAppender throughput\n](https://docs.google.com/spreadsheets/d/1cpb5D7qnyye4W0RTlHUnXedYK98catNZytYIu5D91m0/edit#gid=0)\n\nspring3.0.5(maven)log4jslf4j+logback1.2.1\n\n### Maven\n\n`pom.xml`\n\n```xml\n    <properties>\n        <!-- log -->\n        <slf4j.version>1.7.24</slf4j.version>\n        <logback.version>1.2.1</logback.version>\n        \n        <!-- Spring -->\n        <logback-ext-spring.version>0.1.4</logback-ext-spring.version>\n        \n        <!-- logbacklogstash -->\n        <logstash-logback-encoder.version>4.8</logstash-logback-encoder.version>\n        <!-- jackson logstash-logback-encoderjackson-->\n        <jackson.version>2.8.6</jackson.version>\n        \n        <!-- UTF-8  -->\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.encoding>UTF-8</maven.compiler.encoding>\n    </properties>\n\n    <dependencies>\n        <!-- slf4jlog -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n\n        <!-- slf4j Apache Commons Logging -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>jcl-over-slf4j</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        \n        <!-- slf4jlog4j -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>log4j-over-slf4j</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        \n        <!-- logbackSpring -->\n        <dependency>\n            <groupId>org.logback-extensions</groupId>\n            <artifactId>logback-ext-spring</artifactId>\n            <version>${logback-ext-spring.version}</version>\n        </dependency>\n        \n        <!-- slf4jlogback -->\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-core</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        \n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        \n        <!-- logback logstash -->\n        <dependency>\n            <groupId>net.logstash.logback</groupId>\n            <artifactId>logstash-logback-encoder</artifactId>\n            <version>${logstash-logback-encoder.version}</version>\n        </dependency>\n        \n        <!-- logstash-logback-encoderjackson -->\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-core</artifactId>\n            <version>${jackson.version}</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-databind</artifactId>\n            <version>${jackson.version}</version>\n        </dependency>\n    </dependencies>\n```\n\n### Maven\n(maven`pom.xml`,cmdpom.xml  `mvn dependency:copy-dependencies -DoutputDirectory=lib` `lib`)\n[](http://mvnrepository.com/)jar Spring MVC lib\n```\njackson-annotations-2.8.0.jar\njackson-core-2.8.6.jar\njackson-databind-2.8.6.jar\njcl-over-slf4j-1.7.24.jar\nlog4j-over-slf4j-1.7.24.jar\nlogback-classic-1.2.1.jar\nlogback-core-1.2.1.jar\nlogback-ext-spring-0.1.4.jar\nlogstash-logback-encoder-4.8.jar\nslf4j-api-1.7.24.jar\n```\n\n### jar\n\nmavenmaven`log4j.jar`,`slf4j-log4j12-xxx.jar`,`slf4j-api-xxx.jar``commons-logging.jar` jar\n\n\n\n### \n\nloge.g. `StdoutListener`,`MyDailyRollingFileAppender`\n\n### web.xml\n\n#### log4j\n\n\n\n```xml\n<context-param>\n    <param-name>log4jConfigLocation</param-name>\n    <param-value>/WEB-INF/properties/log4j.xml</param-value>\n</context-param>\n<listener>\n    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>\n</listener>\n```\n`log4j.xml`\n\n#### logback\n```xml\n<context-param>\n    <param-name>logbackConfigLocation</param-name>\n    <param-value>WEB-INF/config/logback.xml</param-value>\n</context-param>\n\n<listener>\n     <listener-class>ch.qos.logback.ext.spring.web.LogbackConfigListener</listener-class>\n</listener>\n```\n\n### logback.xml\n\n WEB-INF/config/logback.xml,logstash\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<configuration scan=\"false\" scanPeriod=\"60 seconds\" debug=\"false\">\n\n    <!-- log -->\n    <property name=\"LOG_HOME\" value=\"D:/logtest\" />\n    <!--  -->\n    <property name=\"APP_NAME\" value=\"logtest\" />\n    <!--  -->\n    <property name=\"APP_PORT\" value=\"8080\" />\n    \n    <!--  -->\n    <!-- %method%line -->\n    <property name=\"CONSOLE_LOG_PATTERN\" value=\"%date{HH:mm:ss.SSS}[%-5level]%logger.%method#%line - %msg%n\" />\n    <property name=\"FILE_LOG_PATTERN\" value=\"%date{HH:mm:ss.SSS}[%-5level]%logger.%method#%line - %msg%n\" />\n    \n    <!-- Logstash  -->\n    <property name=\"LOGSTASH_SERVER\" value=\"\" />\n    <property name=\"LOGSTASH_PORT\" value=\"\" />\n    \n\n    <logger name=\"org.springframework\" level=\"WARN\" />\n    <logger name=\"org.springframework.web\" level=\"WARN\" />\n    <logger name=\"org.springframework.security\" level=\"WARN\" />\n    <logger name=\"org.springframework.cache\" level=\"WARN\" />\n    <logger name=\"org.springframework.beans\" level=\"WARN\" />\n    <logger name=\"com.shunneng.logtest\" level=\"DEBUG\" />\n\n    <!--  -->\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        \n        <!-- ERRROR,elasticsearch -->\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        \n        <encoder>\n            <pattern>${CONSOLE_LOG_PATTERN}</pattern>\n            <charset>utf8</charset>\n        </encoder>\n    </appender>\n\n    <!--   -->\n    <appender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <!--  -->\n        <file>${LOG_HOME}/${APP_NAME}.log</file>\n        \n        <!--  -->\n        <encoder>\n            <charset>utf-8</charset>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        \n        <!--  -->\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\">\n            <fileNamePattern>${LOG_HOME}/${APP_NAME}.%i.log</fileNamePattern>\n        </rollingPolicy>\n        \n        <!--  -->\n        <triggeringPolicy class=\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\">\n            <MaxFileSize>100MB</MaxFileSize>\n        </triggeringPolicy>\n        \n    </appender>\n    \n    <!--   -->\n    <appender name=\"LOGSTASH\" class=\"net.logstash.logback.appender.LogstashSocketAppender\">\n        <!-- logstash   -->\n        <host>${LOGSTASH_SERVER}</host>\n        <!-- logstash  -->\n        <port>${LOGSTASH_PORT}</port>\n        <!--   -->\n        <customFields>{\"app_name\":\"${APP_NAME}\",\"app_port\":\"${APP_PORT}\"}</customFields>\n    </appender>\n    \n    <!-- (512) -->\n    <appender name=\"ASYNC\" class=\"ch.qos.logback.classic.AsyncAppender\">\n        <queueSize>512</queueSize>\n        <appender-ref ref=\"FILE\" />\n    </appender>\n    \n    <!--  -->\n    <contextListener class=\"ch.qos.logback.classic.jul.LevelChangePropagator\">\n        <resetJUL>true</resetJUL>\n    </contextListener>\n    \n    <!-- INFO -->\n    <root level=\"INFO\">\n        <appender-ref ref=\"CONSOLE\" />\n        <appender-ref ref=\"ASYNC\" />\n        <appender-ref ref=\"LOGSTASH\" />\n    </root>\n\n</configuration>\n\n```\n\n### Java\n\n`jcl-over-slf4j``log4j-over-slf4j`slf4j\n\n```java\n...\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n...\n\nprivate final Logger logger = LoggerFactory.getLogger(Demo.class);\n\nlog.info(\"{}\",\"info\"); //:info\n...\n```\n\nlogger.info(\"\"+\"info\"+\"\");\n\nloggererrortoStringerror\n\n\n```java\nif (logger.isInfoEnabled()){\n    logger.info(\"\"+\"info\"+\"\");\n}\n```\n\n `info` string stringbuilder stringbuffer\n\n `{}``Object[]`\n\n### \n\n\n**** [10](http://blog.jobbole.com/52018/) ()[The 10 Commandments of Logging](http://www.masterzen.fr/2013/01/13/the-10-commandments-of-logging/)\n\n [LOG](http://www.jianshu.com/p/8551fe9c6354)\n\n\n> #### 2. log\n\n>TRACE level: (code smell)bug\n\n>DEBUG level: debugdebug(troubleshooting)\n\n>INFO level: (user-driven)()\n\n>NOTICE level: log\n\n>WARN level: errorfailure\n\n>ERROR level: API\n\n>FATAL level: logbindsocketlog\n\n> #### 4. log\n\n> #### 6. log\n\n> #### 7. \n\ntoStringcommons-lang3 `ReflectionToStringBuilder.toString()``new ToStringBuilder()`\n\n  `ReflectionToStringBuilder.toString()`  `lang.Foo@c2a132[name=foo,age=88,bar=lang.Bar@e102dc[name=bar]] `\n\n `new ToStringBuilder()`\n```java\nnew ToStringBuilder(this, ToStringStyle.MULTI_LINE_STYLE)\n    .append(\"name\", name)\n    .append(\"age\", age)\n    .append(\"bar\", bar)\n    .toString()\n```","source":"_posts/springmvc-log4j-to-logback.md","raw":"---\ntitle: Spring3.0 Log4jlogback\ndate: 2017-02-28 14:54:44\ntags: [springmvc,logback,log4j,log]\ncategories: []\n---\n`Spring3.0.5`,`Spring5.0 M3`\n\n `logback` `log4j2`\n\n\n\n1. log4j2 logger()\n2. log4j2 JSONLayout \n\nlog4j2logback 10(1.2.0+)() [FileAppender throughput\n](https://docs.google.com/spreadsheets/d/1cpb5D7qnyye4W0RTlHUnXedYK98catNZytYIu5D91m0/edit#gid=0)\n\nspring3.0.5(maven)log4jslf4j+logback1.2.1\n\n### Maven\n\n`pom.xml`\n\n```xml\n    <properties>\n        <!-- log -->\n        <slf4j.version>1.7.24</slf4j.version>\n        <logback.version>1.2.1</logback.version>\n        \n        <!-- Spring -->\n        <logback-ext-spring.version>0.1.4</logback-ext-spring.version>\n        \n        <!-- logbacklogstash -->\n        <logstash-logback-encoder.version>4.8</logstash-logback-encoder.version>\n        <!-- jackson logstash-logback-encoderjackson-->\n        <jackson.version>2.8.6</jackson.version>\n        \n        <!-- UTF-8  -->\n        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n        <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>\n        <maven.compiler.encoding>UTF-8</maven.compiler.encoding>\n    </properties>\n\n    <dependencies>\n        <!-- slf4jlog -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>slf4j-api</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n\n        <!-- slf4j Apache Commons Logging -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>jcl-over-slf4j</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        \n        <!-- slf4jlog4j -->\n        <dependency>\n            <groupId>org.slf4j</groupId>\n            <artifactId>log4j-over-slf4j</artifactId>\n            <version>${slf4j.version}</version>\n        </dependency>\n        \n        <!-- logbackSpring -->\n        <dependency>\n            <groupId>org.logback-extensions</groupId>\n            <artifactId>logback-ext-spring</artifactId>\n            <version>${logback-ext-spring.version}</version>\n        </dependency>\n        \n        <!-- slf4jlogback -->\n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-core</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        \n        <dependency>\n            <groupId>ch.qos.logback</groupId>\n            <artifactId>logback-classic</artifactId>\n            <version>${logback.version}</version>\n        </dependency>\n        \n        <!-- logback logstash -->\n        <dependency>\n            <groupId>net.logstash.logback</groupId>\n            <artifactId>logstash-logback-encoder</artifactId>\n            <version>${logstash-logback-encoder.version}</version>\n        </dependency>\n        \n        <!-- logstash-logback-encoderjackson -->\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-core</artifactId>\n            <version>${jackson.version}</version>\n        </dependency>\n\n        <dependency>\n            <groupId>com.fasterxml.jackson.core</groupId>\n            <artifactId>jackson-databind</artifactId>\n            <version>${jackson.version}</version>\n        </dependency>\n    </dependencies>\n```\n\n### Maven\n(maven`pom.xml`,cmdpom.xml  `mvn dependency:copy-dependencies -DoutputDirectory=lib` `lib`)\n[](http://mvnrepository.com/)jar Spring MVC lib\n```\njackson-annotations-2.8.0.jar\njackson-core-2.8.6.jar\njackson-databind-2.8.6.jar\njcl-over-slf4j-1.7.24.jar\nlog4j-over-slf4j-1.7.24.jar\nlogback-classic-1.2.1.jar\nlogback-core-1.2.1.jar\nlogback-ext-spring-0.1.4.jar\nlogstash-logback-encoder-4.8.jar\nslf4j-api-1.7.24.jar\n```\n\n### jar\n\nmavenmaven`log4j.jar`,`slf4j-log4j12-xxx.jar`,`slf4j-api-xxx.jar``commons-logging.jar` jar\n\n\n\n### \n\nloge.g. `StdoutListener`,`MyDailyRollingFileAppender`\n\n### web.xml\n\n#### log4j\n\n\n\n```xml\n<context-param>\n    <param-name>log4jConfigLocation</param-name>\n    <param-value>/WEB-INF/properties/log4j.xml</param-value>\n</context-param>\n<listener>\n    <listener-class>org.springframework.web.util.Log4jConfigListener</listener-class>\n</listener>\n```\n`log4j.xml`\n\n#### logback\n```xml\n<context-param>\n    <param-name>logbackConfigLocation</param-name>\n    <param-value>WEB-INF/config/logback.xml</param-value>\n</context-param>\n\n<listener>\n     <listener-class>ch.qos.logback.ext.spring.web.LogbackConfigListener</listener-class>\n</listener>\n```\n\n### logback.xml\n\n WEB-INF/config/logback.xml,logstash\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n\n<configuration scan=\"false\" scanPeriod=\"60 seconds\" debug=\"false\">\n\n    <!-- log -->\n    <property name=\"LOG_HOME\" value=\"D:/logtest\" />\n    <!--  -->\n    <property name=\"APP_NAME\" value=\"logtest\" />\n    <!--  -->\n    <property name=\"APP_PORT\" value=\"8080\" />\n    \n    <!--  -->\n    <!-- %method%line -->\n    <property name=\"CONSOLE_LOG_PATTERN\" value=\"%date{HH:mm:ss.SSS}[%-5level]%logger.%method#%line - %msg%n\" />\n    <property name=\"FILE_LOG_PATTERN\" value=\"%date{HH:mm:ss.SSS}[%-5level]%logger.%method#%line - %msg%n\" />\n    \n    <!-- Logstash  -->\n    <property name=\"LOGSTASH_SERVER\" value=\"\" />\n    <property name=\"LOGSTASH_PORT\" value=\"\" />\n    \n\n    <logger name=\"org.springframework\" level=\"WARN\" />\n    <logger name=\"org.springframework.web\" level=\"WARN\" />\n    <logger name=\"org.springframework.security\" level=\"WARN\" />\n    <logger name=\"org.springframework.cache\" level=\"WARN\" />\n    <logger name=\"org.springframework.beans\" level=\"WARN\" />\n    <logger name=\"com.shunneng.logtest\" level=\"DEBUG\" />\n\n    <!--  -->\n    <appender name=\"CONSOLE\" class=\"ch.qos.logback.core.ConsoleAppender\">\n        \n        <!-- ERRROR,elasticsearch -->\n        <filter class=\"ch.qos.logback.classic.filter.LevelFilter\">\n            <level>ERROR</level>\n            <onMatch>ACCEPT</onMatch>\n            <onMismatch>DENY</onMismatch>\n        </filter>\n        \n        <encoder>\n            <pattern>${CONSOLE_LOG_PATTERN}</pattern>\n            <charset>utf8</charset>\n        </encoder>\n    </appender>\n\n    <!--   -->\n    <appender name=\"FILE\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\n        <!--  -->\n        <file>${LOG_HOME}/${APP_NAME}.log</file>\n        \n        <!--  -->\n        <encoder>\n            <charset>utf-8</charset>\n            <pattern>${FILE_LOG_PATTERN}</pattern>\n        </encoder>\n        \n        <!--  -->\n        <rollingPolicy class=\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\">\n            <fileNamePattern>${LOG_HOME}/${APP_NAME}.%i.log</fileNamePattern>\n        </rollingPolicy>\n        \n        <!--  -->\n        <triggeringPolicy class=\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\">\n            <MaxFileSize>100MB</MaxFileSize>\n        </triggeringPolicy>\n        \n    </appender>\n    \n    <!--   -->\n    <appender name=\"LOGSTASH\" class=\"net.logstash.logback.appender.LogstashSocketAppender\">\n        <!-- logstash   -->\n        <host>${LOGSTASH_SERVER}</host>\n        <!-- logstash  -->\n        <port>${LOGSTASH_PORT}</port>\n        <!--   -->\n        <customFields>{\"app_name\":\"${APP_NAME}\",\"app_port\":\"${APP_PORT}\"}</customFields>\n    </appender>\n    \n    <!-- (512) -->\n    <appender name=\"ASYNC\" class=\"ch.qos.logback.classic.AsyncAppender\">\n        <queueSize>512</queueSize>\n        <appender-ref ref=\"FILE\" />\n    </appender>\n    \n    <!--  -->\n    <contextListener class=\"ch.qos.logback.classic.jul.LevelChangePropagator\">\n        <resetJUL>true</resetJUL>\n    </contextListener>\n    \n    <!-- INFO -->\n    <root level=\"INFO\">\n        <appender-ref ref=\"CONSOLE\" />\n        <appender-ref ref=\"ASYNC\" />\n        <appender-ref ref=\"LOGSTASH\" />\n    </root>\n\n</configuration>\n\n```\n\n### Java\n\n`jcl-over-slf4j``log4j-over-slf4j`slf4j\n\n```java\n...\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\n...\n\nprivate final Logger logger = LoggerFactory.getLogger(Demo.class);\n\nlog.info(\"{}\",\"info\"); //:info\n...\n```\n\nlogger.info(\"\"+\"info\"+\"\");\n\nloggererrortoStringerror\n\n\n```java\nif (logger.isInfoEnabled()){\n    logger.info(\"\"+\"info\"+\"\");\n}\n```\n\n `info` string stringbuilder stringbuffer\n\n `{}``Object[]`\n\n### \n\n\n**** [10](http://blog.jobbole.com/52018/) ()[The 10 Commandments of Logging](http://www.masterzen.fr/2013/01/13/the-10-commandments-of-logging/)\n\n [LOG](http://www.jianshu.com/p/8551fe9c6354)\n\n\n> #### 2. log\n\n>TRACE level: (code smell)bug\n\n>DEBUG level: debugdebug(troubleshooting)\n\n>INFO level: (user-driven)()\n\n>NOTICE level: log\n\n>WARN level: errorfailure\n\n>ERROR level: API\n\n>FATAL level: logbindsocketlog\n\n> #### 4. log\n\n> #### 6. log\n\n> #### 7. \n\ntoStringcommons-lang3 `ReflectionToStringBuilder.toString()``new ToStringBuilder()`\n\n  `ReflectionToStringBuilder.toString()`  `lang.Foo@c2a132[name=foo,age=88,bar=lang.Bar@e102dc[name=bar]] `\n\n `new ToStringBuilder()`\n```java\nnew ToStringBuilder(this, ToStringStyle.MULTI_LINE_STYLE)\n    .append(\"name\", name)\n    .append(\"age\", age)\n    .append(\"bar\", bar)\n    .toString()\n```","slug":"springmvc-log4j-to-logback","published":1,"updated":"2017-03-01T06:02:05.838Z","comments":1,"layout":"post","photos":[],"link":"","_id":"cj4i5mbpl001yvkdo6i5mwh2j","content":"<p><code>Spring3.0.5</code>,<code>Spring5.0 M3</code></p>\n<p> <code>logback</code> <code>log4j2</code></p>\n<p></p>\n<ol>\n<li>log4j2 logger()</li>\n<li>log4j2 JSONLayout </li>\n</ol>\n<p>log4j2logback 10(1.2.0+)() <a href=\"https://docs.google.com/spreadsheets/d/1cpb5D7qnyye4W0RTlHUnXedYK98catNZytYIu5D91m0/edit#gid=0\" target=\"_blank\" rel=\"external\">FileAppender throughput\n</a></p>\n<p>spring3.0.5(maven)log4jslf4j+logback1.2.1</p>\n<h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><p><code>pom.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- log --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slf4j.version</span>&gt;</span>1.7.24<span class=\"tag\">&lt;/<span class=\"name\">slf4j.version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.1<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- Spring --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logback-ext-spring.version</span>&gt;</span>0.1.4<span class=\"tag\">&lt;/<span class=\"name\">logback-ext-spring.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logbacklogstash --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logstash-logback-encoder.version</span>&gt;</span>4.8<span class=\"tag\">&lt;/<span class=\"name\">logstash-logback-encoder.version</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- jackson logstash-logback-encoderjackson--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">jackson.version</span>&gt;</span>2.8.6<span class=\"tag\">&lt;/<span class=\"name\">jackson.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- UTF-8  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.encoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.encoding</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlog --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4j Apache Commons Logging --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jcl-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlog4j --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logbackSpring --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.logback-extensions<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-ext-spring<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback-ext-spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlogback --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logback logstash --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>net.logstash.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logstash-logback-encoder<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logstash-logback-encoder.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logstash-logback-encoderjackson --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-databind<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><p>(maven<code>pom.xml</code>,cmdpom.xml  <code>mvn dependency:copy-dependencies -DoutputDirectory=lib</code> <code>lib</code>)<br><a href=\"http://mvnrepository.com/\" target=\"_blank\" rel=\"external\"></a>jar Spring MVC lib<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">jackson-annotations-2.8.0.jar</div><div class=\"line\">jackson-core-2.8.6.jar</div><div class=\"line\">jackson-databind-2.8.6.jar</div><div class=\"line\">jcl-over-slf4j-1.7.24.jar</div><div class=\"line\">log4j-over-slf4j-1.7.24.jar</div><div class=\"line\">logback-classic-1.2.1.jar</div><div class=\"line\">logback-core-1.2.1.jar</div><div class=\"line\">logback-ext-spring-0.1.4.jar</div><div class=\"line\">logstash-logback-encoder-4.8.jar</div><div class=\"line\">slf4j-api-1.7.24.jar</div></pre></td></tr></table></figure></p>\n<h3 id=\"jar\"><a href=\"#jar\" class=\"headerlink\" title=\"jar\"></a>jar</h3><p>mavenmaven<code>log4j.jar</code>,<code>slf4j-log4j12-xxx.jar</code>,<code>slf4j-api-xxx.jar</code><code>commons-logging.jar</code> jar</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>loge.g. <code>StdoutListener</code>,<code>MyDailyRollingFileAppender</code></p>\n<h3 id=\"web-xml\"><a href=\"#web-xml\" class=\"headerlink\" title=\"web.xml\"></a>web.xml</h3><h4 id=\"log4j\"><a href=\"#log4j\" class=\"headerlink\" title=\"log4j\"></a>log4j</h4><p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>log4jConfigLocation<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>/WEB-INF/properties/log4j.xml<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>log4j.xml</code></p>\n<h4 id=\"logback\"><a href=\"#logback\" class=\"headerlink\" title=\"logback\"></a>logback</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>logbackConfigLocation<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>WEB-INF/config/logback.xml<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>ch.qos.logback.ext.spring.web.LogbackConfigListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"logback-xml\"><a href=\"#logback-xml\" class=\"headerlink\" title=\"logback.xml\"></a>logback.xml</h3><p> WEB-INF/config/logback.xml,logstash</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span> <span class=\"attr\">scan</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">scanPeriod</span>=<span class=\"string\">\"60 seconds\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"false\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!-- log --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOG_HOME\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"D:/logtest\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"APP_NAME\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"logtest\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"APP_PORT\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"8080\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- %method%line --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"CONSOLE_LOG_PATTERN\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"%date&#123;HH:mm:ss.SSS&#125;[%-5level]%logger.%method#%line - %msg%n\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE_LOG_PATTERN\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"%date&#123;HH:mm:ss.SSS&#125;[%-5level]%logger.%method#%line - %msg%n\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- Logstash  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH_SERVER\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH_PORT\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.web\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.security\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.cache\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.beans\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"com.shunneng.logtest\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"DEBUG\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"CONSOLE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.ConsoleAppender\"</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!-- ERRROR,elasticsearch --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.filter.LevelFilter\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>ERROR<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>utf8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.RollingFileAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>utf-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.%i.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">triggeringPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">MaxFileSize</span>&gt;</span>100MB<span class=\"tag\">&lt;/<span class=\"name\">MaxFileSize</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">triggeringPolicy</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"net.logstash.logback.appender.LogstashSocketAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!-- logstash   --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">host</span>&gt;</span>$&#123;LOGSTASH_SERVER&#125;<span class=\"tag\">&lt;/<span class=\"name\">host</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!-- logstash  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">port</span>&gt;</span>$&#123;LOGSTASH_PORT&#125;<span class=\"tag\">&lt;/<span class=\"name\">port</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">customFields</span>&gt;</span>&#123;\"app_name\":\"$&#123;APP_NAME&#125;\",\"app_port\":\"$&#123;APP_PORT&#125;\"&#125;<span class=\"tag\">&lt;/<span class=\"name\">customFields</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- (512) --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ASYNC\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.AsyncAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">queueSize</span>&gt;</span>512<span class=\"tag\">&lt;/<span class=\"name\">queueSize</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"FILE\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">contextListener</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.jul.LevelChangePropagator\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">resetJUL</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">resetJUL</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">contextListener</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- INFO --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"INFO\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"CONSOLE\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"ASYNC\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"LOGSTASH\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><p><code>jcl-over-slf4j</code><code>log4j-over-slf4j</code>slf4j</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</div><div class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Logger logger = LoggerFactory.getLogger(Demo.class);</div><div class=\"line\"></div><div class=\"line\">log.info(<span class=\"string\">\"&#123;&#125;\"</span>,<span class=\"string\">\"info\"</span>); <span class=\"comment\">//:info</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>logger.info(+info+);</p>\n<p>loggererrortoStringerror<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (logger.isInfoEnabled())&#123;</div><div class=\"line\">    logger.info(<span class=\"string\">\"\"</span>+<span class=\"string\">\"info\"</span>+<span class=\"string\">\"\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> <code>info</code> string stringbuilder stringbuffer</p>\n<p> <code>{}</code><code>Object[]</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong> <a href=\"http://blog.jobbole.com/52018/\" target=\"_blank\" rel=\"external\">10</a> ()<a href=\"http://www.masterzen.fr/2013/01/13/the-10-commandments-of-logging/\" target=\"_blank\" rel=\"external\">The 10 Commandments of Logging</a></p>\n<p> <a href=\"http://www.jianshu.com/p/8551fe9c6354\" target=\"_blank\" rel=\"external\">LOG</a></p>\n<p></p>\n<blockquote>\n<h4 id=\"2-log\"><a href=\"#2-log\" class=\"headerlink\" title=\"2. log\"></a>2. log</h4><p>TRACE level: (code smell)bug</p>\n<p>DEBUG level: debugdebug(troubleshooting)</p>\n<p>INFO level: (user-driven)()</p>\n<p>NOTICE level: log</p>\n<p>WARN level: errorfailure</p>\n<p>ERROR level: API</p>\n<p>FATAL level: logbindsocketlog</p>\n<h4 id=\"4-log\"><a href=\"#4-log\" class=\"headerlink\" title=\"4. log\"></a>4. log</h4><h4 id=\"6-log\"><a href=\"#6-log\" class=\"headerlink\" title=\"6. log\"></a>6. log</h4><h4 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h4></blockquote>\n<p>toStringcommons-lang3 <code>ReflectionToStringBuilder.toString()</code><code>new ToStringBuilder()</code></p>\n<p>  <code>ReflectionToStringBuilder.toString()</code>  <code>lang.Foo@c2a132[name=foo,age=88,bar=lang.Bar@e102dc[name=bar]]</code></p>\n<p> <code>new ToStringBuilder()</code><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> ToStringBuilder(<span class=\"keyword\">this</span>, ToStringStyle.MULTI_LINE_STYLE)</div><div class=\"line\">    .append(<span class=\"string\">\"name\"</span>, name)</div><div class=\"line\">    .append(<span class=\"string\">\"age\"</span>, age)</div><div class=\"line\">    .append(<span class=\"string\">\"bar\"</span>, bar)</div><div class=\"line\">    .toString()</div></pre></td></tr></table></figure></p>\n","excerpt":"","more":"<p><code>Spring3.0.5</code>,<code>Spring5.0 M3</code></p>\n<p> <code>logback</code> <code>log4j2</code></p>\n<p></p>\n<ol>\n<li>log4j2 logger()</li>\n<li>log4j2 JSONLayout </li>\n</ol>\n<p>log4j2logback 10(1.2.0+)() <a href=\"https://docs.google.com/spreadsheets/d/1cpb5D7qnyye4W0RTlHUnXedYK98catNZytYIu5D91m0/edit#gid=0\">FileAppender throughput\n</a></p>\n<p>spring3.0.5(maven)log4jslf4j+logback1.2.1</p>\n<h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><p><code>pom.xml</code></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">properties</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- log --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">slf4j.version</span>&gt;</span>1.7.24<span class=\"tag\">&lt;/<span class=\"name\">slf4j.version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logback.version</span>&gt;</span>1.2.1<span class=\"tag\">&lt;/<span class=\"name\">logback.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- Spring --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logback-ext-spring.version</span>&gt;</span>0.1.4<span class=\"tag\">&lt;/<span class=\"name\">logback-ext-spring.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logbacklogstash --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logstash-logback-encoder.version</span>&gt;</span>4.8<span class=\"tag\">&lt;/<span class=\"name\">logstash-logback-encoder.version</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- jackson logstash-logback-encoderjackson--&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">jackson.version</span>&gt;</span>2.8.6<span class=\"tag\">&lt;/<span class=\"name\">jackson.version</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- UTF-8  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.build.sourceEncoding</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">project.reporting.outputEncoding</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">maven.compiler.encoding</span>&gt;</span>UTF-8<span class=\"tag\">&lt;/<span class=\"name\">maven.compiler.encoding</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">properties</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">dependencies</span>&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlog --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>slf4j-api<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4j Apache Commons Logging --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jcl-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlog4j --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.slf4j<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>log4j-over-slf4j<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;slf4j.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logbackSpring --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>org.logback-extensions<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-ext-spring<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback-ext-spring.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- slf4jlogback --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>ch.qos.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logback-classic<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logback.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logback logstash --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>net.logstash.logback<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>logstash-logback-encoder<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;logstash-logback-encoder.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- logstash-logback-encoderjackson --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-core<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">groupId</span>&gt;</span>com.fasterxml.jackson.core<span class=\"tag\">&lt;/<span class=\"name\">groupId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">artifactId</span>&gt;</span>jackson-databind<span class=\"tag\">&lt;/<span class=\"name\">artifactId</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">version</span>&gt;</span>$&#123;jackson.version&#125;<span class=\"tag\">&lt;/<span class=\"name\">version</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">dependency</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">dependencies</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Maven\"><a href=\"#Maven\" class=\"headerlink\" title=\"Maven\"></a>Maven</h3><p>(maven<code>pom.xml</code>,cmdpom.xml  <code>mvn dependency:copy-dependencies -DoutputDirectory=lib</code> <code>lib</code>)<br><a href=\"http://mvnrepository.com/\"></a>jar Spring MVC lib<br><figure class=\"highlight plain\"><table><tr><td class=\"code\"><pre><div class=\"line\">jackson-annotations-2.8.0.jar</div><div class=\"line\">jackson-core-2.8.6.jar</div><div class=\"line\">jackson-databind-2.8.6.jar</div><div class=\"line\">jcl-over-slf4j-1.7.24.jar</div><div class=\"line\">log4j-over-slf4j-1.7.24.jar</div><div class=\"line\">logback-classic-1.2.1.jar</div><div class=\"line\">logback-core-1.2.1.jar</div><div class=\"line\">logback-ext-spring-0.1.4.jar</div><div class=\"line\">logstash-logback-encoder-4.8.jar</div><div class=\"line\">slf4j-api-1.7.24.jar</div></pre></td></tr></table></figure></p>\n<h3 id=\"jar\"><a href=\"#jar\" class=\"headerlink\" title=\"jar\"></a>jar</h3><p>mavenmaven<code>log4j.jar</code>,<code>slf4j-log4j12-xxx.jar</code>,<code>slf4j-api-xxx.jar</code><code>commons-logging.jar</code> jar</p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>loge.g. <code>StdoutListener</code>,<code>MyDailyRollingFileAppender</code></p>\n<h3 id=\"web-xml\"><a href=\"#web-xml\" class=\"headerlink\" title=\"web.xml\"></a>web.xml</h3><h4 id=\"log4j\"><a href=\"#log4j\" class=\"headerlink\" title=\"log4j\"></a>log4j</h4><p></p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>log4jConfigLocation<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>/WEB-INF/properties/log4j.xml<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>org.springframework.web.util.Log4jConfigListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></div></pre></td></tr></table></figure>\n<p><code>log4j.xml</code></p>\n<h4 id=\"logback\"><a href=\"#logback\" class=\"headerlink\" title=\"logback\"></a>logback</h4><figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-name</span>&gt;</span>logbackConfigLocation<span class=\"tag\">&lt;/<span class=\"name\">param-name</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">param-value</span>&gt;</span>WEB-INF/config/logback.xml<span class=\"tag\">&lt;/<span class=\"name\">param-value</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">context-param</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">listener</span>&gt;</span></div><div class=\"line\">     <span class=\"tag\">&lt;<span class=\"name\">listener-class</span>&gt;</span>ch.qos.logback.ext.spring.web.LogbackConfigListener<span class=\"tag\">&lt;/<span class=\"name\">listener-class</span>&gt;</span></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">listener</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"logback-xml\"><a href=\"#logback-xml\" class=\"headerlink\" title=\"logback.xml\"></a>logback.xml</h3><p> WEB-INF/config/logback.xml,logstash</p>\n<figure class=\"highlight xml\"><table><tr><td class=\"code\"><pre><div class=\"line\">&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;</div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">configuration</span> <span class=\"attr\">scan</span>=<span class=\"string\">\"false\"</span> <span class=\"attr\">scanPeriod</span>=<span class=\"string\">\"60 seconds\"</span> <span class=\"attr\">debug</span>=<span class=\"string\">\"false\"</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!-- log --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOG_HOME\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"D:/logtest\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"APP_NAME\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"logtest\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"APP_PORT\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"8080\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"comment\">&lt;!-- %method%line --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"CONSOLE_LOG_PATTERN\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"%date&#123;HH:mm:ss.SSS&#125;[%-5level]%logger.%method#%line - %msg%n\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE_LOG_PATTERN\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"%date&#123;HH:mm:ss.SSS&#125;[%-5level]%logger.%method#%line - %msg%n\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- Logstash  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH_SERVER\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">property</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH_PORT\"</span> <span class=\"attr\">value</span>=<span class=\"string\">\"\"</span> /&gt;</span></div><div class=\"line\">    </div><div class=\"line\"></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.web\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.security\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.cache\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"org.springframework.beans\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"WARN\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">logger</span> <span class=\"attr\">name</span>=<span class=\"string\">\"com.shunneng.logtest\"</span> <span class=\"attr\">level</span>=<span class=\"string\">\"DEBUG\"</span> /&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"CONSOLE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.ConsoleAppender\"</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!-- ERRROR,elasticsearch --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">filter</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.filter.LevelFilter\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">level</span>&gt;</span>ERROR<span class=\"tag\">&lt;/<span class=\"name\">level</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMatch</span>&gt;</span>ACCEPT<span class=\"tag\">&lt;/<span class=\"name\">onMatch</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">onMismatch</span>&gt;</span>DENY<span class=\"tag\">&lt;/<span class=\"name\">onMismatch</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">filter</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>$&#123;CONSOLE_LOG_PATTERN&#125;<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>utf8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\">    <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"FILE\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.RollingFileAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">file</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.log<span class=\"tag\">&lt;/<span class=\"name\">file</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">charset</span>&gt;</span>utf-8<span class=\"tag\">&lt;/<span class=\"name\">charset</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">pattern</span>&gt;</span>$&#123;FILE_LOG_PATTERN&#125;<span class=\"tag\">&lt;/<span class=\"name\">pattern</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">encoder</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">rollingPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">fileNamePattern</span>&gt;</span>$&#123;LOG_HOME&#125;/$&#123;APP_NAME&#125;.%i.log<span class=\"tag\">&lt;/<span class=\"name\">fileNamePattern</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">rollingPolicy</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">        <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">triggeringPolicy</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\"</span>&gt;</span></div><div class=\"line\">            <span class=\"tag\">&lt;<span class=\"name\">MaxFileSize</span>&gt;</span>100MB<span class=\"tag\">&lt;/<span class=\"name\">MaxFileSize</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;/<span class=\"name\">triggeringPolicy</span>&gt;</span></div><div class=\"line\">        </div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"LOGSTASH\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"net.logstash.logback.appender.LogstashSocketAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!-- logstash   --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">host</span>&gt;</span>$&#123;LOGSTASH_SERVER&#125;<span class=\"tag\">&lt;/<span class=\"name\">host</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!-- logstash  --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">port</span>&gt;</span>$&#123;LOGSTASH_PORT&#125;<span class=\"tag\">&lt;/<span class=\"name\">port</span>&gt;</span></div><div class=\"line\">        <span class=\"comment\">&lt;!--   --&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">customFields</span>&gt;</span>&#123;\"app_name\":\"$&#123;APP_NAME&#125;\",\"app_port\":\"$&#123;APP_PORT&#125;\"&#125;<span class=\"tag\">&lt;/<span class=\"name\">customFields</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- (512) --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">appender</span> <span class=\"attr\">name</span>=<span class=\"string\">\"ASYNC\"</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.AsyncAppender\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">queueSize</span>&gt;</span>512<span class=\"tag\">&lt;/<span class=\"name\">queueSize</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"FILE\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">appender</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!--  --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">contextListener</span> <span class=\"attr\">class</span>=<span class=\"string\">\"ch.qos.logback.classic.jul.LevelChangePropagator\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">resetJUL</span>&gt;</span>true<span class=\"tag\">&lt;/<span class=\"name\">resetJUL</span>&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">contextListener</span>&gt;</span></div><div class=\"line\">    </div><div class=\"line\">    <span class=\"comment\">&lt;!-- INFO --&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">root</span> <span class=\"attr\">level</span>=<span class=\"string\">\"INFO\"</span>&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"CONSOLE\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"ASYNC\"</span> /&gt;</span></div><div class=\"line\">        <span class=\"tag\">&lt;<span class=\"name\">appender-ref</span> <span class=\"attr\">ref</span>=<span class=\"string\">\"LOGSTASH\"</span> /&gt;</span></div><div class=\"line\">    <span class=\"tag\">&lt;/<span class=\"name\">root</span>&gt;</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">configuration</span>&gt;</span></div></pre></td></tr></table></figure>\n<h3 id=\"Java\"><a href=\"#Java\" class=\"headerlink\" title=\"Java\"></a>Java</h3><p><code>jcl-over-slf4j</code><code>log4j-over-slf4j</code>slf4j</p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\">...</div><div class=\"line\"><span class=\"keyword\">import</span> org.slf4j.Logger;</div><div class=\"line\"><span class=\"keyword\">import</span> org.slf4j.LoggerFactory;</div><div class=\"line\">...</div><div class=\"line\"></div><div class=\"line\"><span class=\"keyword\">private</span> <span class=\"keyword\">final</span> Logger logger = LoggerFactory.getLogger(Demo.class);</div><div class=\"line\"></div><div class=\"line\">log.info(<span class=\"string\">\"&#123;&#125;\"</span>,<span class=\"string\">\"info\"</span>); <span class=\"comment\">//:info</span></div><div class=\"line\">...</div></pre></td></tr></table></figure>\n<p>logger.info(+info+);</p>\n<p>loggererrortoStringerror<br></p>\n<figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">if</span> (logger.isInfoEnabled())&#123;</div><div class=\"line\">    logger.info(<span class=\"string\">\"\"</span>+<span class=\"string\">\"info\"</span>+<span class=\"string\">\"\"</span>);</div><div class=\"line\">&#125;</div></pre></td></tr></table></figure>\n<p> <code>info</code> string stringbuilder stringbuffer</p>\n<p> <code>{}</code><code>Object[]</code></p>\n<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><strong></strong> <a href=\"http://blog.jobbole.com/52018/\">10</a> ()<a href=\"http://www.masterzen.fr/2013/01/13/the-10-commandments-of-logging/\">The 10 Commandments of Logging</a></p>\n<p> <a href=\"http://www.jianshu.com/p/8551fe9c6354\">LOG</a></p>\n<p></p>\n<blockquote>\n<h4 id=\"2-log\"><a href=\"#2-log\" class=\"headerlink\" title=\"2. log\"></a>2. log</h4><p>TRACE level: (code smell)bug</p>\n<p>DEBUG level: debugdebug(troubleshooting)</p>\n<p>INFO level: (user-driven)()</p>\n<p>NOTICE level: log</p>\n<p>WARN level: errorfailure</p>\n<p>ERROR level: API</p>\n<p>FATAL level: logbindsocketlog</p>\n<h4 id=\"4-log\"><a href=\"#4-log\" class=\"headerlink\" title=\"4. log\"></a>4. log</h4><h4 id=\"6-log\"><a href=\"#6-log\" class=\"headerlink\" title=\"6. log\"></a>6. log</h4><h4 id=\"7-\"><a href=\"#7-\" class=\"headerlink\" title=\"7. \"></a>7. </h4></blockquote>\n<p>toStringcommons-lang3 <code>ReflectionToStringBuilder.toString()</code><code>new ToStringBuilder()</code></p>\n<p>  <code>ReflectionToStringBuilder.toString()</code>  <code>lang.Foo@c2a132[name=foo,age=88,bar=lang.Bar@e102dc[name=bar]]</code></p>\n<p> <code>new ToStringBuilder()</code><br><figure class=\"highlight java\"><table><tr><td class=\"code\"><pre><div class=\"line\"><span class=\"keyword\">new</span> ToStringBuilder(<span class=\"keyword\">this</span>, ToStringStyle.MULTI_LINE_STYLE)</div><div class=\"line\">    .append(<span class=\"string\">\"name\"</span>, name)</div><div class=\"line\">    .append(<span class=\"string\">\"age\"</span>, age)</div><div class=\"line\">    .append(<span class=\"string\">\"bar\"</span>, bar)</div><div class=\"line\">    .toString()</div></pre></td></tr></table></figure></p>\n"},{"title":"nginx","date":"2017-06-29T08:03:19.000Z","_content":"nginx`location`,`nginx -s reload`  `service nginx reload`(e.g. [](http://tool.oschina.net/regex/))\n\n<!-- more -->\n\n wikipedia [Comparison of regular expression engines](https://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines#Libraries)\n\nnginx[PCRE](http://www.pcre.org/)\n\nnginx [Building nginx from Sources](http://nginx.org/en/docs/configure.html)\n> --with-pcre=path  sets the path to the sources of the PCRE library. The library distribution (version 4.4  8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginxs ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.\n\nlinux `grep` \n\nwindows[cygwin](http://www.cygwin.com/) [git for windows](https://git-for-windows.github.io/)`git-bash.exe`\n\n```bash\n$ grep --help\n\n# ...\n\nRegexp selection and interpretation:\n  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)\n  -F, --fixed-strings       PATTERN is a set of newline-separated strings\n  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)\n  -P, --perl-regexp         PATTERN is a Perl regular expression\n  -e, --regexp=PATTERN      use PATTERN for matching\n  -f, --file=FILE           obtain PATTERN from FILE\n  -i, --ignore-case         ignore case distinctions\n  -w, --word-regexp         force PATTERN to match only whole words\n  -x, --line-regexp         force PATTERN to match only whole lines\n  -z, --null-data           a data line ends in 0 byte, not newline\n\n# ...\n```\n\n `grep -P`\n\n```bash\n$ echo 'a.gif' | grep -P '\\.(jp?g|gif|bmp|png)'\n\n#\na.gif\n\n```\n\n`-o`\n\n```bash\n$ echo 'a.gif' | grep -P -o '\\.(jp?g|gif|bmp|png)'\n\n#\n.gif\n```\n\n perl \n\n[Perl regular expressions man page](http://perldoc.perl.org/perlre.html)\n\n[-PerlPerl](http://blog.csdn.net/sunshoupo211/article/details/31769837)\n\n\n [https://anjia.ml/2017/06/29/nginx-regex-test-way/][blog]\n [http://www.jianshu.com/p/17eb0ba22ff6][jianshu]\n [https://juejin.im/post/5954ad1b5188250d8f602bca][juejin]\n\n[jianshu]: http://www.jianshu.com/p/17eb0ba22ff6\n[juejin]: https://juejin.im/post/5954ad1b5188250d8f602bca\n[blog]: https://anjia.ml/2017/06/29/nginx-regex-test-way/","source":"_posts/nginx-regex-test-way.md","raw":"---\ntitle: nginx\ndate: 2017-06-29 16:03:19\ntags: [nginx]\ncategories: [nginx]\n---\nnginx`location`,`nginx -s reload`  `service nginx reload`(e.g. [](http://tool.oschina.net/regex/))\n\n<!-- more -->\n\n wikipedia [Comparison of regular expression engines](https://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines#Libraries)\n\nnginx[PCRE](http://www.pcre.org/)\n\nnginx [Building nginx from Sources](http://nginx.org/en/docs/configure.html)\n> --with-pcre=path  sets the path to the sources of the PCRE library. The library distribution (version 4.4  8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginxs ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.\n\nlinux `grep` \n\nwindows[cygwin](http://www.cygwin.com/) [git for windows](https://git-for-windows.github.io/)`git-bash.exe`\n\n```bash\n$ grep --help\n\n# ...\n\nRegexp selection and interpretation:\n  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)\n  -F, --fixed-strings       PATTERN is a set of newline-separated strings\n  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)\n  -P, --perl-regexp         PATTERN is a Perl regular expression\n  -e, --regexp=PATTERN      use PATTERN for matching\n  -f, --file=FILE           obtain PATTERN from FILE\n  -i, --ignore-case         ignore case distinctions\n  -w, --word-regexp         force PATTERN to match only whole words\n  -x, --line-regexp         force PATTERN to match only whole lines\n  -z, --null-data           a data line ends in 0 byte, not newline\n\n# ...\n```\n\n `grep -P`\n\n```bash\n$ echo 'a.gif' | grep -P '\\.(jp?g|gif|bmp|png)'\n\n#\na.gif\n\n```\n\n`-o`\n\n```bash\n$ echo 'a.gif' | grep -P -o '\\.(jp?g|gif|bmp|png)'\n\n#\n.gif\n```\n\n perl \n\n[Perl regular expressions man page](http://perldoc.perl.org/perlre.html)\n\n[-PerlPerl](http://blog.csdn.net/sunshoupo211/article/details/31769837)\n\n\n [https://anjia.ml/2017/06/29/nginx-regex-test-way/][blog]\n [http://www.jianshu.com/p/17eb0ba22ff6][jianshu]\n [https://juejin.im/post/5954ad1b5188250d8f602bca][juejin]\n\n[jianshu]: http://www.jianshu.com/p/17eb0ba22ff6\n[juejin]: https://juejin.im/post/5954ad1b5188250d8f602bca\n[blog]: https://anjia.ml/2017/06/29/nginx-regex-test-way/","slug":"nginx-regex-test-way","published":1,"updated":"2017-06-29T08:18:30.569Z","_id":"cj4i5ntli0000jgdovuqzgzk1","comments":1,"layout":"post","photos":[],"link":"","content":"<p>nginx<code>location</code>,<code>nginx -s reload</code>  <code>service nginx reload</code>(e.g. <a href=\"http://tool.oschina.net/regex/\" target=\"_blank\" rel=\"external\"></a>)</p>\n<a id=\"more\"></a>\n<p> wikipedia <a href=\"https://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines#Libraries\" target=\"_blank\" rel=\"external\">Comparison of regular expression engines</a></p>\n<p>nginx<a href=\"http://www.pcre.org/\" target=\"_blank\" rel=\"external\">PCRE</a></p>\n<p>nginx <a href=\"http://nginx.org/en/docs/configure.html\" target=\"_blank\" rel=\"external\">Building nginx from Sources</a></p>\n<blockquote>\n<p>with-pcre=path  sets the path to the sources of the PCRE library. The library distribution (version 4.4  8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginxs ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.</p>\n</blockquote>\n<p>linux <code>grep</code> </p>\n<p>windows<a href=\"http://www.cygwin.com/\" target=\"_blank\" rel=\"external\">cygwin</a> <a href=\"https://git-for-windows.github.io/\" target=\"_blank\" rel=\"external\">git for windows</a><code>git-bash.exe</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ grep --help</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ...</span></div><div class=\"line\"></div><div class=\"line\">Regexp selection and interpretation:</div><div class=\"line\">  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)</div><div class=\"line\">  -F, --fixed-strings       PATTERN is a <span class=\"built_in\">set</span> of newline-separated strings</div><div class=\"line\">  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)</div><div class=\"line\">  -P, --perl-regexp         PATTERN is a Perl regular expression</div><div class=\"line\">  <span class=\"_\">-e</span>, --regexp=PATTERN      use PATTERN <span class=\"keyword\">for</span> matching</div><div class=\"line\">  <span class=\"_\">-f</span>, --file=FILE           obtain PATTERN from FILE</div><div class=\"line\">  -i, --ignore-case         ignore <span class=\"keyword\">case</span> distinctions</div><div class=\"line\">  -w, --word-regexp         force PATTERN to match only whole words</div><div class=\"line\">  -x, --line-regexp         force PATTERN to match only whole lines</div><div class=\"line\">  -z, --null-data           a data line ends <span class=\"keyword\">in</span> 0 byte, not newline</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ...</span></div></pre></td></tr></table></figure>\n<p> <code>grep -P</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'a.gif'</span> | grep -P <span class=\"string\">'\\.(jp?g|gif|bmp|png)'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">a.gif</div></pre></td></tr></table></figure>\n<p><code>-o</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'a.gif'</span> | grep -P -o <span class=\"string\">'\\.(jp?g|gif|bmp|png)'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">.gif</div></pre></td></tr></table></figure>\n<p> perl </p>\n<p><a href=\"http://perldoc.perl.org/perlre.html\" target=\"_blank\" rel=\"external\">Perl regular expressions man page</a></p>\n<p><a href=\"http://blog.csdn.net/sunshoupo211/article/details/31769837\" target=\"_blank\" rel=\"external\">-PerlPerl</a></p>\n<p> <a href=\"https://anjia.ml/2017/06/29/nginx-regex-test-way/\">https://anjia.ml/2017/06/29/nginx-regex-test-way/</a><br> <a href=\"http://www.jianshu.com/p/17eb0ba22ff6\" target=\"_blank\" rel=\"external\">http://www.jianshu.com/p/17eb0ba22ff6</a><br> <a href=\"https://juejin.im/post/5954ad1b5188250d8f602bca\" target=\"_blank\" rel=\"external\">https://juejin.im/post/5954ad1b5188250d8f602bca</a></p>\n","excerpt":"<p>nginx<code>location</code>,<code>nginx -s reload</code>  <code>service nginx reload</code>(e.g. <a href=\"http://tool.oschina.net/regex/\"></a>)</p>","more":"<p> wikipedia <a href=\"https://en.wikipedia.org/wiki/Comparison_of_regular_expression_engines#Libraries\">Comparison of regular expression engines</a></p>\n<p>nginx<a href=\"http://www.pcre.org/\">PCRE</a></p>\n<p>nginx <a href=\"http://nginx.org/en/docs/configure.html\">Building nginx from Sources</a></p>\n<blockquote>\n<p>with-pcre=path  sets the path to the sources of the PCRE library. The library distribution (version 4.4  8.40) needs to be downloaded from the PCRE site and extracted. The rest is done by nginxs ./configure and make. The library is required for regular expressions support in the location directive and for the ngx_http_rewrite_module module.</p>\n</blockquote>\n<p>linux <code>grep</code> </p>\n<p>windows<a href=\"http://www.cygwin.com/\">cygwin</a> <a href=\"https://git-for-windows.github.io/\">git for windows</a><code>git-bash.exe</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ grep --help</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ...</span></div><div class=\"line\"></div><div class=\"line\">Regexp selection and interpretation:</div><div class=\"line\">  -E, --extended-regexp     PATTERN is an extended regular expression (ERE)</div><div class=\"line\">  -F, --fixed-strings       PATTERN is a <span class=\"built_in\">set</span> of newline-separated strings</div><div class=\"line\">  -G, --basic-regexp        PATTERN is a basic regular expression (BRE)</div><div class=\"line\">  -P, --perl-regexp         PATTERN is a Perl regular expression</div><div class=\"line\">  <span class=\"_\">-e</span>, --regexp=PATTERN      use PATTERN <span class=\"keyword\">for</span> matching</div><div class=\"line\">  <span class=\"_\">-f</span>, --file=FILE           obtain PATTERN from FILE</div><div class=\"line\">  -i, --ignore-case         ignore <span class=\"keyword\">case</span> distinctions</div><div class=\"line\">  -w, --word-regexp         force PATTERN to match only whole words</div><div class=\"line\">  -x, --line-regexp         force PATTERN to match only whole lines</div><div class=\"line\">  -z, --null-data           a data line ends <span class=\"keyword\">in</span> 0 byte, not newline</div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\"># ...</span></div></pre></td></tr></table></figure>\n<p> <code>grep -P</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'a.gif'</span> | grep -P <span class=\"string\">'\\.(jp?g|gif|bmp|png)'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">a.gif</div></pre></td></tr></table></figure>\n<p><code>-o</code></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"code\"><pre><div class=\"line\">$ <span class=\"built_in\">echo</span> <span class=\"string\">'a.gif'</span> | grep -P -o <span class=\"string\">'\\.(jp?g|gif|bmp|png)'</span></div><div class=\"line\"></div><div class=\"line\"><span class=\"comment\">#</span></div><div class=\"line\">.gif</div></pre></td></tr></table></figure>\n<p> perl </p>\n<p><a href=\"http://perldoc.perl.org/perlre.html\">Perl regular expressions man page</a></p>\n<p><a href=\"http://blog.csdn.net/sunshoupo211/article/details/31769837\">-PerlPerl</a></p>\n<p> <a href=\"https://anjia.ml/2017/06/29/nginx-regex-test-way/\">https://anjia.ml/2017/06/29/nginx-regex-test-way/</a><br> <a href=\"http://www.jianshu.com/p/17eb0ba22ff6\">http://www.jianshu.com/p/17eb0ba22ff6</a><br> <a href=\"https://juejin.im/post/5954ad1b5188250d8f602bca\">https://juejin.im/post/5954ad1b5188250d8f602bca</a></p>"}],"PostAsset":[],"PostCategory":[{"post_id":"cj4i5mbnw0005vkdolybxxix5","category_id":"cj4i5mbns0002vkdopsvpo0qc","_id":"cj4i5mbo6000avkdoc7uyf1jf"},{"post_id":"cj4i5mbnf0000vkdo9gepnj9w","category_id":"cj4i5mbns0002vkdopsvpo0qc","_id":"cj4i5mboa000evkdoicas6ue8"},{"post_id":"cj4i5mbo50009vkdo7e5s6rp8","category_id":"cj4i5mbns0002vkdopsvpo0qc","_id":"cj4i5mboc000gvkdoq3oz5au0"},{"post_id":"cj4i5mbnm0001vkdoicfiri7p","category_id":"cj4i5mbns0002vkdopsvpo0qc","_id":"cj4i5mbog000kvkdoaz0v8k5n"},{"post_id":"cj4i5mbnu0004vkdopntjf0pl","category_id":"cj4i5mbns0002vkdopsvpo0qc","_id":"cj4i5mboi000nvkdorvzsnruh"},{"post_id":"cj4i5mbo30006vkdopsselta8","category_id":"cj4i5mboe000ivkdou73mzl6d","_id":"cj4i5mbok000svkdolokzqn37"},{"post_id":"cj4i5mbob000fvkdo4p8r8qhw","category_id":"cj4i5mboj000ovkdoamzztvx0","_id":"cj4i5mbon000vvkdozg03vp4j"},{"post_id":"cj4i5mbod000hvkdorvc6d5vo","category_id":"cj4i5mbok000tvkdocfl29o58","_id":"cj4i5mbop000zvkdoie3f5a7u"},{"post_id":"cj4i5mboh000lvkdovxa3mem5","category_id":"cj4i5mbon000wvkdovomnpuo7","_id":"cj4i5mboq0013vkdovr8qynp3"},{"post_id":"cj4i5mbpl001yvkdo6i5mwh2j","category_id":"cj4i5mboe000ivkdou73mzl6d","_id":"cj4i5mbpn0020vkdozr08q4fm"},{"post_id":"cj4i5ntli0000jgdovuqzgzk1","category_id":"cj4i5mboj000ovkdoamzztvx0","_id":"cj4i5ntm00002jgdollcu1zgh"}],"PostTag":[{"post_id":"cj4i5mbnf0000vkdo9gepnj9w","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mboi000mvkdod8ofrkhx"},{"post_id":"cj4i5mbnf0000vkdo9gepnj9w","tag_id":"cj4i5mbo40008vkdo0b4n7ohm","_id":"cj4i5mboj000pvkdoou25rpxv"},{"post_id":"cj4i5mbnf0000vkdo9gepnj9w","tag_id":"cj4i5mbo9000dvkdolz30hcjv","_id":"cj4i5mbok000rvkdoexkx8a2w"},{"post_id":"cj4i5mbnm0001vkdoicfiri7p","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mboo000yvkdol2kdx0z3"},{"post_id":"cj4i5mbnm0001vkdoicfiri7p","tag_id":"cj4i5mbo40008vkdo0b4n7ohm","_id":"cj4i5mbop0010vkdogu9mze1x"},{"post_id":"cj4i5mbnm0001vkdoicfiri7p","tag_id":"cj4i5mbol000uvkdonzjj1s79","_id":"cj4i5mboq0012vkdo7d6k4snd"},{"post_id":"cj4i5mbnu0004vkdopntjf0pl","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mbor0016vkdo42js7eri"},{"post_id":"cj4i5mbnu0004vkdopntjf0pl","tag_id":"cj4i5mbo40008vkdo0b4n7ohm","_id":"cj4i5mbor0017vkdoy966f523"},{"post_id":"cj4i5mbnu0004vkdopntjf0pl","tag_id":"cj4i5mbo9000dvkdolz30hcjv","_id":"cj4i5mbos0019vkdosne79d8b"},{"post_id":"cj4i5mbnw0005vkdolybxxix5","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mbos001bvkdoobj3l2tw"},{"post_id":"cj4i5mbnw0005vkdolybxxix5","tag_id":"cj4i5mboq0015vkdoxypvcy8p","_id":"cj4i5mbot001cvkdot1vvnj97"},{"post_id":"cj4i5mbnw0005vkdolybxxix5","tag_id":"cj4i5mbor0018vkdo3cceuex1","_id":"cj4i5mbov001evkdojb3evbue"},{"post_id":"cj4i5mbo30006vkdopsselta8","tag_id":"cj4i5mbos001avkdo2si1g5i1","_id":"cj4i5mboy001gvkdoqndx6nz5"},{"post_id":"cj4i5mbo30006vkdopsselta8","tag_id":"cj4i5mbot001dvkdovadxbnee","_id":"cj4i5mboy001hvkdou0ai601q"},{"post_id":"cj4i5mbo50009vkdo7e5s6rp8","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mboz001jvkdocq2veoct"},{"post_id":"cj4i5mbo50009vkdo7e5s6rp8","tag_id":"cj4i5mbo40008vkdo0b4n7ohm","_id":"cj4i5mboz001kvkdof83t3vs3"},{"post_id":"cj4i5mbo50009vkdo7e5s6rp8","tag_id":"cj4i5mbox001fvkdoikm0pqx7","_id":"cj4i5mboz001mvkdou8caa430"},{"post_id":"cj4i5mbo7000bvkdo8ihyp5ig","tag_id":"cj4i5mboy001ivkdolt96lvzr","_id":"cj4i5mboz001nvkdopyzyiuo3"},{"post_id":"cj4i5mbob000fvkdo4p8r8qhw","tag_id":"cj4i5mboz001lvkdox4brqtwd","_id":"cj4i5mbp1001rvkdo84tbc19v"},{"post_id":"cj4i5mbob000fvkdo4p8r8qhw","tag_id":"cj4i5mboz001ovkdogyyse88f","_id":"cj4i5mbp1001svkdotvjgoaxq"},{"post_id":"cj4i5mbob000fvkdo4p8r8qhw","tag_id":"cj4i5mbnu0003vkdo620ecc95","_id":"cj4i5mbp1001uvkdo3dh37w7s"},{"post_id":"cj4i5mbob000fvkdo4p8r8qhw","tag_id":"cj4i5mboq0015vkdoxypvcy8p","_id":"cj4i5mbp2001vvkdog1ihqjtb"},{"post_id":"cj4i5mbod000hvkdorvc6d5vo","tag_id":"cj4i5mbp0001qvkdo7nwiprgt","_id":"cj4i5mbp2001wvkdolu0swcr1"},{"post_id":"cj4i5mboh000lvkdovxa3mem5","tag_id":"cj4i5mbp1001tvkdoy83ka67v","_id":"cj4i5mbp2001xvkdolpp3i6lq"},{"post_id":"cj4i5mbpl001yvkdo6i5mwh2j","tag_id":"cj4i5mbpn001zvkdoipyo10g6","_id":"cj4i5mbps0024vkdoeudj2j5s"},{"post_id":"cj4i5mbpl001yvkdo6i5mwh2j","tag_id":"cj4i5mbpo0021vkdom0abcgq4","_id":"cj4i5mbpt0025vkdow6z1ik56"},{"post_id":"cj4i5mbpl001yvkdo6i5mwh2j","tag_id":"cj4i5mbpp0022vkdo73kny7gq","_id":"cj4i5mbpt0026vkdofhendqi5"},{"post_id":"cj4i5mbpl001yvkdo6i5mwh2j","tag_id":"cj4i5mbpq0023vkdoqw3e32b3","_id":"cj4i5mbpt0027vkdoyzbj7flf"},{"post_id":"cj4i5ntli0000jgdovuqzgzk1","tag_id":"cj4i5mboz001lvkdox4brqtwd","_id":"cj4i5ntm00001jgdo2ntwauqz"}],"Tag":[{"name":"elk","_id":"cj4i5mbnu0003vkdo620ecc95"},{"name":"elkstasck","_id":"cj4i5mbo40008vkdo0b4n7ohm"},{"name":"ElastAlert","_id":"cj4i5mbo9000dvkdolz30hcjv"},{"name":"curator","_id":"cj4i5mbol000uvkdonzjj1s79"},{"name":"elkstack","_id":"cj4i5mboq0015vkdoxypvcy8p"},{"name":"beats","_id":"cj4i5mbor0018vkdo3cceuex1"},{"name":"blog","_id":"cj4i5mbos001avkdo2si1g5i1"},{"name":"hexo","_id":"cj4i5mbot001dvkdovadxbnee"},{"name":"Heartbeat","_id":"cj4i5mbox001fvkdoikm0pqx7"},{"name":"java","_id":"cj4i5mboy001ivkdolt96lvzr"},{"name":"nginx","_id":"cj4i5mboz001lvkdox4brqtwd"},{"name":"logstash","_id":"cj4i5mboz001ovkdogyyse88f"},{"name":"owncloud","_id":"cj4i5mbp0001qvkdo7nwiprgt"},{"name":"synergy","_id":"cj4i5mbp1001tvkdoy83ka67v"},{"name":"springmvc","_id":"cj4i5mbpn001zvkdoipyo10g6"},{"name":"logback","_id":"cj4i5mbpo0021vkdom0abcgq4"},{"name":"log4j","_id":"cj4i5mbpp0022vkdo73kny7gq"},{"name":"log","_id":"cj4i5mbpq0023vkdoqw3e32b3"}]}}